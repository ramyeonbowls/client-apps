import{F as m,a as u,E as h}from"./vee-validate.esm-Nlz2O7Po.js";/* empty css                    */import{_ as b,c as p,d as f,a as e,g as _,e as g,n,F as v,r as w,o as x}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";let l;const y={components:{VeeForm:m,Field:u,ErrorMessage:h},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{field:{file:""},upload:!1}}},mounted(){this.__MENU(),this.$root.web_access_log();let t=this;l=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/transaction/appr-user",columns:[{data:"nik"},{data:"name"},{data:"email"},{data:"phone"},{data:"birthday",class:"text-center"},{data:"created_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){let a=l.row(this).data();$(this).hasClass("selected")?($(this).removeClass("selected"),t.selected=t.selected.filter(s=>s.extn!==a.extn)):($(this).addClass("selected"),t.selected.push(a))})},methods:{__MENU(){let t=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(a=>{t.hide(),this.menu.menu_label=a.data.menu_label,this.menu.menu_desc=a.data.menu_desc,this.menu.permission=a.data.permission}).catch(a=>{t.hide(),console.error(a)})},upload(){this.form.upload=!0,this.form.field.file=""},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(t=>{if(t.value){let a=this.$loading.show();window.axios.delete("/master/teacher-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(s=>{a.hide(),this.selected=[],l.ajax.reload(),this.$swal({toast:!0,icon:"success",html:s.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){let t=this.$loading.show();window.axios.post("/transaction/appr-user",this.selected).then(a=>{t.hide(),l.ajax.reload(),this.submit_count=0,this.cancel(),this.$swal({toast:!0,position:"top",icon:a.status===201?"success":"info",html:a.data})}).catch(a=>{t.hide(),this.submit_count=0,console.error(a)})},cancel(){this.form.upload=!1,this.form.field.file="",this.$refs.file_upl.value="",l.ajax.reload(null,!1)},DownloadTpl(){let t=this.$loading.show();window.axios({url:"/master/teacher-mst?menufn="+this.$route.name+"&download=tpl",method:"POST",responseType:"blob"}).then(a=>{t.hide();const s=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=s,o.setAttribute("download","Template Upload Teacher.xlsx"),document.body.appendChild(o),o.click()}).catch(a=>{console.error(a),t.hide()})},async onChangeFileUpload(t){this.form.field.file=this.$refs.file_upl.files[0]}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},beforeRouteLeave(t,a,s){l&&(l.destroy(),l=null),s()}},k={class:"section"},T={class:"row"},C={class:"col-md-12"},P={class:"card"},M={class:"card-header"},E={class:"buttons"},N=e("i",{class:"bi bi-check-square-fill"},null,-1),B={class:"card-body"},F={class:"nav nav-tabs",id:"myTab",role:"tablist"},U={class:"nav-item",role:"presentation"},A={class:"nav-item",role:"presentation"},L={class:"tab-content",id:"myTabContent"},j=e("div",{class:"table-responsive"},[e("table",{class:"table table-striped",id:"data_rst"},[e("thead",null,[e("tr",null,[e("th",null,"NIP"),e("th",null,"Nama"),e("th",null,"Email"),e("th",null,"No. HP"),e("th",null,"Tgl Lahir"),e("th",null,"Waktu Daftar")])])])],-1),D=[j],R=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function S(t,a,s,o,i,d){const r=w("action-bar");return x(),p(v,null,[f(r,{data:i.menu,"menu-label":i.menu.menu_label},null,8,["data","menu-label"]),e("section",k,[e("div",T,[e("div",C,[e("div",P,[e("div",M,[e("div",E,[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:a[0]||(a[0]=_((...c)=>d.submit&&d.submit(...c),["prevent"]))},[N,g(" Approve")])])]),e("div",B,[e("ul",F,[e("li",U,[e("a",{class:n(["nav-link",i.form.upload?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",A,[e("a",{class:n(["nav-link",i.form.upload?"active":"disabled"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",L,[e("div",{class:n(["tab-pane fade",i.form.upload?"":"show active"]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},D,2),e("div",{class:n(["tab-pane fade",i.form.upload?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},null,2)])])])])])]),R],64)}const z=b(y,[["render",S]]);export{z as default};
//# sourceMappingURL=ApprUsers-C-MVJ0MV.js.map
