import{F as f,a as p,E as _}from"./vee-validate.esm-Nlz2O7Po.js";/* empty css                    */import{_ as g,c as m,d as w,a as e,F as u,e as d,g as v,n as c,r as x,o as h,D as y}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";let o;const k={components:{VeeForm:f,Field:p,ErrorMessage:_},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{field:{file:""},upload:!1}}},mounted(){this.__MENU(),this.$root.web_access_log();let t=this;o=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/master/member-mst",columns:[{data:"nik"},{data:"photo",render:function(a,s,n){return'<img src="'+a+'" class="thumbnail" data-large="'+a+'" alt="Image" style="width: 50px; cursor: pointer;" />'}},{data:"name"},{data:"email"},{data:"phone"},{data:"birthday",class:"text-center"},{data:"email_verified_at",render:function(a,s,n){return a!=""&&a!=null?'<span class="badge bg-success">Verifikasi</span>':'<span class="badge bg-danger">Belum Verifikasi</span>'}},{data:"created_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){t.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(o.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),o.rows(".selected").data().length>0&&t.selected.push(o.rows(".selected").data()[0]))}),window.$("#data_rst tbody").on("click",".thumbnail",function(){var a=$(this).data("large");$("#modalImage").attr("src",a),new bootstrap.Modal(document.getElementById("imageModal")).show()})},methods:{__MENU(){let t=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(a=>{t.hide(),this.menu.menu_label=a.data.menu_label,this.menu.menu_desc=a.data.menu_desc,this.menu.permission=a.data.permission}).catch(a=>{t.hide(),console.error(a)})},upload(){this.form.upload=!0,this.form.field.file=""},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(t=>{if(t.value){let a=this.$loading.show();window.axios.delete("/master/member-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(s=>{a.hide(),this.selected=[],o.ajax.reload(),this.$swal({toast:!0,icon:"success",html:s.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){if(this.form.upload){let t=this.$loading.show(),a=new FormData;a.append("file",this.form.field.file),window.axios.post("/master/member-mst?menufn="+this.$route.name,a,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{t.hide(),o.ajax.reload(),this.submit_count=0,this.cancel(),this.$swal({toast:!0,position:"top",icon:s.status===201?"success":"info",html:s.data})}).catch(s=>{t.hide(),this.submit_count=0,console.error(s)})}this.cancel()},cancel(){this.form.upload=!1,this.form.field.file="",this.$refs.file_upl.value="",o.ajax.reload(null,!1)},DownloadTpl(){let t=this.$loading.show();window.axios({url:"/master/member-mst?menufn="+this.$route.name+"&download=tpl",method:"POST",responseType:"blob"}).then(a=>{t.hide();const s=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=s,n.setAttribute("download","Template Upload Member.xlsx"),document.body.appendChild(n),n.click()}).catch(a=>{console.error(a),t.hide()})},async onChangeFileUpload(t){this.form.field.file=this.$refs.file_upl.files[0]}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},beforeRouteLeave(t,a,s){o&&(o.destroy(),o=null),s()}},C={class:"section"},T={class:"row"},M={class:"col-md-12"},F={class:"card"},U={class:"card-header"},B={class:"buttons"},P=e("i",{class:"bi bi-file-arrow-up-fill"},null,-1),E=e("i",{class:"bi bi-file-arrow-down-fill"},null,-1),N=e("i",{class:"bi bi-x-square-fill"},null,-1),D=e("i",{class:"bi bi-check-square-fill"},null,-1),I=e("i",{class:"bi bi-x-square-fill"},null,-1),L={class:"card-body"},S={class:"nav nav-tabs",id:"myTab",role:"tablist"},j={class:"nav-item",role:"presentation"},V={class:"nav-item",role:"presentation"},A={class:"tab-content",id:"myTabContent"},R=y('<div class="table-responsive"><table class="table table-striped" id="data_rst"><thead><tr><th>NIK</th><th>Foto</th><th>Nama</th><th>Email</th><th>No. HP</th><th>Tgl Lahir</th><th>Status</th><th>Waktu Daftar</th></tr></thead></table></div>',1),q=[R],O={class:"form form-vertical"},H={class:"form-body"},z={class:"row"},K=e("p",{class:"col-12"},null,-1),W={class:"col-12"},X=e("label",{for:"upl",class:"col-sm-4 col-form-label-sm"},[d("Upload File "),e("span",{class:"text-danger"},"*")],-1),G={class:"col-sm-8"},J=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function Q(t,a,s,n,r,l){const b=x("action-bar");return h(),m(u,null,[w(b,{data:r.menu,"menu-label":r.menu.menu_label},null,8,["data","menu-label"]),e("section",C,[e("div",T,[e("div",M,[e("div",F,[e("div",U,[e("div",B,[r.form.upload?(h(),m(u,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:a[3]||(a[3]=v((...i)=>l.submit&&l.submit(...i),["prevent"]))},[D,d(" Submit")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:a[4]||(a[4]=(...i)=>l.cancel&&l.cancel(...i))},[I,d(" Batal")])],64)):(h(),m(u,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:a[0]||(a[0]=(...i)=>l.upload&&l.upload(...i))},[P,d(" Unggah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:a[1]||(a[1]=(...i)=>l.DownloadTpl&&l.DownloadTpl(...i))},[E,d(" Unduh Template")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:a[2]||(a[2]=(...i)=>l.destroy&&l.destroy(...i))},[N,d(" Hapus")])],64))])]),e("div",L,[e("ul",S,[e("li",j,[e("a",{class:c(["nav-link",r.form.upload?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",V,[e("a",{class:c(["nav-link",r.form.upload?"active":"disabled"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",A,[e("div",{class:c(["tab-pane fade",r.form.upload?"":"show active"]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},q,2),e("div",{class:c(["tab-pane fade",r.form.upload?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[e("form",O,[e("div",H,[e("div",z,[K,e("div",W,[X,e("div",G,[e("input",{type:"file",ref:"file_upl",onChange:a[5]||(a[5]=(...i)=>l.onChangeFileUpload&&l.onChangeFileUpload(...i)),accept:".xls,.xlsx"},null,544)])])])])])],2)])])])])])]),J],64)}const te=g(k,[["render",Q]]);export{te as default};
//# sourceMappingURL=MasterMembers-Iqpu28Iy.js.map
