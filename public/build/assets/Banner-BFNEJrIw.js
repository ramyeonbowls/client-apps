import{F as k,a as C,E as F}from"./vee-validate.esm-Nlz2O7Po.js";import{_ as M,c as f,d as r,a as e,F as g,e as l,g as w,n as p,w as v,r as _,o as h,D as T}from"./sweetalert2.min-C72B2ZMm.js";import{v as E}from"./v4-DvF23Exx.js";import"./_commonjsHelpers-DSXiPLDm.js";let m;const I={components:{VeeForm:k,Field:C,ErrorMessage:F},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{submitted:!1,new:!1,edit:!1,field:{id:"",desc:"",type:"",file:"",current_file:""}}}},mounted(){this.__MENU(),this.$root.web_access_log();let o=this;m=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/setting/banner-mst",columns:[{data:"id"},{data:"description"},{data:"file",render:function(t,n,a){return'<img src="/storage/images/banner/'+t+'" class="thumbnail" data-large="/storage/images/banner/'+t+'" alt="Image" style="width: 50px; cursor: pointer;" />'}},{data:"disp_type"},{data:"created_by"},{data:"created_at",class:"text-center"},{data:"updated_by"},{data:"updated_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){o.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(m.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),m.rows(".selected").data().length>0&&o.selected.push(m.rows(".selected").data()[0]))}),window.$("#data_rst tbody").on("click",".thumbnail",function(){var t=$(this).data("large");$("#modalImage").attr("src",t),new bootstrap.Modal(document.getElementById("imageModal")).show()})},methods:{__MENU(){let o=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(t=>{o.hide(),this.menu.menu_label=t.data.menu_label,this.menu.menu_desc=t.data.menu_desc,this.menu.permission=t.data.permission}).catch(t=>{o.hide(),console.error(t)})},clearForm(){this.form.field.id="",this.form.field.desc="",this.form.field.type="",this.form.field.file="",this.form.field.current_file="",this.$refs.banner_files.value=""},async onChangeIcon(o){this.form.field.file=this.$refs.banner_files.files[0]},create(){this.form.new=!0,this.form.edit=!1,this.clearForm(),this.form.field.id=E()},edit(){this.selected.length>0?(this.form.new=!1,this.form.edit=!0,this.submitted=!1,this.form.field.id=this.selected[0].id,this.form.field.desc=this.selected[0].description,this.form.field.type=this.selected[0].disp_type,this.form.field.file="",this.form.field.current_file=this.selected[0].file):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(o=>{if(o.value){let t=this.$loading.show();window.axios.delete("/setting/banner-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(n=>{t.hide(),this.selected=[],m.ajax.reload(),this.$swal({toast:!0,icon:"success",html:n.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){this.form.submitted||(this.form.submitted=!0,this.$refs.form.validate().then(o=>{if(o.valid){this.form.submitted=!1;let t=this.$loading.show();if(this.form.new){let n=new FormData;Object.keys(this.form.field).forEach(a=>{n.append(a,this.form.field[a])}),window.axios.post("/setting/banner-mst?menu_fn="+this.$route.name,n).then(a=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:a.status===201?"success":"info",html:a.data})}).catch(a=>{t.hide(),this.form.submitted=!1,a.response.status===422&&this.$refs.form.setErrors(a.response.data.errors)})}else{let n=new FormData;n.append("_method","PUT"),Object.keys(this.form.field).forEach(a=>{n.append(a,this.form.field[a])}),window.axios.post("/setting/banner-mst/"+this.form.field.id+"?menu_fn="+this.$route.name,n).then(a=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:a.status===201?"success":"info",html:a.data})}).catch(a=>{t.hide(),this.form.submitted=!1,a.response.status===422&&this.$refs.form.setErrors(a.response.data.errors)})}}else this.form.submitted=!1}))},cancel(){this.form.new=!1,this.form.edit=!1,this.form.submitted=!1,this.selected=[],this.clearForm(),this.$refs.form.resetForm(),m.ajax.reload(null,!1)}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},beforeRouteLeave(o,t,n){m&&(m.destroy(),m=null),n()}},V={class:"section"},j={class:"row"},B={class:"col-md-12"},P={class:"card"},D={class:"card-header"},N={class:"buttons"},S=e("i",{class:"bi bi-folder-fill"},null,-1),U=e("i",{class:"bi bi-pen-fill"},null,-1),z=e("i",{class:"bi bi-trash-fill"},null,-1),A=e("i",{class:"bi bi-cloud-arrow-up-fill"},null,-1),L=e("i",{class:"bi bi-arrow-left-square-fill"},null,-1),O={class:"card-body"},R={class:"nav nav-tabs",id:"myTab",role:"tablist"},q={class:"nav-item",role:"presentation"},K={class:"nav-item",role:"presentation"},H={class:"tab-content",id:"myTabContent"},J=T('<div class="table-responsive"><table class="table table-striped" id="data_rst"><thead><tr><th>ID</th><th>Keterangan</th><th>File</th><th>Display</th><th>dibuat oleh</th><th>dibuat pada</th><th>diperbarui oleh</th><th>diperbarui pada</th></tr></thead></table></div>',1),W=[J],X={id:"basic-horizontal-layouts"},G={class:"row match-height"},Q={class:"col-md-8 col-12"},Y={class:"card"},Z={class:"card-content"},ee={class:"card-body"},te=["onSubmit"],se={class:"form-body"},ae={class:"row"},ie=e("div",{class:"col-md-4"},[e("label",{for:"id"},[l("ID "),e("span",{class:"text-danger"},"*")])],-1),le={class:"col-md-8 form-group"},oe=e("div",{class:"col-md-4"},[e("label",{for:"desc"},[l("Keterangan "),e("span",{class:"text-danger"},"*")])],-1),ne={class:"col-md-8 form-group"},de=e("div",{class:"col-md-4"},[e("label",{for:"type"},[l("Jenis file "),e("span",{class:"text-danger"},"*")])],-1),re={class:"col-md-8 form-group"},ce=e("option",{value:""},"--",-1),me=e("option",{value:"web"},"Web",-1),fe=e("option",{value:"mobile"},"Mobile",-1),he=e("div",{class:"col-md-4"},[e("label",{for:"file"},[l("File "),e("span",{class:"text-danger"},"*")])],-1),ue={class:"col-md-8 form-group"},be=e("br",null,null,-1),pe={key:0,class:"text-muted"},_e=e("br",null,null,-1),ge={key:1,class:"text-muted"},ve=e("br",null,null,-1),we=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function ye(o,t,n,a,s,i){const y=_("action-bar"),u=_("Field"),b=_("ErrorMessage"),x=_("VeeForm");return h(),f(g,null,[r(y,{data:s.menu,"menu-label":s.menu.menu_label},null,8,["data","menu-label"]),e("section",V,[e("div",j,[e("div",B,[e("div",P,[e("div",D,[e("div",N,[!s.form.new&&!s.form.edit?(h(),f(g,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:t[0]||(t[0]=(...d)=>i.create&&i.create(...d))},[S,l(" Tambah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[1]||(t[1]=(...d)=>i.edit&&i.edit(...d))},[U,l(" Sunting")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[2]||(t[2]=(...d)=>i.destroy&&i.destroy(...d))},[z,l(" Hapus")])],64)):(h(),f(g,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[3]||(t[3]=w((...d)=>i.submit&&i.submit(...d),["prevent"]))},[A,l(" Simpan")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[4]||(t[4]=(...d)=>i.cancel&&i.cancel(...d))},[L,l(" Batal")])],64))])]),e("div",O,[e("ul",R,[e("li",q,[e("a",{class:p(["nav-link",s.form.new||s.form.edit?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",K,[e("a",{class:p(["nav-link",!s.form.new&&!s.form.edit?"disabled":"active"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",H,[e("div",{class:p(["tab-pane fade",!s.form.new&&!s.form.edit?"show active":""]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},W,2),e("div",{class:p(["tab-pane fade",s.form.new||s.form.edit?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[e("section",X,[e("div",G,[e("div",Q,[e("div",Y,[e("div",Z,[e("div",ee,[r(x,{ref:"form",as:"div"},{default:v(({handleSubmit:d})=>[e("form",{class:"form form-horizontal",onSubmit:w(c=>d(c,i.submit),["prevent"])},[e("div",se,[e("div",ae,[ie,e("div",le,[r(u,{type:"text",disabled:!0,id:"id",modelValue:s.form.field.id,"onUpdate:modelValue":t[5]||(t[5]=c=>s.form.field.id=c),class:"form-control",name:"id"},null,8,["modelValue"]),r(b,{name:"id",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),oe,e("div",ne,[r(u,{type:"text",id:"desc",modelValue:s.form.field.desc,"onUpdate:modelValue":t[6]||(t[6]=c=>s.form.field.desc=c),class:"form-control",name:"desc"},null,8,["modelValue"]),r(b,{name:"desc",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),de,e("div",re,[r(u,{as:"select",id:"type",modelValue:s.form.field.type,"onUpdate:modelValue":t[7]||(t[7]=c=>s.form.field.type=c),class:"form-control",name:"type"},{default:v(()=>[ce,me,fe]),_:1},8,["modelValue"]),r(b,{name:"type",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),he,e("div",ue,[r(u,{name:"file"},{default:v(()=>[e("input",{type:"file",ref:"banner_files",id:"file",name:"file",onChange:t[8]||(t[8]=(...c)=>i.onChangeIcon&&i.onChangeIcon(...c)),accept:".png,.jpg,.jpeg"},null,544)]),_:1}),r(b,{name:"file",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}}),be,s.form.field.type=="web"||s.form.field.type==""?(h(),f("small",pe,[l("Max. size: 1500 kb (1300x500 pixels)"),_e,l("File types: png, jpg, jpeg")])):(h(),f("small",ge,[l("Max. size: 1500 kb (400x250 pixels)"),ve,l("File types: png, jpg, jpeg")]))])])])],40,te)]),_:1},512)])])])])])])],2)])])])])])]),we],64)}const Me=M(I,[["render",ye]]);export{Me as default};
//# sourceMappingURL=Banner-BFNEJrIw.js.map
