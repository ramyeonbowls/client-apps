import{F,a as T,E as V}from"./vee-validate.esm-Nlz2O7Po.js";import{_ as E,c as b,d as c,a as e,F as _,e as m,g as w,n as h,w as M,r as u,o as p,s as v,v as k,t as y,C as B}from"./sweetalert2.min-C72B2ZMm.js";import{v as D}from"./v4-DvF23Exx.js";import"./_commonjsHelpers-DSXiPLDm.js";let r;const P={components:{VeeForm:F,Field:T,ErrorMessage:V},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{submitted:!1,new:!1,edit:!1,field:{id:"",title:"",description:"",flag_aktif:!0,file:""}},maxLength:500}},mounted(){this.__MENU(),this.$root.web_access_log();let a=this;r=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/setting/video-mst",columns:[{data:"title"},{data:"flag_aktif"},{data:"created_by"},{data:"created_at",class:"text-center"},{data:"update_by"},{data:"updated_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){a.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(r.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),r.rows(".selected").data().length>0&&a.selected.push(r.rows(".selected").data()[0]))})},methods:{__MENU(){let a=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(t=>{a.hide(),this.menu.menu_label=t.data.menu_label,this.menu.menu_desc=t.data.menu_desc,this.menu.permission=t.data.permission}).catch(t=>{a.hide(),console.error(t)})},clearForm(){this.form.field.id="",this.form.field.title="",this.form.field.description="",this.form.field.flag_aktif="",this.form.field.file=""},create(){this.form.new=!0,this.form.edit=!1,this.clearForm(),this.form.field.id=D()},edit(){if(this.selected.length>0){this.form.new=!1,this.form.edit=!0,this.submitted=!1;let a=this.decodeHtml(this.selected[0].file);this.form.field.id=this.selected[0].id,this.form.field.title=this.selected[0].title,this.form.field.description=this.selected[0].description,this.form.field.flag_aktif=this.selected[0].flag_aktif=="Y",this.form.field.file=a}else this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},decodeHtml(a){const t=document.createElement("textarea");t.innerHTML=a;const l=t.value;return t.remove(),l},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(a=>{if(a.value){let t=this.$loading.show();window.axios.delete("/setting/video-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(l=>{t.hide(),this.selected=[],r.ajax.reload(),this.$swal({toast:!0,icon:"success",html:l.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){this.form.submitted||(this.form.submitted=!0,this.$refs.form.validate().then(a=>{if(a.valid){this.form.submitted=!1;let t=this.$loading.show();if(this.form.new){let l=new FormData;Object.keys(this.form.field).forEach(i=>{l.append(i,this.form.field[i])}),window.axios.post("/setting/video-mst?menu_fn="+this.$route.name,l).then(i=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:i.status===201?"success":"info",html:i.data})}).catch(i=>{t.hide(),this.form.submitted=!1,i.response.status===422&&this.$refs.form.setErrors(i.response.data.errors)})}else{let l=new FormData;l.append("_method","PUT"),Object.keys(this.form.field).forEach(i=>{l.append(i,this.form.field[i])}),window.axios.post("/setting/video-mst/"+this.form.field.id+"?menu_fn="+this.$route.name,l).then(i=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:i.status===201?"success":"info",html:i.data})}).catch(i=>{t.hide(),this.form.submitted=!1,i.response.status===422&&this.$refs.form.setErrors(i.response.data.errors)})}}else this.form.submitted=!1}))},cancel(){this.form.new=!1,this.form.edit=!1,this.form.submitted=!1,this.selected=[],this.clearForm(),this.$refs.form.resetForm(),r.ajax.reload(null,!1)}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve},remainingCharacters(){return this.maxLength-this.form.field.description.length}},beforeRouteLeave(a,t,l){r&&(r.destroy(),r=null),l()}},U={class:"section"},S={class:"row"},j={class:"col-md-12"},A={class:"card"},N={class:"card-header"},I={class:"buttons"},L=e("i",{class:"bi bi-folder-fill"},null,-1),H=e("i",{class:"bi bi-pen-fill"},null,-1),z=e("i",{class:"bi bi-trash-fill"},null,-1),O=e("i",{class:"bi bi-cloud-arrow-up-fill"},null,-1),R=e("i",{class:"bi bi-arrow-left-square-fill"},null,-1),q={class:"card-body"},J={class:"nav nav-tabs",id:"myTab",role:"tablist"},K={class:"nav-item",role:"presentation"},X={class:"nav-item",role:"presentation"},Y={class:"tab-content",id:"myTabContent"},G=e("div",{class:"table-responsive"},[e("table",{class:"table table-striped",id:"data_rst"},[e("thead",null,[e("tr",null,[e("th",null,"Judul"),e("th",null,"Aktif"),e("th",null,"dibuat oleh"),e("th",null,"dibuat pada"),e("th",null,"diperbarui oleh"),e("th",null,"diperbarui pada")])])])],-1),Q=[G],W={id:"basic-horizontal-layouts"},Z={class:"row match-height"},ee={class:"col-12"},te={class:"card"},se={class:"card-content"},ie={class:"card-body"},ae=["onSubmit"],le={class:"form-body"},oe={class:"row"},ne=e("div",{class:"col-md-2"},[e("label",{for:"id"},[m("ID "),e("span",{class:"text-danger"},"*")])],-1),de={class:"col-md-10 form-group"},re=e("div",{class:"col-md-2"},[e("label",{for:"desc"},[m("Judul "),e("span",{class:"text-danger"},"*")])],-1),ce={class:"col-md-10 form-group"},me=e("div",{class:"col-md-2"},[e("label",{for:"desc"},[m("Deskripsi "),e("span",{class:"text-danger"},"*")])],-1),fe={class:"col-md-10 form-group"},he=e("br",null,null,-1),ue={class:"text-muted"},be=e("div",{class:"col-md-2"},[e("label",{for:"desc"},"Embed Video")],-1),_e={class:"col-md-10 form-group"},pe=e("div",{class:"col-md-2"},[e("label",{for:"type"},"Flag Aktif")],-1),ve={class:"col-md-10 form-group"},ge={class:"form-check"},we={class:"checkbox"},ke=e("label",{for:"flag_aktif"},"Aktif",-1);function ye(a,t,l,i,s,o){const x=u("action-bar"),g=u("Field"),f=u("ErrorMessage"),C=u("VeeForm");return p(),b(_,null,[c(x,{data:s.menu,"menu-label":s.menu.menu_label},null,8,["data","menu-label"]),e("section",U,[e("div",S,[e("div",j,[e("div",A,[e("div",N,[e("div",I,[!s.form.new&&!s.form.edit?(p(),b(_,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:t[0]||(t[0]=(...n)=>o.create&&o.create(...n))},[L,m(" Tambah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[1]||(t[1]=(...n)=>o.edit&&o.edit(...n))},[H,m(" Sunting")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[2]||(t[2]=(...n)=>o.destroy&&o.destroy(...n))},[z,m(" Hapus")])],64)):(p(),b(_,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[3]||(t[3]=w((...n)=>o.submit&&o.submit(...n),["prevent"]))},[O,m(" Simpan")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[4]||(t[4]=(...n)=>o.cancel&&o.cancel(...n))},[R,m(" Batal")])],64))])]),e("div",q,[e("ul",J,[e("li",K,[e("a",{class:h(["nav-link",s.form.new||s.form.edit?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",X,[e("a",{class:h(["nav-link",!s.form.new&&!s.form.edit?"disabled":"active"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",Y,[e("div",{class:h(["tab-pane fade",!s.form.new&&!s.form.edit?"show active":""]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},Q,2),e("div",{class:h(["tab-pane fade",s.form.new||s.form.edit?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[e("section",W,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",ie,[c(C,{ref:"form",as:"div"},{default:M(({handleSubmit:n})=>[e("form",{class:"form form-horizontal",onSubmit:w(d=>n(d,o.submit),["prevent"])},[e("div",le,[e("div",oe,[ne,e("div",de,[c(g,{type:"text",disabled:!0,id:"id",modelValue:s.form.field.id,"onUpdate:modelValue":t[5]||(t[5]=d=>s.form.field.id=d),class:"form-control",name:"id"},null,8,["modelValue"]),c(f,{name:"id",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),re,e("div",ce,[c(g,{type:"text",id:"title",modelValue:s.form.field.title,"onUpdate:modelValue":t[6]||(t[6]=d=>s.form.field.title=d),class:"form-control",name:"title"},null,8,["modelValue"]),c(f,{name:"judul",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),me,e("div",fe,[v(e("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[7]||(t[7]=d=>s.form.field.description=d),name:"description",rows:"3",maxlength:"500"},null,512),[[k,s.form.field.description]]),he,e("small",ue,y(o.remainingCharacters)+"/"+y(s.maxLength),1),c(f,{name:"description",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),be,e("div",_e,[v(e("textarea",{class:"form-control",id:"file","onUpdate:modelValue":t[8]||(t[8]=d=>s.form.field.file=d),name:"file",rows:"3"},null,512),[[k,s.form.field.file]]),c(f,{name:"file",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),pe,e("div",ve,[e("div",ge,[e("div",we,[v(e("input",{type:"checkbox",id:"flag_aktif",class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=d=>s.form.field.flag_aktif=d)},null,512),[[B,s.form.field.flag_aktif]]),ke])])])])])],40,ae)]),_:1},512)])])])])])])],2)])])])])])])],64)}const Ve=E(P,[["render",ye]]);export{Ve as default};
//# sourceMappingURL=Video-pDNwGUb1.js.map
