import{F,a as M,E as T}from"./vee-validate.esm-Nlz2O7Po.js";import{_ as E,c as _,d as c,a as e,F as p,e as n,g as v,n as h,w,r as u,o as g,s as y,v as I,t as k,C as V,D as P}from"./sweetalert2.min-C72B2ZMm.js";import{v as j}from"./v4-DvF23Exx.js";import"./_commonjsHelpers-DSXiPLDm.js";let m;const B={components:{VeeForm:F,Field:M,ErrorMessage:T},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{submitted:!1,new:!1,edit:!1,field:{id:"",title:"",description:"",flag_aktif:!0,author:"",file:"",current_file:""}},maxLength:200}},mounted(){this.__MENU(),this.$root.web_access_log();let l=this;m=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/setting/frasa-mst",columns:[{data:"id"},{data:"author"},{data:"flag_aktif"},{data:"file",render:function(t,o,a){return'<img src="/storage/images/news/'+t+'" class="thumbnail" data-large="/storage/images/news/'+t+'" alt="Image" style="width: 50px; cursor: pointer;" />'}},{data:"created_by"},{data:"created_at",class:"text-center"},{data:"update_by"},{data:"updated_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){l.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(m.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),m.rows(".selected").data().length>0&&l.selected.push(m.rows(".selected").data()[0]))}),window.$("#data_rst tbody").on("click",".thumbnail",function(){var t=$(this).data("large");$("#modalImage").attr("src",t),new bootstrap.Modal(document.getElementById("imageModal")).show()})},methods:{__MENU(){let l=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(t=>{l.hide(),this.menu.menu_label=t.data.menu_label,this.menu.menu_desc=t.data.menu_desc,this.menu.permission=t.data.permission}).catch(t=>{l.hide(),console.error(t)})},clearForm(){this.form.field.id="",this.form.field.title="",this.form.field.description="",this.form.field.flag_aktif="",this.form.field.author="",this.form.field.file="",this.form.field.current_file="",this.$refs.frasa_files.value=""},async onChangeIcon(l){this.form.field.file=this.$refs.frasa_files.files[0]},create(){this.form.new=!0,this.form.edit=!1,this.clearForm(),this.form.field.id=j()},edit(){this.selected.length>0?(this.form.new=!1,this.form.edit=!0,this.submitted=!1,this.form.field.id=this.selected[0].id,this.form.field.title=this.selected[0].title,this.form.field.description=this.selected[0].description,this.form.field.flag_aktif=this.selected[0].flag_aktif=="Y",this.form.field.author=this.selected[0].author,this.form.field.file="",this.form.field.current_file=this.selected[0].file):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(l=>{if(l.value){let t=this.$loading.show();window.axios.delete("/setting/frasa-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(o=>{t.hide(),this.selected=[],m.ajax.reload(),this.$swal({toast:!0,icon:"success",html:o.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){this.form.submitted||(this.form.submitted=!0,this.$refs.form.validate().then(l=>{if(l.valid){this.form.submitted=!1;let t=this.$loading.show();if(this.form.new){let o=new FormData;Object.keys(this.form.field).forEach(a=>{o.append(a,this.form.field[a])}),window.axios.post("/setting/frasa-mst?menu_fn="+this.$route.name,o).then(a=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:a.status===201?"success":"info",html:a.data})}).catch(a=>{t.hide(),this.form.submitted=!1,a.response.status===422&&this.$refs.form.setErrors(a.response.data.errors)})}else{let o=new FormData;o.append("_method","PUT"),Object.keys(this.form.field).forEach(a=>{o.append(a,this.form.field[a])}),window.axios.post("/setting/frasa-mst/"+this.form.field.id+"?menu_fn="+this.$route.name,o).then(a=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:a.status===201?"success":"info",html:a.data})}).catch(a=>{t.hide(),this.form.submitted=!1,a.response.status===422&&this.$refs.form.setErrors(a.response.data.errors)})}}else this.form.submitted=!1}))},cancel(){this.form.new=!1,this.form.edit=!1,this.form.submitted=!1,this.selected=[],this.clearForm(),this.$refs.form.resetForm(),m.ajax.reload(null,!1)}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve},remainingCharacters(){return this.maxLength-this.form.field.description.length}},beforeRouteLeave(l,t,o){m&&(m.destroy(),m=null),o()}},D={class:"section"},S={class:"row"},U={class:"col-md-12"},N={class:"card"},A={class:"card-header"},L={class:"buttons"},z=e("i",{class:"bi bi-folder-fill"},null,-1),O=e("i",{class:"bi bi-pen-fill"},null,-1),R=e("i",{class:"bi bi-trash-fill"},null,-1),q=e("i",{class:"bi bi-cloud-arrow-up-fill"},null,-1),H=e("i",{class:"bi bi-arrow-left-square-fill"},null,-1),K={class:"card-body"},X={class:"nav nav-tabs",id:"myTab",role:"tablist"},Y={class:"nav-item",role:"presentation"},G={class:"nav-item",role:"presentation"},J={class:"tab-content",id:"myTabContent"},Q=P('<div class="table-responsive"><table class="table table-striped" id="data_rst"><thead><tr><th>ID</th><th>Penulis</th><th>Aktif</th><th>File</th><th>dibuat oleh</th><th>dibuat pada</th><th>diperbarui oleh</th><th>diperbarui pada</th></tr></thead></table></div>',1),W=[Q],Z={id:"basic-horizontal-layouts"},ee={class:"row match-height"},te={class:"col-12"},se={class:"card"},ae={class:"card-content"},ie={class:"card-body"},le=["onSubmit"],oe={class:"form-body"},de={class:"row"},re=e("div",{class:"col-md-2"},[e("label",{for:"id"},[n("ID "),e("span",{class:"text-danger"},"*")])],-1),ne={class:"col-md-10 form-group"},ce=e("div",{class:"col-md-2"},[e("label",{for:"desc"},[n("Konten "),e("span",{class:"text-danger"},"*")])],-1),me={class:"col-md-10 form-group"},fe=e("br",null,null,-1),he={class:"text-muted"},ue=e("div",{class:"col-md-2"},[e("label",{for:"desc"},"Penulis")],-1),be={class:"col-md-10 form-group"},_e=e("div",{class:"col-md-2"},[e("label",{for:"type"},"Flag Aktif")],-1),pe={class:"col-md-10 form-group"},ge={class:"form-check"},ve={class:"checkbox"},we=e("label",{for:"flag_aktif"},"Aktif",-1),ye=e("div",{class:"col-md-2"},[e("label",{for:"file"},[n("File "),e("span",{class:"text-danger"},"*")])],-1),ke={class:"col-md-10 form-group"},xe=e("br",null,null,-1),Ce=e("small",{class:"text-muted"},[n("Max. size: 1500 kb (300x300 pixels)"),e("br"),n("File types: png, jpg, jpeg")],-1),Fe=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function Me(l,t,o,a,s,i){const x=u("action-bar"),b=u("Field"),f=u("ErrorMessage"),C=u("VeeForm");return g(),_(p,null,[c(x,{data:s.menu,"menu-label":s.menu.menu_label},null,8,["data","menu-label"]),e("section",D,[e("div",S,[e("div",U,[e("div",N,[e("div",A,[e("div",L,[!s.form.new&&!s.form.edit?(g(),_(p,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:t[0]||(t[0]=(...d)=>i.create&&i.create(...d))},[z,n(" Tambah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[1]||(t[1]=(...d)=>i.edit&&i.edit(...d))},[O,n(" Sunting")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[2]||(t[2]=(...d)=>i.destroy&&i.destroy(...d))},[R,n(" Hapus")])],64)):(g(),_(p,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[3]||(t[3]=v((...d)=>i.submit&&i.submit(...d),["prevent"]))},[q,n(" Simpan")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[4]||(t[4]=(...d)=>i.cancel&&i.cancel(...d))},[H,n(" Batal")])],64))])]),e("div",K,[e("ul",X,[e("li",Y,[e("a",{class:h(["nav-link",s.form.new||s.form.edit?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",G,[e("a",{class:h(["nav-link",!s.form.new&&!s.form.edit?"disabled":"active"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",J,[e("div",{class:h(["tab-pane fade",!s.form.new&&!s.form.edit?"show active":""]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},W,2),e("div",{class:h(["tab-pane fade",s.form.new||s.form.edit?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[e("section",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[e("div",ie,[c(C,{ref:"form",as:"div"},{default:w(({handleSubmit:d})=>[e("form",{class:"form form-horizontal",onSubmit:v(r=>d(r,i.submit),["prevent"])},[e("div",oe,[e("div",de,[re,e("div",ne,[c(b,{type:"text",disabled:!0,id:"id",modelValue:s.form.field.id,"onUpdate:modelValue":t[5]||(t[5]=r=>s.form.field.id=r),class:"form-control",name:"id"},null,8,["modelValue"]),c(f,{name:"id",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),ce,e("div",me,[y(e("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[6]||(t[6]=r=>s.form.field.description=r),name:"description",rows:"3",maxlength:"200"},null,512),[[I,s.form.field.description]]),fe,e("small",he,k(i.remainingCharacters)+"/"+k(s.maxLength),1),c(f,{name:"description",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),ue,e("div",be,[c(b,{type:"text",id:"author",modelValue:s.form.field.author,"onUpdate:modelValue":t[7]||(t[7]=r=>s.form.field.author=r),class:"form-control",name:"author"},null,8,["modelValue"]),c(f,{name:"penulis",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),_e,e("div",pe,[e("div",ge,[e("div",ve,[y(e("input",{type:"checkbox",id:"flag_aktif",class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=r=>s.form.field.flag_aktif=r)},null,512),[[V,s.form.field.flag_aktif]]),we])])]),ye,e("div",ke,[c(b,{name:"file"},{default:w(()=>[e("input",{type:"file",ref:"frasa_files",id:"file",name:"file",onChange:t[9]||(t[9]=(...r)=>i.onChangeIcon&&i.onChangeIcon(...r)),accept:".png,.jpg,.jpeg"},null,544)]),_:1}),c(f,{name:"file",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}}),xe,Ce])])])],40,le)]),_:1},512)])])])])])])],2)])])])])])]),Fe],64)}const Pe=E(B,[["render",Me]]);export{Pe as default};
//# sourceMappingURL=Frasa-B_98HPBa.js.map
