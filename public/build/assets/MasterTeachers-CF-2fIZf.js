import{F as f,a as p,E as _}from"./vee-validate.esm-Nlz2O7Po.js";/* empty css                    */import{_ as g,c as m,d as w,a as e,F as u,e as d,g as v,n as c,r as x,o as h}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";let o;const y={components:{VeeForm:f,Field:p,ErrorMessage:_},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{field:{file:""},upload:!1}}},mounted(){this.__MENU(),this.$root.web_access_log();let t=this;o=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/master/teacher-mst",columns:[{data:"nik"},{data:"name"},{data:"email"},{data:"phone"},{data:"birthday",class:"text-center"},{data:"created_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){t.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(o.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),o.rows(".selected").data().length>0&&t.selected.push(o.rows(".selected").data()[0]))}),window.$("#data_rst tbody").on("click",".thumbnail",function(){var a=$(this).data("large");$("#modalImage").attr("src",a),new bootstrap.Modal(document.getElementById("imageModal")).show()})},methods:{__MENU(){let t=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(a=>{t.hide(),this.menu.menu_label=a.data.menu_label,this.menu.menu_desc=a.data.menu_desc,this.menu.permission=a.data.permission}).catch(a=>{t.hide(),console.error(a)})},upload(){this.form.upload=!0,this.form.field.file=""},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(t=>{if(t.value){let a=this.$loading.show();window.axios.delete("/master/teacher-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(l=>{a.hide(),this.selected=[],o.ajax.reload(),this.$swal({toast:!0,icon:"success",html:l.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){if(this.form.upload){let t=this.$loading.show(),a=new FormData;a.append("file",this.form.field.file),window.axios.post("/master/teacher-mst?menufn="+this.$route.name,a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{t.hide(),o.ajax.reload(),this.submit_count=0,this.cancel(),this.$swal({toast:!0,position:"top",icon:l.status===201?"success":"info",html:l.data})}).catch(l=>{t.hide(),this.submit_count=0,console.error(l)})}this.cancel()},cancel(){this.form.upload=!1,this.form.field.file="",this.$refs.file_upl.value="",o.ajax.reload(null,!1)},DownloadTpl(){let t=this.$loading.show();window.axios({url:"/master/teacher-mst?menufn="+this.$route.name+"&download=tpl",method:"POST",responseType:"blob"}).then(a=>{t.hide();const l=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=l,r.setAttribute("download","Template Upload Teacher.xlsx"),document.body.appendChild(r),r.click()}).catch(a=>{console.error(a),t.hide()})},async onChangeFileUpload(t){this.form.field.file=this.$refs.file_upl.files[0]}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},beforeRouteLeave(t,a,l){o&&(o.destroy(),o=null),l()}},k={class:"section"},T={class:"row"},C={class:"col-md-12"},M={class:"card"},P={class:"card-header"},U={class:"buttons"},F=e("i",{class:"bi bi-file-arrow-up-fill"},null,-1),B=e("i",{class:"bi bi-file-arrow-down-fill"},null,-1),E=e("i",{class:"bi bi-x-square-fill"},null,-1),N=e("i",{class:"bi bi-check-square-fill"},null,-1),D=e("i",{class:"bi bi-x-square-fill"},null,-1),L={class:"card-body"},j={class:"nav nav-tabs",id:"myTab",role:"tablist"},I={class:"nav-item",role:"presentation"},A={class:"nav-item",role:"presentation"},R={class:"tab-content",id:"myTabContent"},S=e("div",{class:"table-responsive"},[e("table",{class:"table table-striped",id:"data_rst"},[e("thead",null,[e("tr",null,[e("th",null,"NIP"),e("th",null,"Nama"),e("th",null,"Email"),e("th",null,"No. HP"),e("th",null,"Tgl Lahir"),e("th",null,"Waktu Daftar")])])])],-1),q=[S],O={class:"form form-vertical"},V={class:"form-body"},H={class:"row"},z=e("p",{class:"col-12"},null,-1),K={class:"col-12"},W=e("label",{for:"upl",class:"col-sm-4 col-form-label-sm"},[d("Upload File "),e("span",{class:"text-danger"},"*")],-1),X={class:"col-sm-8"},G=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function J(t,a,l,r,n,s){const b=x("action-bar");return h(),m(u,null,[w(b,{data:n.menu,"menu-label":n.menu.menu_label},null,8,["data","menu-label"]),e("section",k,[e("div",T,[e("div",C,[e("div",M,[e("div",P,[e("div",U,[n.form.upload?(h(),m(u,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:a[3]||(a[3]=v((...i)=>s.submit&&s.submit(...i),["prevent"]))},[N,d(" Submit")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:a[4]||(a[4]=(...i)=>s.cancel&&s.cancel(...i))},[D,d(" Batal")])],64)):(h(),m(u,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:a[0]||(a[0]=(...i)=>s.upload&&s.upload(...i))},[F,d(" Unggah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:a[1]||(a[1]=(...i)=>s.DownloadTpl&&s.DownloadTpl(...i))},[B,d(" Unduh Template")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:a[2]||(a[2]=(...i)=>s.destroy&&s.destroy(...i))},[E,d(" Hapus")])],64))])]),e("div",L,[e("ul",j,[e("li",I,[e("a",{class:c(["nav-link",n.form.upload?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",A,[e("a",{class:c(["nav-link",n.form.upload?"active":"disabled"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",R,[e("div",{class:c(["tab-pane fade",n.form.upload?"":"show active"]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},q,2),e("div",{class:c(["tab-pane fade",n.form.upload?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[e("form",O,[e("div",V,[e("div",H,[z,e("div",K,[W,e("div",X,[e("input",{type:"file",ref:"file_upl",onChange:a[5]||(a[5]=(...i)=>s.onChangeFileUpload&&s.onChangeFileUpload(...i)),accept:".xls,.xlsx"},null,544)])])])])])],2)])])])])])]),G],64)}const ae=g(y,[["render",J]]);export{ae as default};
//# sourceMappingURL=MasterTeachers-CF-2fIZf.js.map
