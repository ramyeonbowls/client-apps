import{_ as b,c as l,a as s,t as a,i as h,F as u,b as m,d as g,w as A,r as C,o as r,e as v,s as y,C as P,a4 as B,v as E,x as V,y as T}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";const S={props:{isAuthenticated:{type:Boolean,required:!0}},data(){return{header:[],question:[],finished:!1,nilai:0,form:{field:{id:"",answers:[]}},selectedMultipleAnswer:{},selectedEssayAnswer:{},param:{additional_features:0}}},mounted(){this.form.field.id=this.$route.params.ids,this.getDetailQuiz()},methods:{getParam(){this.param.additional_features="",axios.get("/getParam").then(n=>{this.param.additional_features=n.data.additional_features,this.param.additional_features!=2&&this.param.additional_features!=3&&this.$swal({title:"Access Denied",icon:"error",allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!1,showCancelButton:!1}).then(e=>{window.location.href="/"})}).catch(n=>{console.error(n)})},async getDetailQuiz(){try{let n=this.$loading.show();axios.get("/getDetailQuiz",{params:{id:this.form.field.id}}).then(e=>{this.question=e.data.questions,this.header=e.data.header[0],this.finished=e.data.finished,this.nilai=e.data.nilai,this.answer=this.question.map(o=>({questionId:o.id,type:o.type,questionPoint:o.point,selectedAnswer:o.type==="checklist"?[]:null,answerPoint:0})),n.hide()}).catch(e=>{n.hide(),e.response.status===403?this.$swal({title:e.response.data.message,text:"Silahkan verifikasi email, jika klik Kirim Email jika ingin kirim ulang email verifikasi",icon:"warning",showCancelButton:!0,confirmButtonText:"Kirim Email",cancelButtonText:"Tutup"}).then(async o=>{if(o.isConfirmed)try{const c=await window.axios.post("/email/resend");this.$swal({title:"Email Terkirim!",text:c.data.message,icon:"success"})}catch(c){this.$swal({title:"Gagal!",text:c.response.data.message||"Terjadi kesalahan saat mengirim email.",icon:"error"})}else window.location="/quiz"}):console.error(e.message)})}catch(n){loader.hide(),console.error(n)}},updateChecklist(n,e){if(!this.form.field.answers.find(c=>c.questionId===n))this.form.field.answers.push({answerPoint:10,questionId:n,questionPoint:30,selectedAnswer:e,type:"checklist"});else{const c=this.form.field.answers.findIndex(d=>d.questionId===n&&d.selectedAnswer===e);c>=0?this.form.field.answers.splice(c,1):this.form.field.answers.push({answerPoint:10,questionId:n,questionPoint:30,selectedAnswer:e,type:"checklist"})}},SetAnswer(){if(this.form.field.answers=[],this.question.forEach(e=>{if(e.type==="checklist")e.answer.forEach(o=>{o.checked&&this.form.field.answers.push({answerPoint:o.point,questionId:e.id,questionPoint:e.point,selectedAnswer:o.id,type:e.type})});else if(e.type==="multiple"){const o=this.selectedMultipleAnswer[e.id];if(o){const c=e.answer.find(d=>d.id===o);this.form.field.answers.push({answerPoint:c?c.point:0,questionId:e.id,questionPoint:e.point,selectedAnswer:o,type:e.type})}}else if(e.type==="essay"){const o=this.selectedEssayAnswer[e.id];this.form.field.answers.push({answerPoint:o?e.point:0,questionId:e.id,questionPoint:e.point,selectedAnswer:o||"",type:e.type})}}),this.validateAnswer()){let e=this.$loading.show();window.axios.post("/setQuiz",this.form.field).then(o=>{e.hide(),this.$swal({toast:!0,icon:o.status===201?"success":"info",html:o.data,showConfirmButton:!0,confirmButtonText:"OK"}).then(c=>{c.isConfirmed&&location.reload()})}).catch(o=>{e.hide(),console.error(o.message),this.$swal({toast:!0,icon:"error",html:o.response.data,showConfirmButton:!0,confirmButtonText:"OK"})})}else this.$swal({toast:!0,position:"top",icon:"info",html:"Pastikan semua pertanyaan sudah terjawab !"})},validateAnswer(){for(const n of this.question)if(n.type==="checklist"){if(!n.answer.some(o=>o.checked))return!1}else if(n.type==="multiple"){if(!this.selectedMultipleAnswer[n.id])return!1}else if(n.type==="essay"&&!this.selectedEssayAnswer[n.id])return!1;return!0}}},p=n=>(V("data-v-d35edc97"),n=n(),T(),n),I={class:"page-content"},M={class:"row"},q={class:"card"},z={class:"card-content d-flex flex-column"},j={class:"card-header"},D={class:"card-title"},K={class:"card-title pt-2 pb-3 text-muted"},U={key:0,class:"team"},N=p(()=>s("i",{class:"bi bi-check-square-fill text-white mx-2 mb-2",width:"16",height:"20"},null,-1)),Q=p(()=>s("span",{class:"name mx-2"},"Nilai anda",-1)),O={class:"score mx-2"},F={class:"card-body"},Y={class:"col-12 mb-2 mt-2"},G={key:0},J={class:"form-check"},L=["value"],R=["for"],H={key:1},W={class:"form-check"},X=["id","name","value"],Z=["for"],$={key:2,class:"mx-3"},ee={class:"form-group with-title mb-3"},se=["id","value"],te=p(()=>s("label",null,"Your Answer",-1)),ie={class:"col-12 mb-2 mt-2"},oe={key:0},ne={class:"form-check"},le=["id","onUpdate:modelValue","value"],re=["for"],de={key:1},ce={class:"form-check"},ae=["id","name","onUpdate:modelValue","value"],he=["for"],ue={key:2,class:"mx-3"},me={class:"form-group with-title mb-3"},fe=["id","onUpdate:modelValue"],pe=p(()=>s("label",null,"Your Answer",-1)),_e={key:0,class:"card-footer"},we={class:"col-md-12"},ye={class:"form-group my-2 d-flex justify-content-end"},ke={key:1,class:"card-footer"},ve={class:"col-md-12"},xe={class:"form-group my-2 d-flex justify-content-end"},be=p(()=>s("button",{type:"submit",class:"btn btn-primary"},"Kembali",-1));function ge(n,e,o,c,d,k){const x=C("router-link");return r(),l("div",I,[s("div",M,[s("div",q,[s("div",z,[s("div",j,[s("h4",D,[s("strong",null,a(d.header.title),1)]),s("h4",K,a(d.header.description),1),d.finished?(r(),l("div",U,[N,Q,s("span",O,a(d.nilai),1)])):h("",!0)]),s("div",F,[d.finished?(r(!0),l(u,{key:0},m(d.question,(t,f)=>(r(),l("div",{key:f,class:"row"},[s("div",Y,[v(a(f+1)+". "+a(t.description)+" ",1),t.type==="checklist"?(r(),l("div",G,[(r(!0),l(u,null,m(t.answer,(i,_)=>(r(),l("div",{key:i.id,class:"mx-3"},[s("div",J,[s("input",{type:"checkbox",value:i.id,class:"form-check-input",checked:"",disabled:""},null,8,L),s("label",{for:t.id+"."+i.id},a(i.description),9,R)])]))),128))])):h("",!0),t.type==="multiple"?(r(),l("div",H,[(r(!0),l(u,null,m(t.answer,(i,_)=>(r(),l("div",{key:i.id,class:"mx-3"},[s("div",W,[s("input",{class:"form-check-input",type:"radio",id:t.id+"."+i.id,name:t.id,value:i.id,checked:"",disabled:""},null,8,X),s("label",{class:"form-check-label",for:t.id+"."+i.id},a(i.description),9,Z)])]))),128))])):h("",!0),t.type==="essay"?(r(),l("div",$,[(r(!0),l(u,null,m(t.answer,(i,_)=>(r(),l("div",{key:i.id},[s("div",ee,[s("textarea",{class:"form-control",id:t.id,rows:"3",value:i.id,disabled:""},`
												`,8,se),te])]))),128))])):h("",!0)])]))),128)):(r(!0),l(u,{key:1},m(d.question,(t,f)=>(r(),l("div",{key:f,class:"row"},[s("div",ie,[v(a(f+1)+". "+a(t.description)+" ",1),t.type==="checklist"?(r(),l("div",oe,[(r(!0),l(u,null,m(t.answer,(i,_)=>(r(),l("div",{key:i.id,class:"mx-3"},[s("div",ne,[y(s("input",{type:"checkbox",id:t.id+"."+i.id,"onUpdate:modelValue":w=>i.checked=w,value:i.id,class:"form-check-input",required:""},null,8,le),[[P,i.checked]]),s("label",{for:t.id+"."+i.id},a(i.description),9,re)])]))),128))])):h("",!0),t.type==="multiple"?(r(),l("div",de,[(r(!0),l(u,null,m(t.answer,(i,_)=>(r(),l("div",{key:i.id,class:"mx-3"},[s("div",ce,[y(s("input",{class:"form-check-input",type:"radio",id:t.id+"."+i.id,name:t.id,"onUpdate:modelValue":w=>d.selectedMultipleAnswer[t.id]=w,value:i.id,required:""},null,8,ae),[[B,d.selectedMultipleAnswer[t.id]]]),s("label",{class:"form-check-label",for:t.id+"."+i.id},a(i.description),9,he)])]))),128))])):h("",!0),t.type==="essay"?(r(),l("div",ue,[s("div",me,[y(s("textarea",{class:"form-control",id:t.id,rows:"3","onUpdate:modelValue":i=>d.selectedEssayAnswer[t.id]=i,required:""},`
											`,8,fe),[[E,d.selectedEssayAnswer[t.id]]]),pe])])):h("",!0)])]))),128))]),d.finished?(r(),l("div",ke,[s("div",ve,[s("div",xe,[g(x,{to:"/quiz",class:"menu-link"},{default:A(()=>[be]),_:1})])])])):(r(),l("div",_e,[s("div",we,[s("div",ye,[s("button",{type:"submit",class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>k.SetAnswer&&k.SetAnswer(...t))},"Simpan Jawaban")])])]))])])])])}const Pe=b(S,[["render",ge],["__scopeId","data-v-d35edc97"]]);export{Pe as default};
//# sourceMappingURL=QuizTest-BXi8P_l5.js.map
