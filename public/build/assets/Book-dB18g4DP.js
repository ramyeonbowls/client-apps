import{_ as y,c as r,a as e,e as b,t as c,i as _,F as g,b as m,n as P,g as p,r as f,o as n,s as w,C as x,d as C,w as B,x as S,y as I}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";const T={data(){return{buku:[],category:[],seeks:"",selectedCategories:[],currentPage:1,itemsPerPage:18}},mounted(){this.filterBooks(),this.getCategory()},methods:{filterBooks(){let a=this.$loading.show();window.axios.get("/getBook",{params:{categories:this.selectedCategories,search:this.searchQuery}}).then(s=>{this.seeks=this.searchQuery,this.buku=s.data,this.$router.push({path:this.$route.path,query:{}}),a.hide()}).catch(s=>{a.hide(),console.error(s)})},getCategory(){window.axios.get("/getCategory").then(a=>{this.category=a.data}).catch(a=>{console.error(a)})},goToPage(a){this.currentPage=a},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}},computed:{searchQuery(){return this.$route.query.search||""},totalBuku(){return this.buku.length},totalPages(){return Math.ceil(this.totalBuku/this.itemsPerPage)},paginatedBuku(){const a=(this.currentPage-1)*this.itemsPerPage,s=a+this.itemsPerPage,u=this.buku.slice(a,s),d=4,o=[];for(let t=0;t<u.length;t+=d)o.push(u.slice(t,t+d));return o},visiblePages(){let s=Math.max(1,this.currentPage-2),u=Math.min(this.totalPages,this.currentPage+2);const d=[];for(let o=s;o<=u;o++)d.push(o);return d}},watch:{searchQuery(a,s){a!==""&&(this.selectedCategories=[],this.filterBooks())}}},k=a=>(S("data-v-ebe8356a"),a=a(),I(),a),V={class:"page-content"},M={class:"row"},K={class:"divider divider-left-center"},N=k(()=>e("h2",null,"KOLEKSI BUKU",-1)),Q={key:0},U={class:"col-12 text-start mb-3"},j={class:"btn-group"},q=k(()=>e("button",{type:"button",class:"btn btn-primary dropdown-toggle px-5 py-2","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-offset":"0,15"}," Kategori ",-1)),z={class:"dropdown-menu"},D=["id","value"],E=["for"],F={class:"text-start"},L={class:"text-muted text-end"},O={class:"col-12"},A={class:"row row-cols-2 row-cols-md-6"},G={class:"card h-100"},H={class:"card-content"},J={class:"product-image"},R=["src","alt"],W={class:"card-body pt-0"},X={class:"card-title mb-0"},Y={href:"#"},Z=["title"],$={class:"row"},ee={class:"col-12"},te={"aria-label":"Page navigation"},se={class:"pagination justify-content-center"},ae={key:0,class:"page-item"},oe={key:1,class:"page-item disabled"},ie=k(()=>e("span",{class:"page-link"},"...",-1)),re=[ie],ne=["onClick"],le={key:2,class:"page-item disabled"},ce=k(()=>e("span",{class:"page-link"},"...",-1)),de=[ce],he={key:3,class:"page-item"},ge={key:1,class:"row text-center"},ue=k(()=>e("h6",null,"Buku Tidak tersedia",-1)),_e=[ue];function pe(a,s,u,d,o,t){const v=f("router-link");return n(),r("div",V,[e("section",M,[e("div",K,[N,o.seeks?(n(),r("div",Q,[e("p",null,[b("hasil pencarian buku dengan kata kunci "),e("b",null,'"'+c(o.seeks)+'"',1)])])):_("",!0)]),e("div",U,[e("div",j,[q,e("ul",z,[(n(!0),r(g,null,m(o.category,i=>(n(),r("li",{key:i.id,class:"dropdown-item py-3"},[w(e("input",{type:"checkbox",id:i.id,class:"form-check-input me-2",value:i.id,"onUpdate:modelValue":s[0]||(s[0]=h=>o.selectedCategories=h),onChange:s[1]||(s[1]=(...h)=>t.filterBooks&&t.filterBooks(...h))},null,40,D),[[x,o.selectedCategories]]),e("label",{for:i.id},[e("span",F,c(i.description),1),e("span",L," ( "+c(i.total)+" ) ",1)],8,E)]))),128))])])]),e("div",O,[t.paginatedBuku.length>0?(n(),r(g,{key:0},[e("div",A,[(n(!0),r(g,null,m(t.paginatedBuku,(i,h)=>(n(),r(g,{key:h},[(n(!0),r(g,null,m(i,l=>(n(),r("div",{key:l.id,class:"col mb-4"},[C(v,{to:{name:"detail-buku",params:{idb:l.isbn}}},{default:B(()=>[e("div",G,[e("div",H,[e("div",J,[e("img",{src:l.image.replace("&","&"),alt:l.alt,class:"img-fluid",style:{width:"150px",height:"220px"}},null,8,R)]),e("div",W,[e("p",X,c(l.writer),1),e("a",Y,[e("h6",{class:"card-title mt-2","data-bs-toggle":"tooltip","data-bs-placement":"bottom",style:{display:"-webkit-box","line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","text-overflow":"ellipsis"},title:l.title},c(l.title),9,Z)])])])])]),_:2},1032,["to"])]))),128))],64))),128))]),e("div",$,[e("div",ee,[e("nav",te,[e("ul",se,[e("li",{class:P(["page-item",{disabled:o.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:s[2]||(s[2]=p((...i)=>t.previousPage&&t.previousPage(...i),["prevent"]))},"Sebelumnya")],2),o.currentPage>3?(n(),r("li",ae,[e("a",{class:"page-link",href:"#",onClick:s[3]||(s[3]=p(i=>t.goToPage(1),["prevent"]))},"1")])):_("",!0),o.currentPage>4?(n(),r("li",oe,re)):_("",!0),(n(!0),r(g,null,m(t.visiblePages,i=>(n(),r("li",{key:i,class:P([{active:o.currentPage===i},"page-item"])},[e("a",{class:"page-link",href:"#",onClick:p(h=>t.goToPage(i),["prevent"])},c(i),9,ne)],2))),128)),o.currentPage<t.totalPages-3?(n(),r("li",le,de)):_("",!0),o.currentPage<t.totalPages-2?(n(),r("li",he,[e("a",{class:"page-link",href:"#",onClick:s[4]||(s[4]=p(i=>t.goToPage(t.totalPages),["prevent"]))},c(t.totalPages),1)])):_("",!0),e("li",{class:P(["page-item",{disabled:o.currentPage===t.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:s[5]||(s[5]=p((...i)=>t.nextPage&&t.nextPage(...i),["prevent"]))},"Selanjutnya")],2)])])])])],64)):(n(),r("div",ge,_e))])])])}const Pe=y(T,[["render",pe],["__scopeId","data-v-ebe8356a"]]);export{Pe as default};
//# sourceMappingURL=Book-dB18g4DP.js.map
