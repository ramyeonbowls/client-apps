import{_ as G,I as K,Y as O,c as Q,o as Y,x as H,y as N,a as m}from"./sweetalert2.min-C72B2ZMm.js";import{S as E}from"./sweetalert2.all-BTEucekq.js";import{A as P,T as g,S as x,a as h}from"./loadBitmapFont-C0Sa2hzz.js";import"./_commonjsHelpers-DSXiPLDm.js";import"./__vite-browser-external-D7Ct-6yo.js";const R={setup(){let e=null;const B=async()=>{try{return(await axios.get("/getParam")).data.additional_features}catch(a){return console.error("Error fetching data:",a),null}},_=async()=>{try{return(await axios.get("/getInfoBaca")).data}catch(a){return console.error("Error fetching data:",a),null}};K(async()=>{const a=await B();if(a==1||a==3){const p=await _();if(p.code==1){let S=function(){const o=Math.floor(Math.random()*10)+1,n=Math.floor(Math.random()*10)+1;for(s.answer=o+n,s.question=`${o} + ${n} = ?`,s.options=[s.answer];s.options.length<4;){const t=Math.floor(Math.random()*20)+1;s.options.includes(t)||s.options.push(t)}s.options.sort(()=>Math.random()-.5),c.text=s.question,z()},z=function(){l.forEach(o=>e.stage.removeChild(o)),l=[],s.options.forEach((o,n)=>{const t=new h(o,{fontSize:30,fill:"#fff"});t.anchor.set(.5),t.x=e.screen.width/2-150+n*100,t.y=e.screen.height/2-80,t.interactive=!0,t.buttonMode=!0,t.on("pointerdown",()=>q(o)),e.stage.addChild(t),l.push(t)})},q=function(o){const n=o===s.answer;if(n){w++,d.text=`Score: ${w}`;const t=new Audio("game/scramble/yay.mp3");t.play(),setTimeout(()=>{t.pause(),t.currentTime=0},5e3),$()}else{const t=new Audio("game/scramble/boo.mp3");t.play(),setTimeout(()=>{t.pause(),t.currentTime=0},5e3),F()}A.push({question:s.question,answer:s.answer,selected:o,correct:n}),C++,C<10?S():L()},$=function(){const o=new h("Horeee Benar!",{fontSize:36,fill:"#00FF00"});o.anchor.set(.5),o.x=e.screen.width/2,o.y=e.screen.height/2-200,e.stage.addChild(o),setTimeout(()=>e.stage.removeChild(o),1e3);const n=g.from("game/math/happy.png"),t=new x(n);t.anchor.set(.5),t.x=e.screen.width+50,t.y=e.screen.height/2+100,t.scale.set(.5),e.stage.addChild(t),u.push(t);const T=5,f=k=>{t.x-=T*k,t.x<-50&&(e.stage.removeChild(t),u=u.filter(v=>v!==t),e.ticker.remove(f))};e.ticker.add(f)},F=function(){const o=new h("Aduh Salah!",{fontSize:36,fill:"#FF0000"});o.anchor.set(.5),o.x=e.screen.width/2,o.y=e.screen.height/2-200,e.stage.addChild(o),setTimeout(()=>e.stage.removeChild(o),1e3);const n=g.from("game/math/sad.png"),t=new x(n);t.anchor.set(.5),t.x=e.screen.width+50,t.y=e.screen.height/2+100,t.scale.set(.5),e.stage.addChild(t),u.push(t);const T=5,f=k=>{t.x-=T*k,t.x<-50&&(e.stage.removeChild(t),u=u.filter(v=>v!==t),e.ticker.remove(f))};e.ticker.add(f)},L=function(){const o=new h("",{fontSize:24,fill:"#fff",wordWrap:!0,wordWrapWidth:600});o.anchor.set(.5),o.x=e.screen.width/2,o.y=e.screen.height/2-50;const n=new h(`Skor Akhir: ${w} / 10`,{fontSize:36,fill:"#fff"});n.anchor.set(.5),n.x=e.screen.width/2,n.y=e.screen.height/2+100,e.stage.addChild(n),setTimeout(()=>{W(),e.stage.removeChild(n)},1e3)},W=function(){document.getElementById("modal").style.display="flex",document.getElementById("playAgainBtn").onclick=()=>{document.getElementById("modal").style.display="none",D()},document.getElementById("exitBtn").onclick=()=>{window.location.href="/"}},D=function(){w=0,C=0,A=[],d.text="Score: 0",S()},b=function(){i.width=e.screen.width,i.height=e.screen.height,r.x=e.screen.width/2,r.y=e.screen.height/2-150,c.x=r.x,c.y=r.y,d.x=20,d.y=20,s.options.forEach((o,n)=>{l[n]&&(l[n].x=e.screen.width/2-150+n*100,l[n].y=e.screen.height/2-80)})};const y=document.getElementById("game-content");e=new P({resizeTo:window,backgroundColor:16777215}),y.appendChild(e.view),e.view.style.width="100%",e.view.style.height="100%";const I=g.from("game/math/background.png"),i=new x(I);i.anchor.set(.5),i.width=e.screen.width,i.height=e.screen.height,i.x=e.screen.width/2,i.y=e.screen.height/2,e.stage.addChild(i);const M=g.from("game/math/board.png"),r=new x(M);r.anchor.set(.5),r.width=650,r.height=300,r.x=e.screen.width/2,r.y=e.screen.height/2-150,e.stage.addChild(r);const c=new h("",{fontSize:40,fill:"#fff"});c.anchor.set(.5),c.x=r.x,c.y=r.y,e.stage.addChild(c);let w=0;const d=new h("Score: 0",{fontSize:30,fill:"#fff"});d.x=20,d.y=20,e.stage.addChild(d);let s={question:"",answer:0,options:[]},l=[],C=0,A=[],u=[];S(),window.addEventListener("resize",b),b()}else E.fire({icon:"warning",text:p.message,allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!1,showCancelButton:!1}).then(y=>{window.location.href="/koleksi-buku"})}else E.fire({title:"Access Denied!",icon:"error",allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!1,showCancelButton:!1}).then(p=>{window.location.href="/"})}),O(()=>{e.destroy(!0,{children:!0,texture:!0,baseTexture:!0})})}},U=e=>(H("data-v-a55cf90d"),e=e(),N(),e),V={id:"game-content"},j=U(()=>m("div",{id:"modal"},[m("div",{id:"modalContent"},[m("h2",null,"Apakah Anda ingin bermain lagi?"),m("button",{id:"playAgainBtn"},"Ya"),m("button",{id:"exitBtn"},"Tidak")])],-1)),J=[j];function X(e,B,_,a,p,y){return Y(),Q("div",V,J)}const se=G(R,[["render",X],["__scopeId","data-v-a55cf90d"]]);export{se as default};
//# sourceMappingURL=GameMath-MnZCgUev.js.map
