import{_ as L,c as l,d as y,a as e,s as w,P as x,F as h,b as m,e as b,t as p,i as v,D as T,r as P,o as a}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";let u;const S={data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},configdate:{dateFormat:"Y-m-d",mode:"range",onClose:(i,t,r)=>{i.length===1&&(r.clear(),this.filter.date="")}},option:{optProv:"",optKab:"",optWL:""},filter:{date:"",provinsi:"",kabupaten:"",wl:""},selected:[],detail:[]}},mounted(){this.__MENU(),this.$root.web_access_log(),this.getProvinsi();let i=this;u=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:10,processing:!0,ajax:"/report/loans-rpt?nodata=yes",columns:[{data:"wl_name",class:"text-center text-nowrap"},{data:"provinsi_name",class:"text-center text-nowrap"},{data:"kabupaten_name",class:"text-center text-nowrap"},{data:"name",class:"text-center text-nowrap"},{data:"title",class:"text-center text-nowrap"},{data:"point",class:"text-center text-nowrap"},{data:"tgl",class:"text-center text-nowrap"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){i.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(u.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),u.rows(".selected").data().length>0&&i.selected.push(u.rows(".selected").data()[0]))})},methods:{__MENU(){let i=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(t=>{i.hide(),this.menu.menu_label=t.data.menu_label,this.menu.menu_desc=t.data.menu_desc,this.menu.permission=t.data.permission}).catch(t=>{i.hide(),console.error(t)})},getProvinsi(){this.option.optProv="",this.option.optKab="",this.option.optWL="";let i=this.$loading.show();window.axios.post("/getOpt",{opt:"Provinsi"}).then(t=>{i.hide(),this.option.optProv=t.data,this.option.optProv.length==1&&(this.filter.provinsi=this.option.optProv[0].provinsi_id,this.getKabupaten())}).catch(t=>{i.hide(),console.error(t)})},getKabupaten(){this.option.optKab="",this.option.optWL="",window.axios.post("/getOpt",{opt:"Kabupaten",PROVINSI:this.filter.provinsi}).then(i=>{this.option.optKab=i.data,this.option.optKab.length==1&&(this.filter.kabupaten=this.option.optKab[0].kabupaten_id,this.getWhiteLabel())}).catch(i=>{console.error(i)})},getWhiteLabel(){this.option.optWL="",window.axios.post("/getOpt",{opt:"WhiteLabel",PROVINSI:this.filter.provinsi,KABUPATEN:this.filter.kabupaten}).then(i=>{this.option.optWL=i.data,this.option.optWL.length==1&&(this.filter.wl=this.option.optWL[0].instansi_name)}).catch(i=>{console.error(i)})},openExecute(){let i=!0,t="";if(this.filter.provinsi==""&&(i=!1,t+=" Provinsi, "),this.filter.kabupaten==""&&(i=!1,t+=" Kabupaten, "),this.filter.wl==""&&(i=!1,t+=" White Label, "),(this.filter.date===""||this.filter.date===null)&&(i=!1,t+=" Tanggal, "),!i)this.$swal({toast:!0,icon:"warning",text:"Silahkan Isi"+t.slice(0,-2)+"!"});else{let r=this.filter.date.split(" to ")[0]??"",f=this.filter.date.split(" to ")[1]??"",o="PROVINSI="+this.filter.provinsi;o+="&KABUPATEN="+this.filter.kabupaten,o+="&WL="+this.filter.wl,o+="&START_DATE="+r,o+="&END_DATE="+f,u.ajax.url("/report/quiz-rpt?menufn="+this.$route.name+"&"+o).load()}},goDetail(){if(this.selected.length>0){new bootstrap.Modal(document.getElementById("detailModal")).show();let i=this.$loading.show();axios.get("/report/quiz-dtl",{params:{id:this.selected[0].id,date:this.selected[0].tgl,survey_id:this.selected[0].survey_id,PROVINSI:this.selected[0].provinsi_id,KABUPATEN:this.selected[0].kabupaten_id,WL:this.selected[0].wl_name}}).then(t=>{this.detail=t.data.questions,i.hide()}).catch(t=>{i.hide(),console.error(t)})}else this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},openXLS(){let i=!0,t="";if(this.filter.provinsi==""&&(i=!1,t+=" Provinsi, "),this.filter.kabupaten==""&&(i=!1,t+=" Kabupaten, "),this.filter.wl==""&&(i=!1,t+=" White Label, "),(this.filter.date===""||this.filter.date===null)&&(i=!1,t+=" Tanggal, "),!i)this.$swal({toast:!0,icon:"warning",text:"Silahkan Isi"+t.slice(0,-2)+"!"});else{let r=this.filter.date.split(" to ")[0]??"",f=this.filter.date.split(" to ")[1]??"",o=this.$loading.show();window.axios({url:"/report/quiz-xls",method:"POST",responseType:"blob",data:{PROVINSI:this.filter.provinsi,KABUPATEN:this.filter.kabupaten,WL:this.filter.wl,START_DATE:r,END_DATE:f}}).then(n=>{o.hide();const g=window.URL.createObjectURL(new Blob([n.data])),_=document.createElement("a");_.href=g,_.setAttribute("download","Laporan Quiz "+this.filter.date+".xlsx"),document.body.appendChild(_),_.click()}).catch(n=>{console.error(n),o.hide()})}}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},beforeRouteLeave(i,t,r){u&&(u.destroy(),u=null),r()}},N={class:"modal fade text-left modal-borderless",id:"border-less",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel1","aria-hidden":"true"},E={class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document"},K={class:"modal-content"},A=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Filter"),e("button",{type:"button",class:"close rounded-pill","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])],-1),W={class:"modal-body"},D={class:"row"},C={class:"col-md-6 col-6"},M={class:"row"},V={class:"col-md-12 mb-12"},I={class:"form-group"},U=e("label",{for:"basicSelect1",class:"form-label"},"Provinsi",-1),R=e("option",{value:""},"--",-1),O=["value"],B={class:"col-md-12 mb-12"},F={class:"form-group"},z=e("label",{for:"basicSelect2",class:"form-label"},"Kabupaten/Kota",-1),q=e("option",{value:""},"--",-1),j=["value"],X={class:"col-md-6 col-6"},Q={class:"row"},Y={class:"col-md-12 mb-12"},J={class:"form-group"},G=e("label",{for:"basicSelect3",class:"form-label"},"White Label",-1),H=e("option",{value:""},"--",-1),Z=["value"],ee={class:"col-md-12 mb-12"},te={class:"form-group"},se=e("label",{for:"sdate",class:"form-label"},"Tanggal",-1),ie={class:"modal-footer"},oe=e("i",{class:"bi bi-file-earmark-excel-fill"},null,-1),le=e("i",{class:"bi bi-file-earmark-excel-fill"},null,-1),ae={class:"section"},ne={class:"card overflow-auto"},de={class:"card-header"},re={class:"buttons"},ce=e("a",{href:"#",class:"btn icon icon-left btn-primary","data-bs-toggle":"modal","data-bs-target":"#border-less"},[e("i",{class:"bi bi-filter-square-fill"}),b(" Filter")],-1),he=e("i",{class:"bi bi-info-circle-fill"},null,-1),pe=T('<div class="card-body"><table class="table table-striped" id="data_rst"><thead><tr><th class="text-center">Nama WL</th><th class="text-center">Provinsi</th><th class="text-center">Kab/Kota</th><th class="text-center">Nama Member</th><th class="text-center">Judul Quiz</th><th class="text-center">Total Point</th><th class="text-center">Tanggal Pengerjaan</th></tr></thead></table></div>',1),ue={class:"modal fade text-left",id:"detailModal",tabindex:"-1",role:"dialog","aria-labelledby":"detailModalLabel","aria-hidden":"true"},me={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl",role:"document"},_e={class:"modal-content"},be=e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"detailModalLabel"},"Detail"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])],-1),fe={class:"modal-body"},ve={class:"modal-header"},ge={key:0},we={class:"card-body"},xe={class:"col-12"},ke={key:0},ye={class:"form-check"},Pe=["value"],Le=["for"],Te={key:1},Se={class:"form-check"},Ne=["id","name","value"],Ee=["for"],Ke={key:2},Ae={class:"form-group with-title mb-3"},We=["id","value"],De=e("label",null,"Your Answer",-1),Ce=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])],-1);function Me(i,t,r,f,o,n){const g=P("action-bar"),_=P("Flatpickr");return a(),l(h,null,[y(g,{data:o.menu,"menu-label":o.menu.menu_label},null,8,["data","menu-label"]),e("div",N,[e("div",E,[e("div",K,[A,e("div",W,[e("div",D,[e("div",C,[e("div",M,[e("div",V,[e("div",I,[U,w(e("select",{class:"form-select",id:"basicSelect1","onUpdate:modelValue":t[0]||(t[0]=s=>o.filter.provinsi=s),onChange:t[1]||(t[1]=(...s)=>n.getKabupaten&&n.getKabupaten(...s))},[R,(a(!0),l(h,null,m(o.option.optProv,(s,c)=>(a(),l("option",{key:c,value:s.provinsi_id},p(s.provinsi_id+" "+s.provinsi_name),9,O))),128))],544),[[x,o.filter.provinsi]])])]),e("div",B,[e("div",F,[z,w(e("select",{class:"form-select",id:"basicSelect2","onUpdate:modelValue":t[2]||(t[2]=s=>o.filter.kabupaten=s),onChange:t[3]||(t[3]=(...s)=>n.getWhiteLabel&&n.getWhiteLabel(...s))},[q,(a(!0),l(h,null,m(o.option.optKab,(s,c)=>(a(),l("option",{key:c,value:s.kabupaten_id},p(s.kabupaten_id+" "+s.kabupaten_name),9,j))),128))],544),[[x,o.filter.kabupaten]])])])])]),e("div",X,[e("div",Q,[e("div",Y,[e("div",J,[G,w(e("select",{class:"form-select",id:"basicSelect3","onUpdate:modelValue":t[4]||(t[4]=s=>o.filter.wl=s)},[H,(a(!0),l(h,null,m(o.option.optWL,(s,c)=>(a(),l("option",{key:c,value:s.instansi_name},p(s.instansi_name),9,Z))),128))],512),[[x,o.filter.wl]])])]),e("div",ee,[e("div",te,[se,y(_,{modelValue:o.filter.date,"onUpdate:modelValue":t[5]||(t[5]=s=>o.filter.date=s),class:"form-control flatpickr-range",config:o.configdate,placeholder:"Select date.."},null,8,["modelValue","config"])])])])])])]),e("div",ie,[e("button",{type:"button",class:"btn btn-primary ms-1","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=(...s)=>n.openExecute&&n.openExecute(...s))},[oe,b(" Proses Data ")]),e("button",{type:"button",class:"btn btn-success ms-1","data-bs-dismiss":"modal",onClick:t[7]||(t[7]=(...s)=>n.openXLS&&n.openXLS(...s))},[le,b(" Export ")])])])])]),e("section",ae,[e("div",ne,[e("div",de,[e("div",re,[ce,e("a",{href:"#",class:"btn icon icon-left btn-info",onClick:t[8]||(t[8]=(...s)=>n.goDetail&&n.goDetail(...s))},[he,b(" Detail")])])]),pe])]),e("div",ue,[e("div",me,[e("div",_e,[be,e("div",fe,[e("div",ve,[o.selected.length>0?(a(),l("div",ge,p(o.selected[0].title),1)):v("",!0)]),(a(!0),l(h,null,m(o.detail,(s,c)=>(a(),l("div",{key:c,class:"card mb-0 py-0"},[e("div",we,[e("div",xe,[b(p(c+1)+". "+p(s.description)+" ",1),s.type==="checklist"?(a(),l("div",ke,[(a(!0),l(h,null,m(s.answer,(d,k)=>(a(),l("div",{key:d.id},[e("div",ye,[e("input",{type:"checkbox",value:d.id,class:"form-check-input",checked:"",disabled:""},null,8,Pe),e("label",{for:s.id+"."+d.id},p(d.description),9,Le)])]))),128))])):v("",!0),s.type==="multiple"?(a(),l("div",Te,[(a(!0),l(h,null,m(s.answer,(d,k)=>(a(),l("div",{key:d.id},[e("div",Se,[e("input",{class:"form-check-input",type:"radio",id:s.id+"."+d.id,name:s.id,value:d.id,checked:"",disabled:""},null,8,Ne),e("label",{class:"form-check-label",for:s.id+"."+d.id},p(d.description),9,Ee)])]))),128))])):v("",!0),s.type==="essay"?(a(),l("div",Ke,[(a(!0),l(h,null,m(s.answer,(d,k)=>(a(),l("div",{key:d.id},[e("div",Ae,[e("textarea",{class:"form-control",id:s.id,rows:"3",value:d.id,disabled:""},`
											`,8,We),De])]))),128))])):v("",!0)])])]))),128))]),Ce])])])],64)}const Ue=L(S,[["render",Me]]);export{Ue as default};
//# sourceMappingURL=ReportQuiz-BIMJJpUw.js.map
