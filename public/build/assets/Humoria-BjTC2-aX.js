import{F as C,a as M,E as F}from"./vee-validate.esm-Nlz2O7Po.js";import{Q as T}from"./quill-DIRzVCzf.js";/* empty css                   */import{_ as E,c as p,d as c,a as e,F as _,e as n,g as v,n as h,w,r as u,o as g,s as y,v as I,C as V,D as P}from"./sweetalert2.min-C72B2ZMm.js";import{v as j}from"./v4-DvF23Exx.js";import"./_commonjsHelpers-DSXiPLDm.js";let m;const B={components:{VeeForm:C,Field:M,ErrorMessage:F},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{submitted:!1,new:!1,edit:!1,field:{id:"",title:"",description:"",flag_aktif:!0,author:"",file:"",current_file:""}}}},mounted(){this.__MENU(),this.$root.web_access_log();let a=this;m=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/setting/humoria-mst",columns:[{data:"id"},{data:"title"},{data:"flag_aktif"},{data:"file",render:function(t,l,i){return'<img src="/storage/images/news/'+t+'" class="thumbnail" data-large="/storage/images/news/'+t+'" alt="Image" style="width: 50px; cursor: pointer;" />'}},{data:"created_by"},{data:"created_at",class:"text-center"},{data:"update_by"},{data:"updated_at",class:"text-center"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){a.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(m.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),m.rows(".selected").data().length>0&&a.selected.push(m.rows(".selected").data()[0]))}),window.$("#data_rst tbody").on("click",".thumbnail",function(){var t=$(this).data("large");$("#modalImage").attr("src",t),new bootstrap.Modal(document.getElementById("imageModal")).show()}),this.quill=new T(this.$refs.editor,{theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{list:"ordered"},{indent:"-1"},{indent:"+1"}],["direction",{align:[]}],["link"],["clean"]]}}),this.quill.on("text-change",()=>{this.form.field.description=this.quill.root.innerHTML})},methods:{__MENU(){let a=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(t=>{a.hide(),this.menu.menu_label=t.data.menu_label,this.menu.menu_desc=t.data.menu_desc,this.menu.permission=t.data.permission}).catch(t=>{a.hide(),console.error(t)})},clearForm(){this.form.field.id="",this.form.field.title="",this.form.field.description="",this.form.field.flag_aktif="",this.form.field.author="",this.form.field.file="",this.form.field.current_file="",this.$refs.humoria_files.value="",this.quill.setText("")},async onChangeIcon(a){this.form.field.file=this.$refs.humoria_files.files[0]},create(){this.form.new=!0,this.form.edit=!1,this.clearForm(),this.form.field.id=j()},edit(){if(this.selected.length>0){this.form.new=!1,this.form.edit=!0,this.submitted=!1;let a=this.decodeHtml(this.selected[0].description);this.quill.clipboard.dangerouslyPasteHTML(a),this.form.field.id=this.selected[0].id,this.form.field.title=this.selected[0].title,this.form.field.description=a,this.form.field.flag_aktif=this.selected[0].flag_aktif=="Y",this.form.field.author=this.selected[0].author,this.form.field.file="",this.form.field.current_file=this.selected[0].file}else this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},decodeHtml(a){const t=document.createElement("textarea");t.innerHTML=a;const l=t.value;return t.remove(),l},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(a=>{if(a.value){let t=this.$loading.show();window.axios.delete("/setting/humoria-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(l=>{t.hide(),this.selected=[],m.ajax.reload(),this.$swal({toast:!0,icon:"success",html:l.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){this.form.submitted||(this.form.submitted=!0,this.$refs.form.validate().then(a=>{if(a.valid){this.form.submitted=!1;let t=this.$loading.show();if(this.form.new){let l=new FormData;Object.keys(this.form.field).forEach(i=>{l.append(i,this.form.field[i])}),window.axios.post("/setting/humoria-mst?menu_fn="+this.$route.name,l).then(i=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:i.status===201?"success":"info",html:i.data})}).catch(i=>{t.hide(),this.form.submitted=!1,i.response.status===422&&this.$refs.form.setErrors(i.response.data.errors)})}else{let l=new FormData;l.append("_method","PUT"),Object.keys(this.form.field).forEach(i=>{l.append(i,this.form.field[i])}),window.axios.post("/setting/humoria-mst/"+this.form.field.id+"?menu_fn="+this.$route.name,l).then(i=>{t.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:i.status===201?"success":"info",html:i.data})}).catch(i=>{t.hide(),this.form.submitted=!1,i.response.status===422&&this.$refs.form.setErrors(i.response.data.errors)})}}else this.form.submitted=!1}))},cancel(){this.form.new=!1,this.form.edit=!1,this.form.submitted=!1,this.selected=[],this.clearForm(),this.$refs.form.resetForm(),m.ajax.reload(null,!1)}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},beforeRouteLeave(a,t,l){m&&(m.destroy(),m=null),l()}},D={class:"section"},U={class:"row"},q={class:"col-md-12"},H={class:"card"},N={class:"card-header"},S={class:"buttons"},A=e("i",{class:"bi bi-folder-fill"},null,-1),L=e("i",{class:"bi bi-pen-fill"},null,-1),z=e("i",{class:"bi bi-trash-fill"},null,-1),O=e("i",{class:"bi bi-cloud-arrow-up-fill"},null,-1),R=e("i",{class:"bi bi-arrow-left-square-fill"},null,-1),J={class:"card-body"},K={class:"nav nav-tabs",id:"myTab",role:"tablist"},Q={class:"nav-item",role:"presentation"},X={class:"nav-item",role:"presentation"},Y={class:"tab-content",id:"myTabContent"},G=P('<div class="table-responsive"><table class="table table-striped" id="data_rst"><thead><tr><th>ID</th><th>Judul</th><th>Aktif</th><th>File</th><th>dibuat oleh</th><th>dibuat pada</th><th>diperbarui oleh</th><th>diperbarui pada</th></tr></thead></table></div>',1),W=[G],Z={id:"basic-horizontal-layouts"},ee={class:"row match-height"},te={class:"col-12"},se={class:"card"},ie={class:"card-content"},ae={class:"card-body"},le=["onSubmit"],oe={class:"form-body"},de={class:"row"},re=e("div",{class:"col-md-2"},[e("label",{for:"id"},[n("ID "),e("span",{class:"text-danger"},"*")])],-1),ne={class:"col-md-10 form-group"},ce=e("div",{class:"col-md-2"},[e("label",{for:"desc"},[n("Judul "),e("span",{class:"text-danger"},"*")])],-1),me={class:"col-md-10 form-group"},fe=e("div",{class:"col-md-2"},[e("label",{for:"desc"},[n("Konten "),e("span",{class:"text-danger"},"*")])],-1),he={class:"col-md-10 form-group"},ue={ref:"editor",class:"quill-editor",style:{height:"300px","margin-bottom":"1rem"}},be=e("div",{class:"col-md-2"},[e("label",{for:"type"},"Flag Aktif")],-1),pe={class:"col-md-10 form-group"},_e={class:"form-check"},ge={class:"checkbox"},ve=e("label",{for:"flag_aktif"},"Aktif",-1),we=e("div",{class:"col-md-2"},[e("label",{for:"file"},[n("File "),e("span",{class:"text-danger"},"*")])],-1),ye={class:"col-md-10 form-group"},ke=e("br",null,null,-1),xe=e("small",{class:"text-muted"},[n("Max. size: 1500 kb (700x350 pixels)"),e("br"),n("File types: png, jpg, jpeg")],-1),Ce=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("i",{class:"bx bx-x d-block d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function Me(a,t,l,i,s,o){const k=u("action-bar"),b=u("Field"),f=u("ErrorMessage"),x=u("VeeForm");return g(),p(_,null,[c(k,{data:s.menu,"menu-label":s.menu.menu_label},null,8,["data","menu-label"]),e("section",D,[e("div",U,[e("div",q,[e("div",H,[e("div",N,[e("div",S,[!s.form.new&&!s.form.edit?(g(),p(_,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:t[0]||(t[0]=(...d)=>o.create&&o.create(...d))},[A,n(" Tambah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[1]||(t[1]=(...d)=>o.edit&&o.edit(...d))},[L,n(" Sunting")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[2]||(t[2]=(...d)=>o.destroy&&o.destroy(...d))},[z,n(" Hapus")])],64)):(g(),p(_,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:t[3]||(t[3]=v((...d)=>o.submit&&o.submit(...d),["prevent"]))},[O,n(" Simpan")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:t[4]||(t[4]=(...d)=>o.cancel&&o.cancel(...d))},[R,n(" Batal")])],64))])]),e("div",J,[e("ul",K,[e("li",Q,[e("a",{class:h(["nav-link",s.form.new||s.form.edit?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",X,[e("a",{class:h(["nav-link",!s.form.new&&!s.form.edit?"disabled":"active"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",Y,[e("div",{class:h(["tab-pane fade",!s.form.new&&!s.form.edit?"show active":""]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},W,2),e("div",{class:h(["tab-pane fade",s.form.new||s.form.edit?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[e("section",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",ie,[e("div",ae,[c(x,{ref:"form",as:"div"},{default:w(({handleSubmit:d})=>[e("form",{class:"form form-horizontal",onSubmit:v(r=>d(r,o.submit),["prevent"])},[e("div",oe,[e("div",de,[re,e("div",ne,[c(b,{type:"text",disabled:!0,id:"id",modelValue:s.form.field.id,"onUpdate:modelValue":t[5]||(t[5]=r=>s.form.field.id=r),class:"form-control",name:"id"},null,8,["modelValue"]),c(f,{name:"id",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),ce,e("div",me,[c(b,{type:"text",id:"title",modelValue:s.form.field.title,"onUpdate:modelValue":t[6]||(t[6]=r=>s.form.field.title=r),class:"form-control",name:"title"},null,8,["modelValue"]),c(f,{name:"judul",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),fe,e("div",he,[e("div",ue,null,512),y(e("input",{type:"hidden","onUpdate:modelValue":t[7]||(t[7]=r=>s.form.field.description=r),name:"description"},null,512),[[I,s.form.field.description]]),c(f,{name:"description",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})]),be,e("div",pe,[e("div",_e,[e("div",ge,[y(e("input",{type:"checkbox",id:"flag_aktif",class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=r=>s.form.field.flag_aktif=r)},null,512),[[V,s.form.field.flag_aktif]]),ve])])]),we,e("div",ye,[c(b,{name:"file"},{default:w(()=>[e("input",{type:"file",ref:"humoria_files",id:"file",name:"file",onChange:t[9]||(t[9]=(...r)=>o.onChangeIcon&&o.onChangeIcon(...r)),accept:".png,.jpg,.jpeg"},null,544)]),_:1}),c(f,{name:"file",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}}),ke,xe])])])],40,le)]),_:1},512)])])])])])])],2)])])])])])]),Ce],64)}const je=E(B,[["render",Me]]);export{je as default};
//# sourceMappingURL=Humoria-BjTC2-aX.js.map
