import{_ as i,c as n,o as d,F as r,D as c,a as e}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";let o;const u={props:{isAuthenticated:{type:Boolean,required:!0}},mounted(){let s=this;o=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,order:[[0,"asc"]],ajax:"/RentHistory",columns:[{data:"title"},{data:"cover",render:function(a,t,l){return'<img src="/storage/covers/'+a+'" class="cover" data-large="/storage/covers/'+a+'" alt="Image" style="width: 50px; cursor: pointer;" />'}},{data:"start_date"},{data:"end_date"},{data:"flag_end",render:function(a,t,l){return a==="Y"?'<span class="badge bg-success">Sudah Dikembalikan</span>':'<button class="btn btn-warning" data-book-id="'+l.book_id+'">Kembalikan</button>'}}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ of _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 of 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click",".cover",function(){var a=$(this).data("large");$("#modalImage").attr("src",a),new bootstrap.Modal(document.getElementById("imageModal")).show()}),window.$("#data_rst tbody").on("click",".btn-warning",function(){var a=$(this).data("book-id");s.kembaliBuku(a)})},methods:{kembaliBuku(s){let a=this.$loading.show();window.axios.post("/ReturnBook",{pdfToken:s}).then(t=>{a.hide(),this.$swal({text:t.data.message,icon:t.data.code==1?"success":"error",allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!1,showCancelButton:!1}).then(l=>{o.ajax.reload(null,!1)})}).catch(t=>{a.hide(),this.$swal({text:"Terjadi kesalahan saat pinjam buku, silahkan coba kembali",icon:"error",showCancelButton:!1})})}},beforeRouteLeave(s,a,t){o&&(o.destroy(),o=null),$("#data_rst tbody").off("click",".cover"),$("#data_rst tbody").off("click",".btn-warning"),t()}},b=c('<section class="section"><div class="card overflow-auto"><div class="card-header text-center"><h2>Riwayat Peminjaman</h2></div><div class="card-body"><table class="table table-striped responsive-table" id="data_rst"><thead><tr><th>Judul Buku</th><th>Cover</th><th>Tanggal Pinjam</th><th>Tanggal Kembali</th><th>Status</th></tr></thead></table></div></div></section>',1),m=e("div",{class:"modal fade text-left",id:"imageModal",tabindex:"-1",role:"dialog","aria-labelledby":"imageModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-md",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h4",{class:"modal-title",id:"imageModalLabel"},"Preview"),e("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{"data-feather":"x"})])]),e("div",{class:"modal-body text-center"},[e("img",{id:"modalImage",src:"",class:"img-fluid",alt:"Preview"})]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[e("span",{class:"bx bx-x d-block d-sm-none"},"X"),e("span",{class:"d-none d-sm-block"},"Close")])])])])],-1);function h(s,a,t,l,g,p){return d(),n(r,null,[b,m],64)}const v=i(u,[["render",h]]);export{v as default};
//# sourceMappingURL=RentHistory-BGIVlEUa.js.map
