import{_ as Hs,c as Be,d as Ws,a as g,t as me,i as Je,g as qs,s as re,v as oe,n as Qt,e as ne,F as Ys,r as ks,o as He,x as zs,y as Xs}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";/*!
 * FilePond 4.31.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const $s=e=>e instanceof HTMLElement,js=(e,t=[],n=[])=>{const s={...e},i=[],o=[],r=()=>({...s}),a=()=>{const f=[...i];return i.length=0,f},l=()=>{const f=[...o];o.length=0,f.forEach(({type:I,data:h})=>{d(I,h)})},d=(f,I,h)=>{if(h&&!document.hidden){o.push({type:f,data:I});return}p[f]&&p[f](I),i.push({type:f,data:I})},c=(f,...I)=>m[f]?m[f](...I):null,u={getState:r,processActionQueue:a,processDispatchQueue:l,dispatch:d,query:c};let m={};t.forEach(f=>{m={...f(s),...m}});let p={};return n.forEach(f=>{p={...f(d,c,s),...p}}),u},Qs=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},q=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Oe=e=>{const t={};return q(e,n=>{Qs(t,n,e[n])}),t},X=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},Zs="http://www.w3.org/2000/svg",Ks=["svg","path"],Zt=e=>Ks.includes(e),ct=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const s=Zt(e)?document.createElementNS(Zs,e):document.createElement(e);return t&&(Zt(e)?X(s,"class",t):s.className=t),q(n,(i,o)=>{X(s,i,o)}),s},Js=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},ei=(e,t)=>(n,s)=>(typeof s<"u"?t.splice(s,0,n):t.push(n),n),ti=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),ni=typeof window<"u"&&typeof window.document<"u",jn=()=>ni,si=jn()?ct("svg"):{},ii="children"in si?e=>e.children.length:e=>e.childNodes.length,Qn=(e,t,n,s)=>{const i=n[0]||e.left,o=n[1]||e.top,r=i+e.width,a=o+e.height*(s[1]||1),l={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:o,right:r,bottom:a}};return t.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{Kt(l.inner,{...d.inner}),Kt(l.outer,{...d.outer})}),Jt(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,Jt(l.outer),l},Kt=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Jt=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Se=e=>typeof e=="number",ri=(e,t,n,s=.001)=>Math.abs(e-t)<s&&Math.abs(n)<s,oi=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let s=null,i=null,o=0,r=!1;const d=Oe({interpolate:(c,u)=>{if(r)return;if(!(Se(s)&&Se(i))){r=!0,o=0;return}const m=-(i-s)*e;o+=m/n,i+=o,o*=t,ri(i,s,o)||u?(i=s,o=0,r=!0,d.onupdate(i),d.oncomplete(i)):d.onupdate(i)},target:{set:c=>{if(Se(c)&&!Se(i)&&(i=c),s===null&&(s=c,i=c),s=c,i===s||typeof s>"u"){r=!0,o=0,d.onupdate(i),d.oncomplete(i);return}r=!1},get:()=>s},resting:{get:()=>r},onupdate:c=>{},oncomplete:c=>{}});return d},ai=e=>e<.5?2*e*e:-1+(4-2*e)*e,li=({duration:e=500,easing:t=ai,delay:n=0}={})=>{let s=null,i,o,r=!0,a=!1,l=null;const c=Oe({interpolate:(u,m)=>{r||l===null||(s===null&&(s=u),!(u-s<n)&&(i=u-s-n,i>=e||m?(i=1,o=a?0:1,c.onupdate(o*l),c.oncomplete(o*l),r=!0):(o=i/e,c.onupdate((i>=0?t(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:u=>{if(l===null){l=u,c.onupdate(u),c.oncomplete(u);return}u<l?(l=1,a=!0):(a=!1,l=u),r=!1,s=null}},resting:{get:()=>r},onupdate:u=>{},oncomplete:u=>{}});return c},en={spring:oi,tween:li},ci=(e,t,n)=>{const s=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof s=="string"?s:s.type,o=typeof s=="object"?{...s}:{};return en[i]?en[i](o):null},Ut=(e,t,n,s=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(o=>{let r=o,a=()=>n[o],l=d=>n[o]=d;typeof o=="object"&&(r=o.key,a=o.getter||a,l=o.setter||l),!(i[r]&&!s)&&(i[r]={get:a,set:l})})})},di=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:s})=>{const i={...t},o=[];return q(e,(r,a)=>{const l=ci(a);if(!l)return;l.onupdate=c=>{t[r]=c},l.target=i[r],Ut([{key:r,setter:c=>{l.target!==c&&(l.target=c)},getter:()=>t[r]}],[n,s],t,!0),o.push(l)}),{write:r=>{let a=document.hidden,l=!0;return o.forEach(d=>{d.resting||(l=!1),d.interpolate(r,a)}),l},destroy:()=>{}}},fi=e=>(t,n)=>{e.addEventListener(t,n)},ui=e=>(t,n)=>{e.removeEventListener(t,n)},Ei=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:s,viewState:i,view:o})=>{const r=[],a=fi(o.element),l=ui(o.element);return s.on=(d,c)=>{r.push({type:d,fn:c}),a(d,c)},s.off=(d,c)=>{r.splice(r.findIndex(u=>u.type===d&&u.fn===c),1),l(d,c)},{write:()=>!0,destroy:()=>{r.forEach(d=>{l(d.type,d.fn)})}}},pi=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{Ut(e,n,t)},Z=e=>e!=null,mi={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},_i=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:s,view:i})=>{const o={...t},r={};Ut(e,[n,s],t);const a=()=>[t.translateX||0,t.translateY||0],l=()=>[t.scaleX||0,t.scaleY||0],d=()=>i.rect?Qn(i.rect,i.childViews,a(),l()):null;return n.rect={get:d},s.rect={get:d},e.forEach(c=>{t[c]=typeof o[c]>"u"?mi[c]:o[c]}),{write:()=>{if(Ii(r,t))return gi(i.element,t),Object.assign(r,{...t}),!0},destroy:()=>{}}},Ii=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},gi=(e,{opacity:t,perspective:n,translateX:s,translateY:i,scaleX:o,scaleY:r,rotateX:a,rotateY:l,rotateZ:d,originX:c,originY:u,width:m,height:p})=>{let f="",I="";(Z(c)||Z(u))&&(I+=`transform-origin: ${c||0}px ${u||0}px;`),Z(n)&&(f+=`perspective(${n}px) `),(Z(s)||Z(i))&&(f+=`translate3d(${s||0}px, ${i||0}px, 0) `),(Z(o)||Z(r))&&(f+=`scale3d(${Z(o)?o:1}, ${Z(r)?r:1}, 1) `),Z(d)&&(f+=`rotateZ(${d}rad) `),Z(a)&&(f+=`rotateX(${a}rad) `),Z(l)&&(f+=`rotateY(${l}rad) `),f.length&&(I+=`transform:${f};`),Z(t)&&(I+=`opacity:${t};`,t===0&&(I+="visibility:hidden;"),t<1&&(I+="pointer-events:none;")),Z(p)&&(I+=`height:${p}px;`),Z(m)&&(I+=`width:${m}px;`);const h=e.elementCurrentStyle||"";(I.length!==h.length||I!==h)&&(e.style.cssText=I,e.elementCurrentStyle=I)},hi={styles:_i,listeners:Ei,animations:di,apis:pi},tn=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),z=({tag:e="div",name:t=null,attributes:n={},read:s=()=>{},write:i=()=>{},create:o=()=>{},destroy:r=()=>{},filterFrameActionsForChild:a=(p,f)=>f,didCreateView:l=()=>{},didWriteView:d=()=>{},ignoreRect:c=!1,ignoreRectUpdate:u=!1,mixins:m=[]}={})=>(p,f={})=>{const I=ct(e,`filepond--${t}`,n),h=window.getComputedStyle(I,null),R=tn();let E=null,_=!1;const O=[],y=[],M={},v={},D=[i],b=[s],G=[r],L=()=>I,P=()=>O.concat(),H=()=>M,w=B=>(Q,ge)=>Q(B,ge),F=()=>E||(E=Qn(R,O,[0,0],[1,1]),E),S=()=>h,A=()=>{E=null,O.forEach(ge=>ge._read()),!(u&&R.width&&R.height)&&tn(R,I,h);const Q={root:fe,props:f,rect:R};b.forEach(ge=>ge(Q))},C=(B,Q,ge)=>{let ve=Q.length===0;return D.forEach(ee=>{ee({props:f,root:fe,actions:Q,timestamp:B,shouldOptimize:ge})===!1&&(ve=!1)}),y.forEach(ee=>{ee.write(B)===!1&&(ve=!1)}),O.filter(ee=>!!ee.element.parentNode).forEach(ee=>{ee._write(B,a(ee,Q),ge)||(ve=!1)}),O.forEach((ee,Ke)=>{ee.element.parentNode||(fe.appendChild(ee.element,Ke),ee._read(),ee._write(B,a(ee,Q),ge),ve=!1)}),_=ve,d({props:f,root:fe,actions:Q,timestamp:B}),ve},N=()=>{y.forEach(B=>B.destroy()),G.forEach(B=>{B({root:fe,props:f})}),O.forEach(B=>B._destroy())},V={element:{get:L},style:{get:S},childViews:{get:P}},W={...V,rect:{get:F},ref:{get:H},is:B=>t===B,appendChild:Js(I),createChildView:w(p),linkView:B=>(O.push(B),B),unlinkView:B=>{O.splice(O.indexOf(B),1)},appendChildView:ei(I,O),removeChildView:ti(I,O),registerWriter:B=>D.push(B),registerReader:B=>b.push(B),registerDestroyer:B=>G.push(B),invalidateLayout:()=>I.layoutCalculated=!1,dispatch:p.dispatch,query:p.query},Ce={element:{get:L},childViews:{get:P},rect:{get:F},resting:{get:()=>_},isRectIgnored:()=>c,_read:A,_write:C,_destroy:N},Ze={...V,rect:{get:()=>R}};Object.keys(m).sort((B,Q)=>B==="styles"?1:Q==="styles"?-1:0).forEach(B=>{const Q=hi[B]({mixinConfig:m[B],viewProps:f,viewState:v,viewInternalAPI:W,viewExternalAPI:Ce,view:Oe(Ze)});Q&&y.push(Q)});const fe=Oe(W);o({root:fe,props:f});const Tt=ii(I);return O.forEach((B,Q)=>{fe.appendChild(B.element,Tt+Q)}),l(fe),Oe(Ce)},Ti=(e,t,n=60)=>{const s="__framePainter";if(window[s]){window[s].readers.push(e),window[s].writers.push(t);return}window[s]={readers:[e],writers:[t]};const i=window[s],o=1e3/n;let r=null,a=null,l=null,d=null;const c=()=>{document.hidden?(l=()=>window.setTimeout(()=>u(performance.now()),o),d=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),d=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{d&&d(),c(),u(performance.now())});const u=m=>{a=l(u),r||(r=m);const p=m-r;p<=o||(r=m-p%o,i.readers.forEach(f=>f()),i.writers.forEach(f=>f(m)))};return c(),u(performance.now()),{pause:()=>{d(a)}}},J=(e,t)=>({root:n,props:s,actions:i=[],timestamp:o,shouldOptimize:r})=>{i.filter(a=>e[a.type]).forEach(a=>e[a.type]({root:n,props:s,action:a.data,timestamp:o,shouldOptimize:r})),t&&t({root:n,props:s,actions:i,timestamp:o,shouldOptimize:r})},nn=(e,t)=>t.parentNode.insertBefore(e,t),sn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Et=e=>Array.isArray(e),he=e=>e==null,Ri=e=>e.trim(),pt=e=>""+e,Oi=(e,t=",")=>he(e)?[]:Et(e)?e:pt(e).split(t).map(Ri).filter(n=>n.length),Zn=e=>typeof e=="boolean",Kn=e=>Zn(e)?e:e==="true",K=e=>typeof e=="string",Jn=e=>Se(e)?e:K(e)?pt(e).replace(/[a-z]+/gi,""):0,lt=e=>parseInt(Jn(e),10),rn=e=>parseFloat(Jn(e)),Ve=e=>Se(e)&&isFinite(e)&&Math.floor(e)===e,on=(e,t=1e3)=>{if(Ve(e))return e;let n=pt(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),lt(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),lt(n)*t):lt(n)},ye=e=>typeof e=="function",Si=e=>{let t=self,n=e.split("."),s=null;for(;s=n.shift();)if(t=t[s],!t)return null;return t},an={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},yi=e=>{const t={};return t.url=K(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},q(an,n=>{t[n]=Di(n,e[n],an[n],t.timeout,t.headers)}),t.process=e.process||K(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Di=(e,t,n,s,i)=>{if(t===null)return null;if(typeof t=="function")return t;const o={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:s,onload:null,ondata:null,onerror:null};if(K(t))return o.url=t,o;if(Object.assign(o,t),K(o.headers)){const r=o.headers.split(/:(.+)/);o.headers={header:r[0],value:r[1]}}return o.withCredentials=Kn(o.withCredentials),o},Ai=e=>yi(e),wi=e=>e===null,j=e=>typeof e=="object"&&e!==null,Mi=e=>j(e)&&K(e.url)&&j(e.process)&&j(e.revert)&&j(e.restore)&&j(e.fetch),bt=e=>Et(e)?"array":wi(e)?"null":Ve(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Mi(e)?"api":typeof e,bi=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Li={array:Oi,boolean:Kn,int:e=>bt(e)==="bytes"?on(e):lt(e),number:rn,float:rn,bytes:on,string:e=>ye(e)?e:pt(e),function:e=>Si(e),serverapi:Ai,object:e=>{try{return JSON.parse(bi(e))}catch{return null}}},Pi=(e,t)=>Li[t](e),es=(e,t,n)=>{if(e===t)return e;let s=bt(e);if(s!==n){const i=Pi(e,n);if(s=bt(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},Ci=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:s=>{n=es(s,e,t)}}},vi=e=>{const t={};return q(e,n=>{const s=e[n];t[n]=Ci(s[0],s[1])}),Oe(t)},Ni=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:vi(e)}),mt=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Gi=(e,t)=>{const n={};return q(t,s=>{n[s]={get:()=>e.getState().options[s],set:i=>{e.dispatch(`SET_${mt(s,"_").toUpperCase()}`,{value:i})}}}),n},xi=e=>(t,n,s)=>{const i={};return q(e,o=>{const r=mt(o,"_").toUpperCase();i[`SET_${r}`]=a=>{try{s.options[o]=a.value}catch{}t(`DID_SET_${r}`,{value:s.options[o]})}}),i},Ui=e=>t=>{const n={};return q(e,s=>{n[`GET_${mt(s,"_").toUpperCase()}`]=i=>t.options[s]}),n},de={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Ft=()=>Math.random().toString(36).substring(2,11),Vt=(e,t)=>e.splice(t,1),Fi=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},_t=()=>{const e=[],t=(s,i)=>{Vt(e,e.findIndex(o=>o.event===s&&(o.cb===i||!i)))},n=(s,i,o)=>{e.filter(r=>r.event===s).map(r=>r.cb).forEach(r=>Fi(()=>r(...i),o))};return{fireSync:(s,...i)=>{n(s,i,!0)},fire:(s,...i)=>{n(s,i,!1)},on:(s,i)=>{e.push({event:s,cb:i})},onOnce:(s,i)=>{e.push({event:s,cb:(...o)=>{t(s,i),i(...o)}})},off:t}},ts=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(s=>!n.includes(s)).forEach(s=>Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s)))},Vi=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],te=e=>{const t={};return ts(e,t,Vi),t},Bi=e=>{e.forEach((t,n)=>{t.released&&Vt(e,n)})},x={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},$={INPUT:1,LIMBO:2,LOCAL:3},ns=e=>/[^0-9]+/.exec(e),ss=()=>ns(1.1.toLocaleString())[0],Hi=()=>{const e=ss(),t=1e3.toLocaleString();return t!=="1000"?ns(t)[0]:e==="."?",":"."},T={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Bt=[],ue=(e,t,n)=>new Promise((s,i)=>{const o=Bt.filter(a=>a.key===e).map(a=>a.cb);if(o.length===0){s(t);return}const r=o.shift();o.reduce((a,l)=>a.then(d=>l(d,n)),r(t,n)).then(a=>s(a)).catch(a=>i(a))}),Le=(e,t,n)=>Bt.filter(s=>s.key===e).map(s=>s.cb(t,n)),Wi=(e,t)=>Bt.push({key:e,cb:t}),qi=e=>Object.assign(Ne,e),dt=()=>({...Ne}),Yi=e=>{q(e,(t,n)=>{Ne[t]&&(Ne[t][0]=es(n,Ne[t][0],Ne[t][1]))})},Ne={id:[null,T.STRING],name:["filepond",T.STRING],disabled:[!1,T.BOOLEAN],className:[null,T.STRING],required:[!1,T.BOOLEAN],captureMethod:[null,T.STRING],allowSyncAcceptAttribute:[!0,T.BOOLEAN],allowDrop:[!0,T.BOOLEAN],allowBrowse:[!0,T.BOOLEAN],allowPaste:[!0,T.BOOLEAN],allowMultiple:[!1,T.BOOLEAN],allowReplace:[!0,T.BOOLEAN],allowRevert:[!0,T.BOOLEAN],allowRemove:[!0,T.BOOLEAN],allowProcess:[!0,T.BOOLEAN],allowReorder:[!1,T.BOOLEAN],allowDirectoriesOnly:[!1,T.BOOLEAN],storeAsFile:[!1,T.BOOLEAN],forceRevert:[!1,T.BOOLEAN],maxFiles:[null,T.INT],checkValidity:[!1,T.BOOLEAN],itemInsertLocationFreedom:[!0,T.BOOLEAN],itemInsertLocation:["before",T.STRING],itemInsertInterval:[75,T.INT],dropOnPage:[!1,T.BOOLEAN],dropOnElement:[!0,T.BOOLEAN],dropValidation:[!1,T.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],T.ARRAY],instantUpload:[!0,T.BOOLEAN],maxParallelUploads:[2,T.INT],allowMinimumUploadDuration:[!0,T.BOOLEAN],chunkUploads:[!1,T.BOOLEAN],chunkForce:[!1,T.BOOLEAN],chunkSize:[5e6,T.INT],chunkRetryDelays:[[500,1e3,3e3],T.ARRAY],server:[null,T.SERVER_API],fileSizeBase:[1e3,T.INT],labelFileSizeBytes:["bytes",T.STRING],labelFileSizeKilobytes:["KB",T.STRING],labelFileSizeMegabytes:["MB",T.STRING],labelFileSizeGigabytes:["GB",T.STRING],labelDecimalSeparator:[ss(),T.STRING],labelThousandsSeparator:[Hi(),T.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',T.STRING],labelInvalidField:["Field contains invalid files",T.STRING],labelFileWaitingForSize:["Waiting for size",T.STRING],labelFileSizeNotAvailable:["Size not available",T.STRING],labelFileCountSingular:["file in list",T.STRING],labelFileCountPlural:["files in list",T.STRING],labelFileLoading:["Loading",T.STRING],labelFileAdded:["Added",T.STRING],labelFileLoadError:["Error during load",T.STRING],labelFileRemoved:["Removed",T.STRING],labelFileRemoveError:["Error during remove",T.STRING],labelFileProcessing:["Uploading",T.STRING],labelFileProcessingComplete:["Upload complete",T.STRING],labelFileProcessingAborted:["Upload cancelled",T.STRING],labelFileProcessingError:["Error during upload",T.STRING],labelFileProcessingRevertError:["Error during revert",T.STRING],labelTapToCancel:["tap to cancel",T.STRING],labelTapToRetry:["tap to retry",T.STRING],labelTapToUndo:["tap to undo",T.STRING],labelButtonRemoveItem:["Remove",T.STRING],labelButtonAbortItemLoad:["Abort",T.STRING],labelButtonRetryItemLoad:["Retry",T.STRING],labelButtonAbortItemProcessing:["Cancel",T.STRING],labelButtonUndoItemProcessing:["Undo",T.STRING],labelButtonRetryItemProcessing:["Retry",T.STRING],labelButtonProcessItem:["Upload",T.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',T.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],oninit:[null,T.FUNCTION],onwarning:[null,T.FUNCTION],onerror:[null,T.FUNCTION],onactivatefile:[null,T.FUNCTION],oninitfile:[null,T.FUNCTION],onaddfilestart:[null,T.FUNCTION],onaddfileprogress:[null,T.FUNCTION],onaddfile:[null,T.FUNCTION],onprocessfilestart:[null,T.FUNCTION],onprocessfileprogress:[null,T.FUNCTION],onprocessfileabort:[null,T.FUNCTION],onprocessfilerevert:[null,T.FUNCTION],onprocessfile:[null,T.FUNCTION],onprocessfiles:[null,T.FUNCTION],onremovefile:[null,T.FUNCTION],onpreparefile:[null,T.FUNCTION],onupdatefiles:[null,T.FUNCTION],onreorderfiles:[null,T.FUNCTION],beforeDropFile:[null,T.FUNCTION],beforeAddFile:[null,T.FUNCTION],beforeRemoveFile:[null,T.FUNCTION],beforePrepareFile:[null,T.FUNCTION],stylePanelLayout:[null,T.STRING],stylePanelAspectRatio:[null,T.STRING],styleItemPanelAspectRatio:[null,T.STRING],styleButtonRemoveItemPosition:["left",T.STRING],styleButtonProcessItemPosition:["right",T.STRING],styleLoadIndicatorPosition:["right",T.STRING],styleProgressIndicatorPosition:["right",T.STRING],styleButtonRemoveItemAlign:[!1,T.BOOLEAN],files:[[],T.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],T.ARRAY]},De=(e,t)=>he(t)?e[0]||null:Ve(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),is=e=>{if(he(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Ee=e=>e.filter(t=>!t.archived),ki={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let et=null;const zi=()=>{if(et===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,et=t.files.length===1}catch{et=!1}return et},Xi=[x.LOAD_ERROR,x.PROCESSING_ERROR,x.PROCESSING_REVERT_ERROR],$i=[x.LOADING,x.PROCESSING,x.PROCESSING_QUEUED,x.INIT],ji=[x.PROCESSING_COMPLETE],Qi=e=>Xi.includes(e.status),Zi=e=>$i.includes(e.status),Ki=e=>ji.includes(e.status),ln=e=>j(e.options.server)&&(j(e.options.server.process)||ye(e.options.server.process)),Ji=e=>({GET_STATUS:()=>{const t=Ee(e.items),{EMPTY:n,ERROR:s,BUSY:i,IDLE:o,READY:r}=ki;return t.length===0?n:t.some(Qi)?s:t.some(Zi)?i:t.some(Ki)?r:o},GET_ITEM:t=>De(e.items,t),GET_ACTIVE_ITEM:t=>De(Ee(e.items),t),GET_ACTIVE_ITEMS:()=>Ee(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=De(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=De(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:is(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>Ee(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>Ee(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&zi()&&!ln(e),IS_ASYNC:()=>ln(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),er=e=>{const t=Ee(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},rs=(e,t,n)=>Math.max(Math.min(n,e),t),tr=(e,t,n)=>e.splice(t,0,n),nr=(e,t,n)=>he(t)?null:typeof n>"u"?(e.push(t),t):(n=rs(n,0,e.length),tr(e,n,t),t),Lt=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Qe=e=>`${e}`.split("/").pop().split("?").shift(),It=e=>e.split(".").pop(),sr=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},We=(e,t="")=>(t+e).slice(-t.length),os=(e=new Date)=>`${e.getFullYear()}-${We(e.getMonth()+1,"00")}-${We(e.getDate(),"00")}_${We(e.getHours(),"00")}-${We(e.getMinutes(),"00")}-${We(e.getSeconds(),"00")}`,Fe=(e,t,n=null,s=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),K(t)||(t=os()),t&&s===null&&It(t)?i.name=t:(s=s||sr(i.type),i.name=t+(s?"."+s:"")),i},ir=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,as=(e,t)=>{const n=ir();if(n){const s=new n;return s.append(e),s.getBlob(t)}return new Blob([e],{type:t})},rr=(e,t)=>{const n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return as(n,t)},ls=e=>(/^data:(.+);/.exec(e)||[])[1]||null,or=e=>e.split(",")[1].replace(/\s/g,""),ar=e=>atob(or(e)),lr=e=>{const t=ls(e),n=ar(e);return rr(n,t)},cr=(e,t,n)=>Fe(lr(e),t,null,n),dr=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},fr=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},ur=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Ht=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let s of n){const i=dr(s);if(i){t.name=i;continue}const o=fr(s);if(o){t.size=o;continue}const r=ur(s);if(r){t.source=r;continue}}return t},Er=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,s=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const a=t.source;r.fire("init",a),a instanceof File?r.fire("load",a):a instanceof Blob?r.fire("load",Fe(a,a.name)):Lt(a)?r.fire("load",cr(a)):o(a)},o=a=>{if(!e){r.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(a,l=>{t.duration=Date.now()-t.timestamp,t.complete=!0,l instanceof Blob&&(l=Fe(l,l.name||Qe(a))),r.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{r.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,d,c)=>{if(c&&(t.size=c),t.duration=Date.now()-t.timestamp,!l){t.progress=null;return}t.progress=d/c,r.fire("progress",t.progress)},()=>{r.fire("abort")},l=>{const d=Ht(typeof l=="string"?l:l.headers);r.fire("meta",{size:t.size||d.size,filename:d.name,source:d.source})})},r={..._t(),setSource:a=>t.source=a,getProgress:n,abort:s,load:i};return r},cn=e=>/GET|HEAD/.test(e),Ae=(e,t,n)=>{const s={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,r.abort()}};let i=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),cn(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const r=new XMLHttpRequest,a=cn(n.method)?r:r.upload;return a.onprogress=l=>{i||s.onprogress(l.lengthComputable,l.loaded,l.total)},r.onreadystatechange=()=>{r.readyState<2||r.readyState===4&&r.status===0||o||(o=!0,s.onheaders(r))},r.onload=()=>{r.status>=200&&r.status<300?s.onload(r):s.onerror(r)},r.onerror=()=>s.onerror(r),r.onabort=()=>{i=!0,s.onabort()},r.ontimeout=()=>s.ontimeout(r),r.open(n.method,t,!0),Ve(n.timeout)&&(r.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const d=unescape(encodeURIComponent(n.headers[l]));r.setRequestHeader(l,d)}),n.responseType&&(r.responseType=n.responseType),n.withCredentials&&(r.withCredentials=!0),r.send(e),s},Y=(e,t,n,s)=>({type:e,code:t,body:n,headers:s}),we=e=>t=>{e(Y("error",0,"Timeout",t.getAllResponseHeaders()))},dn=e=>/\?/.test(e),ke=(...e)=>{let t="";return e.forEach(n=>{t+=dn(t)&&dn(n)?n.replace(/\?/,"&"):n}),t},Rt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!K(t.url))return null;const n=t.onload||(i=>i),s=t.onerror||(i=>null);return(i,o,r,a,l,d)=>{const c=Ae(i,ke(e,t.url),{...t,responseType:"blob"});return c.onload=u=>{const m=u.getAllResponseHeaders(),p=Ht(m).name||Qe(i);o(Y("load",u.status,t.method==="HEAD"?null:Fe(n(u.response),p),m))},c.onerror=u=>{r(Y("error",u.status,s(u.response)||u.statusText,u.getAllResponseHeaders()))},c.onheaders=u=>{d(Y("headers",u.status,null,u.getAllResponseHeaders()))},c.ontimeout=we(r),c.onprogress=a,c.onabort=l,c}},ae={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},pr=(e,t,n,s,i,o,r,a,l,d,c)=>{const u=[],{chunkTransferId:m,chunkServer:p,chunkSize:f,chunkRetryDelays:I}=c,h={serverId:m,aborted:!1},R=t.ondata||(w=>w),E=t.onload||((w,F)=>F==="HEAD"?w.getResponseHeader("Upload-Offset"):w.response),_=t.onerror||(w=>null),O=w=>{const F=new FormData;j(i)&&F.append(n,JSON.stringify(i));const S=typeof t.headers=="function"?t.headers(s,i):{...t.headers,"Upload-Length":s.size},A={...t,headers:S},C=Ae(R(F),ke(e,t.url),A);C.onload=N=>w(E(N,A.method)),C.onerror=N=>r(Y("error",N.status,_(N.response)||N.statusText,N.getAllResponseHeaders())),C.ontimeout=we(r)},y=w=>{const F=ke(e,p.url,h.serverId),A={headers:typeof t.headers=="function"?t.headers(h.serverId):{...t.headers},method:"HEAD"},C=Ae(null,F,A);C.onload=N=>w(E(N,A.method)),C.onerror=N=>r(Y("error",N.status,_(N.response)||N.statusText,N.getAllResponseHeaders())),C.ontimeout=we(r)},M=Math.floor(s.size/f);for(let w=0;w<=M;w++){const F=w*f,S=s.slice(F,F+f,"application/offset+octet-stream");u[w]={index:w,size:S.size,offset:F,data:S,file:s,progress:0,retries:[...I],status:ae.QUEUED,error:null,request:null,timeout:null}}const v=()=>o(h.serverId),D=w=>w.status===ae.QUEUED||w.status===ae.ERROR,b=w=>{if(h.aborted)return;if(w=w||u.find(D),!w){u.every(V=>V.status===ae.COMPLETE)&&v();return}w.status=ae.PROCESSING,w.progress=null;const F=p.ondata||(V=>V),S=p.onerror||(V=>null),A=ke(e,p.url,h.serverId),C=typeof p.headers=="function"?p.headers(w):{...p.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":w.offset,"Upload-Length":s.size,"Upload-Name":s.name},N=w.request=Ae(F(w.data),A,{...p,headers:C});N.onload=()=>{w.status=ae.COMPLETE,w.request=null,P()},N.onprogress=(V,W,Ce)=>{w.progress=V?W:null,L()},N.onerror=V=>{w.status=ae.ERROR,w.request=null,w.error=S(V.response)||V.statusText,G(w)||r(Y("error",V.status,S(V.response)||V.statusText,V.getAllResponseHeaders()))},N.ontimeout=V=>{w.status=ae.ERROR,w.request=null,G(w)||we(r)(V)},N.onabort=()=>{w.status=ae.QUEUED,w.request=null,l()}},G=w=>w.retries.length===0?!1:(w.status=ae.WAITING,clearTimeout(w.timeout),w.timeout=setTimeout(()=>{b(w)},w.retries.shift()),!0),L=()=>{const w=u.reduce((S,A)=>S===null||A.progress===null?null:S+A.progress,0);if(w===null)return a(!1,0,0);const F=u.reduce((S,A)=>S+A.size,0);a(!0,w,F)},P=()=>{u.filter(F=>F.status===ae.PROCESSING).length>=1||b()},H=()=>{u.forEach(w=>{clearTimeout(w.timeout),w.request&&w.request.abort()})};return h.serverId?y(w=>{h.aborted||(u.filter(F=>F.offset<w).forEach(F=>{F.status=ae.COMPLETE,F.progress=F.size}),P())}):O(w=>{h.aborted||(d(w),h.serverId=w,P())}),{abort:()=>{h.aborted=!0,H()}}},mr=(e,t,n,s)=>(i,o,r,a,l,d,c)=>{if(!i)return;const u=s.chunkUploads,m=u&&i.size>s.chunkSize,p=u&&(m||s.chunkForce);if(i instanceof Blob&&p)return pr(e,t,n,i,o,r,a,l,d,c,s);const f=t.ondata||(y=>y),I=t.onload||(y=>y),h=t.onerror||(y=>null),R=typeof t.headers=="function"?t.headers(i,o)||{}:{...t.headers},E={...t,headers:R};var _=new FormData;j(o)&&_.append(n,JSON.stringify(o)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(y=>{_.append(n,y.file,y.name===null?y.file.name:`${y.name}${y.file.name}`)});const O=Ae(f(_),ke(e,t.url),E);return O.onload=y=>{r(Y("load",y.status,I(y.response),y.getAllResponseHeaders()))},O.onerror=y=>{a(Y("error",y.status,h(y.response)||y.statusText,y.getAllResponseHeaders()))},O.ontimeout=we(a),O.onprogress=l,O.onabort=d,O},_r=(e="",t,n,s)=>typeof t=="function"?(...i)=>t(n,...i,s):!t||!K(t.url)?null:mr(e,t,n,s),qe=(e="",t)=>{if(typeof t=="function")return t;if(!t||!K(t.url))return(i,o)=>o();const n=t.onload||(i=>i),s=t.onerror||(i=>null);return(i,o,r)=>{const a=Ae(i,e+t.url,t);return a.onload=l=>{o(Y("load",l.status,n(l.response),l.getAllResponseHeaders()))},a.onerror=l=>{r(Y("error",l.status,s(l.response)||l.statusText,l.getAllResponseHeaders()))},a.ontimeout=we(r),a}},cs=(e=0,t=1)=>e+Math.random()*(t-e),Ir=(e,t=1e3,n=0,s=25,i=250)=>{let o=null;const r=Date.now(),a=()=>{let l=Date.now()-r,d=cs(s,i);l+d>t&&(d=l+d-t);let c=l/t;if(c>=1||document.hidden){e(1);return}e(c),o=setTimeout(a,d)};return t>0&&a(),{clear:()=>{clearTimeout(o)}}},gr=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:s}=t,i=(c,u)=>{const m=()=>{n.duration===0||n.progress===null||d.fire("progress",d.getProgress())},p=()=>{n.complete=!0,d.fire("load-perceived",n.response.body)};d.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=Ir(f=>{n.perceivedProgress=f,n.perceivedDuration=Date.now()-n.timestamp,m(),n.response&&n.perceivedProgress===1&&!n.complete&&p()},s?cs(750,1500):0),n.request=e(c,u,f=>{n.response=j(f)?f:{type:"load",code:200,body:`${f}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,d.fire("load",n.response.body),(!s||s&&n.perceivedProgress===1)&&p()},f=>{n.perceivedPerformanceUpdater.clear(),d.fire("error",j(f)?f:{type:"error",code:0,body:`${f}`})},(f,I,h)=>{n.duration=Date.now()-n.timestamp,n.progress=f?I/h:null,m()},()=>{n.perceivedPerformanceUpdater.clear(),d.fire("abort",n.response?n.response.body:null)},f=>{d.fire("transfer",f)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},r=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},a=s?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=s?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,d={..._t(),process:i,abort:o,getProgress:a,getDuration:l,reset:r};return d},ds=e=>e.substring(0,e.lastIndexOf("."))||e,hr=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||Lt(e)?t[0]=e.name||os():Lt(e)?(t[1]=e.length,t[2]=ls(e)):K(e)&&(t[0]=Qe(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Me=e=>!!(e instanceof File||e instanceof Blob&&e.name),fs=e=>{if(!j(e))return e;const t=Et(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n];t[n]=s&&j(s)?fs(s):s}return t},Tr=(e=null,t=null,n=null)=>{const s=Ft(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?x.PROCESSING_COMPLETE:x.INIT,activeLoader:null,activeProcessor:null};let o=null;const r={},a=D=>i.status=D,l=(D,...b)=>{i.released||i.frozen||M.fire(D,...b)},d=()=>It(i.file.name),c=()=>i.file.type,u=()=>i.file.size,m=()=>i.file,p=(D,b,G)=>{if(i.source=D,M.fireSync("init"),i.file){M.fireSync("load-skip");return}i.file=hr(D),b.on("init",()=>{l("load-init")}),b.on("meta",L=>{i.file.size=L.size,i.file.filename=L.filename,L.source&&(e=$.LIMBO,i.serverFileReference=L.source,i.status=x.PROCESSING_COMPLETE),l("load-meta")}),b.on("progress",L=>{a(x.LOADING),l("load-progress",L)}),b.on("error",L=>{a(x.LOAD_ERROR),l("load-request-error",L)}),b.on("abort",()=>{a(x.INIT),l("load-abort")}),b.on("load",L=>{i.activeLoader=null;const P=w=>{i.file=Me(w)?w:i.file,e===$.LIMBO&&i.serverFileReference?a(x.PROCESSING_COMPLETE):a(x.IDLE),l("load")},H=w=>{i.file=L,l("load-meta"),a(x.LOAD_ERROR),l("load-file-error",w)};if(i.serverFileReference){P(L);return}G(L,P,H)}),b.setSource(D),i.activeLoader=b,b.load()},f=()=>{i.activeLoader&&i.activeLoader.load()},I=()=>{if(i.activeLoader){i.activeLoader.abort();return}a(x.INIT),l("load-abort")},h=(D,b)=>{if(i.processingAborted){i.processingAborted=!1;return}if(a(x.PROCESSING),o=null,!(i.file instanceof Blob)){M.on("load",()=>{h(D,b)});return}D.on("load",P=>{i.transferId=null,i.serverFileReference=P}),D.on("transfer",P=>{i.transferId=P}),D.on("load-perceived",P=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=P,a(x.PROCESSING_COMPLETE),l("process-complete",P)}),D.on("start",()=>{l("process-start")}),D.on("error",P=>{i.activeProcessor=null,a(x.PROCESSING_ERROR),l("process-error",P)}),D.on("abort",P=>{i.activeProcessor=null,i.serverFileReference=P,a(x.IDLE),l("process-abort"),o&&o()}),D.on("progress",P=>{l("process-progress",P)});const G=P=>{i.archived||D.process(P,{...r})},L=console.error;b(i.file,G,L),i.activeProcessor=D},R=()=>{i.processingAborted=!1,a(x.PROCESSING_QUEUED)},E=()=>new Promise(D=>{if(!i.activeProcessor){i.processingAborted=!0,a(x.IDLE),l("process-abort"),D();return}o=()=>{D()},i.activeProcessor.abort()}),_=(D,b)=>new Promise((G,L)=>{const P=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(P===null){G();return}D(P,()=>{i.serverFileReference=null,i.transferId=null,G()},H=>{if(!b){G();return}a(x.PROCESSING_REVERT_ERROR),l("process-revert-error"),L(H)}),a(x.IDLE),l("process-revert")}),O=(D,b,G)=>{const L=D.split("."),P=L[0],H=L.pop();let w=r;L.forEach(F=>w=w[F]),JSON.stringify(w[H])!==JSON.stringify(b)&&(w[H]=b,l("metadata-update",{key:P,value:r[P],silent:G}))},M={id:{get:()=>s},origin:{get:()=>e,set:D=>e=D},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>ds(i.file.name)},fileExtension:{get:d},fileType:{get:c},fileSize:{get:u},file:{get:m},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:D=>fs(D?r[D]:r),setMetadata:(D,b,G)=>{if(j(D)){const L=D;return Object.keys(L).forEach(P=>{O(P,L[P],b)}),D}return O(D,b,G),b},extend:(D,b)=>v[D]=b,abortLoad:I,retryLoad:f,requestProcessing:R,abortProcessing:E,load:p,process:h,revert:_,..._t(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived},setFile:D=>i.file=D},v=Oe(M);return v},Rr=(e,t)=>he(t)?0:K(t)?e.findIndex(n=>n.id===t):-1,fn=(e,t)=>{const n=Rr(e,t);if(!(n<0))return e[n]||null},un=(e,t,n,s,i,o)=>{const r=Ae(null,e,{method:"GET",responseType:"blob"});return r.onload=a=>{const l=a.getAllResponseHeaders(),d=Ht(l).name||Qe(e);t(Y("load",a.status,Fe(a.response,d),l))},r.onerror=a=>{n(Y("error",a.status,a.statusText,a.getAllResponseHeaders()))},r.onheaders=a=>{o(Y("headers",a.status,null,a.getAllResponseHeaders()))},r.ontimeout=we(n),r.onprogress=s,r.onabort=i,r},En=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Or=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&En(location.href)!==En(e),tt=e=>(...t)=>ye(e)?e(...t):e,Sr=e=>!Me(e.file),Ot=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:Ee(t.items)})},0)},pn=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const s=e(...t);if(s==null)return n(!0);if(typeof s=="boolean")return n(s);typeof s.then=="function"&&s.then(n)}),St=(e,t)=>{e.items.sort((n,s)=>t(te(n),te(s)))},le=(e,t)=>({query:n,success:s=()=>{},failure:i=()=>{},...o}={})=>{const r=De(e.items,n);if(!r){i({error:Y("error",0,"Item not found"),file:null});return}t(r,s,i,o||{})},yr=(e,t,n)=>({ABORT_ALL:()=>{Ee(n.items).forEach(s=>{s.freeze(),s.abortLoad(),s.abortProcessing()})},DID_SET_FILES:({value:s=[]})=>{const i=s.map(r=>({source:r.source?r.source:r,options:r.options}));let o=Ee(n.items);o.forEach(r=>{i.find(a=>a.source===r.source||a.source===r.file)||e("REMOVE_ITEM",{query:r,remove:!1})}),o=Ee(n.items),i.forEach((r,a)=>{o.find(l=>l.source===r.source||l.file===r.source)||e("ADD_ITEM",{...r,interactionMethod:de.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:s,action:i,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const r=fn(n.items,s);if(!t("IS_ASYNC")){ue("SHOULD_PREPARE_OUTPUT",!1,{item:r,query:t,action:i,change:o}).then(c=>{const u=t("GET_BEFORE_PREPARE_FILE");u&&(c=u(r,c)),c&&e("REQUEST_PREPARE_OUTPUT",{query:s,item:r,success:m=>{e("DID_PREPARE_OUTPUT",{id:s,file:m})}},!0)});return}r.origin===$.LOCAL&&e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.source});const a=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:s})},32)},l=c=>{r.revert(qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c?a:()=>{}).catch(()=>{})},d=c=>{r.abortProcessing().then(c?a:()=>{})};if(r.status===x.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(r.status===x.PROCESSING)return d(n.options.instantUpload);n.options.instantUpload&&a()},0))},MOVE_ITEM:({query:s,index:i})=>{const o=De(n.items,s);if(!o)return;const r=n.items.indexOf(o);i=rs(i,0,n.items.length-1),r!==i&&n.items.splice(i,0,n.items.splice(r,1)[0])},SORT:({compare:s})=>{St(n,s),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:s,index:i,interactionMethod:o,success:r=()=>{},failure:a=()=>{}})=>{let l=i;if(i===-1||typeof i>"u"){const p=t("GET_ITEM_INSERT_LOCATION"),f=t("GET_TOTAL_ITEMS");l=p==="before"?0:f}const d=t("GET_IGNORED_FILES"),c=p=>Me(p)?!d.includes(p.name.toLowerCase()):!he(p),m=s.filter(c).map(p=>new Promise((f,I)=>{e("ADD_ITEM",{interactionMethod:o,source:p.source||p,success:f,failure:I,index:l++,options:p.options||{}})}));Promise.all(m).then(r).catch(a)},ADD_ITEM:({source:s,index:i=-1,interactionMethod:o,success:r=()=>{},failure:a=()=>{},options:l={}})=>{if(he(s)){a({error:Y("error",0,"No source"),file:null});return}if(Me(s)&&n.options.ignoredFiles.includes(s.name.toLowerCase()))return;if(!er(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const E=Y("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:s,error:E}),a({error:E,file:null});return}const R=Ee(n.items)[0];if(R.status===x.PROCESSING_COMPLETE||R.status===x.PROCESSING_REVERT_ERROR){const E=t("GET_FORCE_REVERT");if(R.revert(qe(n.options.server.url,n.options.server.revert),E).then(()=>{E&&e("ADD_ITEM",{source:s,index:i,interactionMethod:o,success:r,failure:a,options:l})}).catch(()=>{}),E)return}e("REMOVE_ITEM",{query:R.id})}const d=l.type==="local"?$.LOCAL:l.type==="limbo"?$.LIMBO:$.INPUT,c=Tr(d,d===$.INPUT?null:s,l.file);Object.keys(l.metadata||{}).forEach(R=>{c.setMetadata(R,l.metadata[R])}),Le("DID_CREATE_ITEM",c,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=u==="before"?-1:n.items.length),nr(n.items,c,i),ye(u)&&s&&St(n,u);const m=c.id;c.on("init",()=>{e("DID_INIT_ITEM",{id:m})}),c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:m})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:m})}),c.on("load-progress",R=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:m,progress:R})}),c.on("load-request-error",R=>{const E=tt(n.options.labelFileLoadError)(R);if(R.code>=400&&R.code<500){e("DID_THROW_ITEM_INVALID",{id:m,error:R,status:{main:E,sub:`${R.code} (${R.body})`}}),a({error:R,file:te(c)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:m,error:R,status:{main:E,sub:n.options.labelTapToRetry}})}),c.on("load-file-error",R=>{e("DID_THROW_ITEM_INVALID",{id:m,error:R.status,status:R.status}),a({error:R.status,file:te(c)})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:m})}),c.on("load-skip",()=>{c.on("metadata-update",R=>{Me(c.file)&&e("DID_UPDATE_ITEM_METADATA",{id:m,change:R})}),e("COMPLETE_LOAD_ITEM",{query:m,item:c,data:{source:s,success:r}})}),c.on("load",()=>{const R=E=>{if(!E){e("REMOVE_ITEM",{query:m});return}c.on("metadata-update",_=>{e("DID_UPDATE_ITEM_METADATA",{id:m,change:_})}),ue("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t}).then(_=>{const O=t("GET_BEFORE_PREPARE_FILE");O&&(_=O(c,_));const y=()=>{e("COMPLETE_LOAD_ITEM",{query:m,item:c,data:{source:s,success:r}}),Ot(e,n)};if(_){e("REQUEST_PREPARE_OUTPUT",{query:m,item:c,success:M=>{e("DID_PREPARE_OUTPUT",{id:m,file:M}),y()}},!0);return}y()})};ue("DID_LOAD_ITEM",c,{query:t,dispatch:e}).then(()=>{pn(t("GET_BEFORE_ADD_FILE"),te(c)).then(R)}).catch(E=>{if(!E||!E.error||!E.status)return R(!1);e("DID_THROW_ITEM_INVALID",{id:m,error:E.error,status:E.status})})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:m})}),c.on("process-progress",R=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:m,progress:R})}),c.on("process-error",R=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:m,error:R,status:{main:tt(n.options.labelFileProcessingError)(R),sub:n.options.labelTapToRetry}})}),c.on("process-revert-error",R=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:m,error:R,status:{main:tt(n.options.labelFileProcessingRevertError)(R),sub:n.options.labelTapToRetry}})}),c.on("process-complete",R=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:m,error:null,serverFileReference:R}),e("DID_DEFINE_VALUE",{id:m,value:R})}),c.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:m})}),c.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:m}),e("DID_DEFINE_VALUE",{id:m,value:null})}),e("DID_ADD_ITEM",{id:m,index:i,interactionMethod:o}),Ot(e,n);const{url:p,load:f,restore:I,fetch:h}=n.options.server||{};c.load(s,Er(d===$.INPUT?K(s)&&Or(s)&&h?Rt(p,h):un:d===$.LIMBO?Rt(p,I):Rt(p,f)),(R,E,_)=>{ue("LOAD_FILE",R,{query:t}).then(E).catch(_)})},REQUEST_PREPARE_OUTPUT:({item:s,success:i,failure:o=()=>{}})=>{const r={error:Y("error",0,"Item not found"),file:null};if(s.archived)return o(r);ue("PREPARE_OUTPUT",s.file,{query:t,item:s}).then(a=>{ue("COMPLETE_PREPARE_OUTPUT",a,{query:t,item:s}).then(l=>{if(s.archived)return o(r);i(l)})})},COMPLETE_LOAD_ITEM:({item:s,data:i})=>{const{success:o,source:r}=i,a=t("GET_ITEM_INSERT_LOCATION");if(ye(a)&&r&&St(n,a),e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.origin===$.INPUT?null:r}),o(te(s)),s.origin===$.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:s.id});return}if(s.origin===$.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:s.id,error:null,serverFileReference:r}),e("DID_DEFINE_VALUE",{id:s.id,value:s.serverId||r});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:s.id})},RETRY_ITEM_LOAD:le(n,s=>{s.retryLoad()}),REQUEST_ITEM_PREPARE:le(n,(s,i,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:s.id,item:s,success:r=>{e("DID_PREPARE_OUTPUT",{id:s.id,file:r}),i({file:s,output:r})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:le(n,(s,i,o)=>{if(!(s.status===x.IDLE||s.status===x.PROCESSING_ERROR)){const a=()=>e("REQUEST_ITEM_PROCESSING",{query:s,success:i,failure:o}),l=()=>document.hidden?a():setTimeout(a,32);s.status===x.PROCESSING_COMPLETE||s.status===x.PROCESSING_REVERT_ERROR?s.revert(qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(()=>{}):s.status===x.PROCESSING&&s.abortProcessing().then(l);return}s.status!==x.PROCESSING_QUEUED&&(s.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:s.id}),e("PROCESS_ITEM",{query:s,success:i,failure:o},!0))}),PROCESS_ITEM:le(n,(s,i,o)=>{const r=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",x.PROCESSING).length===r){n.processingQueue.push({id:s.id,success:i,failure:o});return}if(s.status===x.PROCESSING)return;const l=()=>{const c=n.processingQueue.shift();if(!c)return;const{id:u,success:m,failure:p}=c,f=De(n.items,u);if(!f||f.archived){l();return}e("PROCESS_ITEM",{query:u,success:m,failure:p},!0)};s.onOnce("process-complete",()=>{i(te(s)),l();const c=n.options.server;if(n.options.instantUpload&&s.origin===$.LOCAL&&ye(c.remove)){const p=()=>{};s.origin=$.LIMBO,n.options.server.remove(s.source,p,p)}t("GET_ITEMS_BY_STATUS",x.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),s.onOnce("process-error",c=>{o({error:c,file:te(s)}),l()});const d=n.options;s.process(gr(_r(d.server.url,d.server.process,d.name,{chunkTransferId:s.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,u,m)=>{ue("PREPARE_OUTPUT",c,{query:t,item:s}).then(p=>{e("DID_PREPARE_OUTPUT",{id:s.id,file:p}),u(p)}).catch(m)})}),RETRY_ITEM_PROCESSING:le(n,s=>{e("REQUEST_ITEM_PROCESSING",{query:s})}),REQUEST_REMOVE_ITEM:le(n,s=>{pn(t("GET_BEFORE_REMOVE_FILE"),te(s)).then(i=>{i&&e("REMOVE_ITEM",{query:s})})}),RELEASE_ITEM:le(n,s=>{s.release()}),REMOVE_ITEM:le(n,(s,i,o,r)=>{const a=()=>{const d=s.id;fn(n.items,d).archive(),e("DID_REMOVE_ITEM",{error:null,id:d,item:s}),Ot(e,n),i(te(s))},l=n.options.server;s.origin===$.LOCAL&&l&&ye(l.remove)&&r.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:s.id}),l.remove(s.source,()=>a(),d=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:s.id,error:Y("error",0,d,null),status:{main:tt(n.options.labelFileRemoveError)(d),sub:n.options.labelTapToRetry}})})):((r.revert&&s.origin!==$.LOCAL&&s.serverId!==null||n.options.chunkUploads&&s.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&s.revert(qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:le(n,s=>{s.abortLoad()}),ABORT_ITEM_PROCESSING:le(n,s=>{if(s.serverId){e("REVERT_ITEM_PROCESSING",{id:s.id});return}s.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:s.id})})}),REQUEST_REVERT_ITEM_PROCESSING:le(n,s=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:s});return}const i=a=>{a&&e("REVERT_ITEM_PROCESSING",{query:s})},o=t("GET_BEFORE_REMOVE_FILE");if(!o)return i(!0);const r=o(te(s));if(r==null)return i(!0);if(typeof r=="boolean")return i(r);typeof r.then=="function"&&r.then(i)}),REVERT_ITEM_PROCESSING:le(n,s=>{s.revert(qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||Sr(s))&&e("REMOVE_ITEM",{query:s.id})}).catch(()=>{})}),SET_OPTIONS:({options:s})=>{const i=Object.keys(s),o=Dr.filter(a=>i.includes(a));[...o,...Object.keys(s).filter(a=>!o.includes(a))].forEach(a=>{e(`SET_${mt(a,"_").toUpperCase()}`,{value:s[a]})})}}),Dr=["server"],Wt=e=>e,Te=e=>document.createElement(e),k=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},mn=(e,t,n,s)=>{const i=(s%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},Ar=(e,t,n,s,i,o)=>{const r=mn(e,t,n,i),a=mn(e,t,n,s);return["M",r.x,r.y,"A",n,n,0,o,0,a.x,a.y].join(" ")},wr=(e,t,n,s,i)=>{let o=1;return i>s&&i-s<=.5&&(o=0),s>i&&s-i>=.5&&(o=0),Ar(e,t,n,Math.min(.9999,s)*360,Math.min(.9999,i)*360,o)},Mr=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=ct("svg");e.ref.path=ct("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},br=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(X(e.ref.path,"stroke-width"),10),s=e.rect.element.width*.5;let i=0,o=0;t.spin?(i=0,o=.5):(i=0,o=t.progress);const r=wr(s,s,s-n,i,o);X(e.ref.path,"d",r),X(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},_n=z({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Mr,write:br,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Lr=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},Pr=({root:e,props:t})=>{const{isDisabled:n}=t,s=e.query("GET_DISABLED")||t.opacity===0;s&&!n?(t.isDisabled=!0,X(e.element,"disabled","disabled")):!s&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},us=z({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Lr,write:Pr}),Es=(e,t=".",n=1e3,s={})=>{const{labelBytes:i="bytes",labelKilobytes:o="KB",labelMegabytes:r="MB",labelGigabytes:a="GB"}=s;e=Math.round(Math.abs(e));const l=n,d=n*n,c=n*n*n;return e<l?`${e} ${i}`:e<d?`${Math.floor(e/l)} ${o}`:e<c?`${In(e/d,1,t)} ${r}`:`${In(e/c,2,t)} ${a}`},In=(e,t,n)=>e.toFixed(t).split(".").filter(s=>s!=="0").join(n),Cr=({root:e,props:t})=>{const n=Te("span");n.className="filepond--file-info-main",X(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const s=Te("span");s.className="filepond--file-info-sub",e.appendChild(s),e.ref.fileSize=s,k(s,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),k(n,Wt(e.query("GET_ITEM_NAME",t.id)))},Pt=({root:e,props:t})=>{k(e.ref.fileSize,Es(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),k(e.ref.fileName,Wt(e.query("GET_ITEM_NAME",t.id)))},gn=({root:e,props:t})=>{if(Ve(e.query("GET_ITEM_SIZE",t.id))){Pt({root:e,props:t});return}k(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},vr=z({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:J({DID_LOAD_ITEM:Pt,DID_UPDATE_ITEM_META:Pt,DID_THROW_ITEM_LOAD_ERROR:gn,DID_THROW_ITEM_INVALID:gn}),didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},create:Cr,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),ps=e=>Math.round(e*100),Nr=({root:e})=>{const t=Te("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Te("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,ms({root:e,action:{progress:null}})},ms=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${ps(t.progress)}%`;k(e.ref.main,n),k(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Gr=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${ps(t.progress)}%`;k(e.ref.main,n),k(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},xr=({root:e})=>{k(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),k(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Ur=({root:e})=>{k(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),k(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Fr=({root:e})=>{k(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),k(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},hn=({root:e})=>{k(e.ref.main,""),k(e.ref.sub,"")},Ye=({root:e,action:t})=>{k(e.ref.main,t.status.main),k(e.ref.sub,t.status.sub)},Vr=z({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:J({DID_LOAD_ITEM:hn,DID_REVERT_ITEM_PROCESSING:hn,DID_REQUEST_ITEM_PROCESSING:xr,DID_ABORT_ITEM_PROCESSING:Ur,DID_COMPLETE_ITEM_PROCESSING:Fr,DID_UPDATE_ITEM_PROCESS_PROGRESS:Gr,DID_UPDATE_ITEM_LOAD_PROGRESS:ms,DID_THROW_ITEM_LOAD_ERROR:Ye,DID_THROW_ITEM_INVALID:Ye,DID_THROW_ITEM_PROCESSING_ERROR:Ye,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Ye,DID_THROW_ITEM_REMOVE_ERROR:Ye}),didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},create:Nr,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Ct={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},vt=[];q(Ct,e=>{vt.push(e)});const ie=e=>{if(Nt(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Br=e=>e.ref.buttonAbortItemLoad.rect.element.width,nt=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Hr=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Wr=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),qr=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Nt=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Yr={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Wr},processProgressIndicator:{opacity:0,align:qr},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Tn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ie},status:{translateX:ie}},yt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ge={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ie},status:{translateX:ie,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ie},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Nt},info:{translateX:ie},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Nt},buttonRemoveItem:{opacity:1},info:{translateX:ie},status:{opacity:1,translateX:ie}},DID_LOAD_ITEM:Tn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ie},status:{translateX:ie}},DID_START_ITEM_PROCESSING:yt,DID_REQUEST_ITEM_PROCESSING:yt,DID_UPDATE_ITEM_PROCESS_PROGRESS:yt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ie}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ie},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Tn},kr=z({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),zr=({root:e,props:t})=>{const n=Object.keys(Ct).reduce((f,I)=>(f[I]={...Ct[I]},f),{}),{id:s}=t,i=e.query("GET_ALLOW_REVERT"),o=e.query("GET_ALLOW_REMOVE"),r=e.query("GET_ALLOW_PROCESS"),a=e.query("GET_INSTANT_UPLOAD"),l=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;l?r&&!i?c=f=>!/RevertItemProcessing/.test(f):!r&&i?c=f=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(f):!r&&!i&&(c=f=>!/Process/.test(f)):c=f=>!/Process/.test(f);const u=c?vt.filter(c):vt.concat();if(a&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!i){const f=Ge.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=Hr,f.info.translateY=nt,f.status.translateY=nt,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!r&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(f=>{Ge[f].status.translateY=nt}),Ge.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Br),d&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const f=Ge.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=ie,f.status.translateY=nt,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),q(n,(f,I)=>{const h=e.createChildView(us,{label:e.query(I.label),icon:e.query(I.icon),opacity:0});u.includes(f)&&e.appendChildView(h),I.disabled&&(h.element.setAttribute("disabled","disabled"),h.element.setAttribute("hidden","hidden")),h.element.dataset.align=e.query(`GET_STYLE_${I.align}`),h.element.classList.add(I.className),h.on("click",R=>{R.stopPropagation(),!I.disabled&&e.dispatch(I.action,{query:s})}),e.ref[`button${f}`]=h}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(kr)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(vr,{id:s})),e.ref.status=e.appendChildView(e.createChildView(Vr,{id:s}));const m=e.appendChildView(e.createChildView(_n,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=m;const p=e.appendChildView(e.createChildView(_n,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));p.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=p,e.ref.activeStyles=[]},Xr=({root:e,actions:t,props:n})=>{$r({root:e,actions:t,props:n});let s=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Ge[i.type]);if(s){e.ref.activeStyles=[];const i=Ge[s.type];q(Yr,(o,r)=>{const a=e.ref[o];q(r,(l,d)=>{const c=i[o]&&typeof i[o][l]<"u"?i[o][l]:d;e.ref.activeStyles.push({control:a,key:l,value:c})})})}e.ref.activeStyles.forEach(({control:i,key:o,value:r})=>{i[o]=typeof r=="function"?r(e):r})},$r=J({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),jr=z({create:zr,write:Xr,didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},name:"file"}),Qr=({root:e,props:t})=>{e.ref.fileName=Te("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(jr,{id:t.id})),e.ref.data=!1},Zr=({root:e,props:t})=>{k(e.ref.fileName,Wt(e.query("GET_ITEM_NAME",t.id)))},Kr=z({create:Qr,ignoreRect:!0,write:J({DID_LOAD_ITEM:Zr}),didCreateView:e=>{Le("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Rn={type:"spring",damping:.6,mass:7},Jr=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Rn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Rn},styles:["translateY"]}}].forEach(n=>{eo(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},eo=(e,t,n)=>{const s=z({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(s,t.props);e.ref[t.name]=e.appendChildView(i)},to=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Zn(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,s=e.ref.bottom.rect.element,i=Math.max(n.height+s.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-s.height)/100,e.ref.bottom.translateY=i-s.height},_s=z({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:to,create:Jr,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),no=e=>{const t=e.map(s=>s.id);let n;return{setIndex:s=>{n=s},getIndex:()=>n,getItemIndex:s=>t.indexOf(s.id)}},On={type:"spring",stiffness:.75,damping:.45,mass:10},Sn="spring",yn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},so=({root:e,props:t})=>{if(e.ref.handleClick=s=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Kr,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(_s,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=s=>{if(!s.isPrimary)return;let i=!1;const o={x:s.pageX,y:s.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:s.offsetX,y:s.offsetY};const r=no(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:r});const a=u=>{if(!u.isPrimary)return;u.stopPropagation(),u.preventDefault(),t.dragOffset={x:u.pageX-o.x,y:u.pageY-o.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:r})},l=u=>{u.isPrimary&&(t.dragOffset={x:u.pageX-o.x,y:u.pageY-o.y},c())},d=()=>{c()},c=()=>{document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:r}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)};e.element.addEventListener("pointerdown",n)},io=J({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),ro=J({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:s})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(r=>/^DID_/.test(r.type)).reverse().find(r=>yn[r.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=yn[n.currentState]||"");const o=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");o?s||(e.height=e.rect.element.width*o):(io({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),s&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),oo=z({create:so,write:ro,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Sn,scaleY:Sn,translateX:On,translateY:On,opacity:{type:"tween",duration:150}}}});var qt=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Yt=(e,t,n)=>{if(!n)return;const s=e.rect.element.width,i=t.length;let o=null;if(i===0||n.top<t[0].rect.element.top)return-1;const a=t[0].rect.element,l=a.marginLeft+a.marginRight,d=a.width+l,c=qt(s,d);if(c===1){for(let p=0;p<i;p++){const f=t[p],I=f.rect.outer.top+f.rect.element.height*.5;if(n.top<I)return p}return i}const u=a.marginTop+a.marginBottom,m=a.height+u;for(let p=0;p<i;p++){const f=p%c,I=Math.floor(p/c),h=f*d,R=I*m,E=R-a.marginTop,_=h+d,O=R+m+a.marginBottom;if(n.top<O&&n.top>E){if(n.left<_)return p;p!==i-1?o=p:o=null}}return o!==null?o:i},st={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},ao=({root:e})=>{X(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},lo=({root:e,action:t})=>{const{id:n,index:s,interactionMethod:i}=t;e.ref.addIndex=s;const o=Date.now();let r=o,a=1;if(i!==de.NONE){a=0;const l=e.query("GET_ITEM_INSERT_INTERVAL"),d=o-e.ref.lastItemSpanwDate;r=d<l?o+(l-d):o}e.ref.lastItemSpanwDate=r,e.appendChildView(e.createChildView(oo,{spawnDate:r,id:n,opacity:a,interactionMethod:i}),s)},Dn=(e,t,n,s=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&co(e,t,n,s,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},co=(e,t,n,s,i)=>{e.interactionMethod===de.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===de.DROP?(e.translateX=null,e.translateX=t-s*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===de.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===de.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},fo=({root:e,action:t})=>{const{id:n}=t,s=e.childViews.find(i=>i.id===n);s&&(s.scaleX=.9,s.scaleY=.9,s.opacity=0,s.markedForRemoval=!0)},Dt=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,uo=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Eo=({root:e,action:t})=>{const{id:n,dragState:s}=t,i=e.query("GET_ITEM",{id:n}),o=e.childViews.find(h=>h.id===n),r=e.childViews.length,a=s.getItemIndex(i);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},d=Dt(o),c=uo(o);let u=Math.floor(e.rect.outer.width/c);u>r&&(u=r);const m=Math.floor(r/u+1);st.setHeight=d*m,st.setWidth=c*u;var p={y:Math.floor(l.y/d),x:Math.floor(l.x/c),getGridIndex:function(){return l.y>st.getHeight||l.y<0||l.x>st.getWidth||l.x<0?a:this.y*u+this.x},getColIndex:function(){const R=e.query("GET_ACTIVE_ITEMS"),E=e.childViews.filter(L=>L.rect.element.height),_=R.map(L=>E.find(P=>P.id===L.id)),O=_.findIndex(L=>L===o),y=Dt(o),M=_.length;let v=M,D=0,b=0,G=0;for(let L=0;L<M;L++)if(D=Dt(_[L]),G=b,b=G+D,l.y<b){if(O>L){if(l.y<G+y){v=L;break}continue}v=L;break}return v}};const f=u>1?p.getGridIndex():p.getColIndex();e.dispatch("MOVE_ITEM",{query:o,index:f});const I=s.getIndex();if(I===void 0||I!==f){if(s.setIndex(f),I===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:f})}},po=J({DID_ADD_ITEM:lo,DID_REMOVE_ITEM:fo,DID_DRAG_ITEM:Eo}),mo=({root:e,props:t,actions:n,shouldOptimize:s})=>{po({root:e,props:t,actions:n});const{dragCoordinates:i}=t,o=e.rect.element.width,r=e.childViews.filter(_=>_.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(_=>r.find(O=>O.id===_.id)).filter(_=>_),l=i?Yt(e,a,i):null,d=e.ref.addIndex||null;e.ref.addIndex=null;let c=0,u=0,m=0;if(a.length===0)return;const p=a[0].rect.element,f=p.marginTop+p.marginBottom,I=p.marginLeft+p.marginRight,h=p.width+I,R=p.height+f,E=qt(o,h);if(E===1){let _=0,O=0;a.forEach((y,M)=>{if(l){let b=M-l;b===-2?O=-f*.25:b===-1?O=-f*.75:b===0?O=f*.75:b===1?O=f*.25:O=0}s&&(y.translateX=null,y.translateY=null),y.markedForRemoval||Dn(y,0,_+O);let D=(y.rect.element.height+f)*(y.markedForRemoval?y.opacity:1);_+=D})}else{let _=0,O=0;a.forEach((y,M)=>{M===l&&(c=1),M===d&&(m+=1),y.markedForRemoval&&y.opacity<.5&&(u-=1);const v=M+m+c+u,D=v%E,b=Math.floor(v/E),G=D*h,L=b*R,P=Math.sign(G-_),H=Math.sign(L-O);_=G,O=L,!y.markedForRemoval&&(s&&(y.translateX=null,y.translateY=null),Dn(y,G,L,P,H))})}},_o=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),Io=z({create:ao,write:mo,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:_o,mixins:{apis:["dragCoordinates"]}}),go=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Io)),t.dragCoordinates=null,t.overflowing=!1},ho=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},To=({props:e})=>{e.dragCoordinates=null},Ro=J({DID_DRAG:ho,DID_END_DRAG:To}),Oo=({root:e,props:t,actions:n})=>{if(Ro({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const s=Math.round(t.overflow);s!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=s)}},So=z({create:go,write:Oo,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),pe=(e,t,n,s="")=>{n?X(e,t,s):e.removeAttribute(t)},yo=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Te("form"),n=e.parentNode,s=e.nextSibling;t.appendChild(e),t.reset(),s?n.insertBefore(e,s):n.appendChild(e)}}},Do=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,X(e.element,"name",e.query("GET_NAME")),X(e.element,"aria-controls",`filepond--assistant-${t.id}`),X(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Is({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),gs({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),hs({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Gt({root:e}),Ts({root:e,action:{value:e.query("GET_REQUIRED")}}),Rs({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const s=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(s),yo(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},Is=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&pe(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},gs=({root:e,action:t})=>{pe(e.element,"multiple",t.value)},hs=({root:e,action:t})=>{pe(e.element,"webkitdirectory",t.value)},Gt=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),s=t||!n;pe(e.element,"disabled",s)},Ts=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&pe(e.element,"required",!0):pe(e.element,"required",!1)},Rs=({root:e,action:t})=>{pe(e.element,"capture",!!t.value,t.value===!0?"":t.value)},An=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(pe(t,"required",!1),pe(t,"name",!1)):(pe(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&pe(t,"required",!0))},Ao=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},wo=z({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Do,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:J({DID_LOAD_ITEM:An,DID_REMOVE_ITEM:An,DID_THROW_ITEM_INVALID:Ao,DID_SET_DISABLED:Gt,DID_SET_ALLOW_BROWSE:Gt,DID_SET_ALLOW_DIRECTORIES_ONLY:hs,DID_SET_ALLOW_MULTIPLE:gs,DID_SET_ACCEPTED_FILE_TYPES:Is,DID_SET_CAPTURE_METHOD:Rs,DID_SET_REQUIRED:Ts})}),wn={ENTER:13,SPACE:32},Mo=({root:e,props:t})=>{const n=Te("label");X(n,"for",`filepond--browser-${t.id}`),X(n,"id",`filepond--drop-label-${t.id}`),e.ref.handleKeyDown=s=>{(s.keyCode===wn.ENTER||s.keyCode===wn.SPACE)&&(s.preventDefault(),e.ref.label.click())},e.ref.handleClick=s=>{s.target===n||n.contains(s.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Os(n,t.caption),e.appendChild(n),e.ref.label=n},Os=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&X(n,"tabindex","0"),t},bo=z({name:"drop-label",ignoreRect:!0,create:Mo,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:J({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Os(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Lo=z({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Po=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Lo,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Co=({root:e,action:t})=>{if(!e.ref.blob){Po({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},vo=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},No=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},Go=({root:e,props:t,actions:n})=>{xo({root:e,props:t,actions:n});const{blob:s}=e.ref;n.length===0&&s&&s.opacity===0&&(e.removeChildView(s),e.ref.blob=null)},xo=J({DID_DRAG:Co,DID_DROP:No,DID_END_DRAG:vo}),Uo=z({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Go}),Ss=(e,t)=>{try{const n=new DataTransfer;t.forEach(s=>{s instanceof File?n.items.add(s):n.items.add(new File([s],s.name,{type:s.type}))}),e.files=n.files}catch{return!1}return!0},Fo=({root:e})=>e.ref.fields={},gt=(e,t)=>e.ref.fields[t],kt=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Mn=({root:e})=>kt(e),Vo=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===$.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=Te("input");o.type=i?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,kt(e)},Bo=({root:e,action:t})=>{const n=gt(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const s=e.query("GET_ITEM",t.id);Ss(n,[s.file])},Ho=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=gt(e,t.id);n&&Ss(n,[t.file])},0)},Wo=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},qo=({root:e,action:t})=>{const n=gt(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},Yo=({root:e,action:t})=>{const n=gt(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=t.value),kt(e))},ko=J({DID_SET_DISABLED:Wo,DID_ADD_ITEM:Vo,DID_LOAD_ITEM:Bo,DID_REMOVE_ITEM:qo,DID_DEFINE_VALUE:Yo,DID_PREPARE_OUTPUT:Ho,DID_REORDER_ITEMS:Mn,DID_SORT_ITEMS:Mn}),zo=z({tag:"fieldset",name:"data",create:Fo,write:ko,ignoreRect:!0}),Xo=e=>"getRootNode"in e?e.getRootNode():document,$o=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],jo=["css","csv","html","txt"],Qo={zip:"zip|compressed",epub:"application/epub+zip"},ys=(e="")=>(e=e.toLowerCase(),$o.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):jo.includes(e)?"text/"+e:Qo[e]||""),zt=e=>new Promise((t,n)=>{const s=ia(e);if(s.length&&!Zo(e))return t(s);Ko(e).then(t)}),Zo=e=>e.files?e.files.length>0:!1,Ko=e=>new Promise((t,n)=>{const s=(e.items?Array.from(e.items):[]).filter(i=>Jo(i)).map(i=>ea(i));if(!s.length){t(e.files?Array.from(e.files):[]);return}Promise.all(s).then(i=>{const o=[];i.forEach(r=>{o.push.apply(o,r)}),t(o.filter(r=>r).map(r=>(r._relativePath||(r._relativePath=r.webkitRelativePath),r)))}).catch(console.error)}),Jo=e=>{if(Ds(e)){const t=Xt(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},ea=e=>new Promise((t,n)=>{if(sa(e)){ta(Xt(e)).then(t).catch(n);return}t([e.getAsFile()])}),ta=e=>new Promise((t,n)=>{const s=[];let i=0,o=0;const r=()=>{o===0&&i===0&&t(s)},a=l=>{i++;const d=l.createReader(),c=()=>{d.readEntries(u=>{if(u.length===0){i--,r();return}u.forEach(m=>{m.isDirectory?a(m):(o++,m.file(p=>{const f=na(p);m.fullPath&&(f._relativePath=m.fullPath),s.push(f),o--,r()}))}),c()},n)};c()};a(e)}),na=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,s=ys(It(e.name));return s.length&&(e=e.slice(0,e.size,s),e.name=n,e.lastModifiedDate=t),e},sa=e=>Ds(e)&&(Xt(e)||{}).isDirectory,Ds=e=>"webkitGetAsEntry"in e,Xt=e=>e.webkitGetAsEntry(),ia=e=>{let t=[];try{if(t=oa(e),t.length)return t;t=ra(e)}catch{}return t},ra=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},oa=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},ft=[],be=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),aa=(e,t,n)=>{const s=la(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=s.addListener(i),i},la=e=>{const t=ft.find(s=>s.element===e);if(t)return t;const n=ca(e);return ft.push(n),n},ca=e=>{const t=[],n={dragenter:fa,dragover:ua,dragleave:pa,drop:Ea},s={};q(n,(o,r)=>{s[o]=r(e,t),e.addEventListener(o,s[o],!1)});const i={element:e,addListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1),t.length===0&&(ft.splice(ft.indexOf(i),1),q(n,r=>{e.removeEventListener(r,s[r],!1)}))})};return i},da=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),$t=(e,t)=>{const n=Xo(t),s=da(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return s===t||t.contains(s)};let As=null;const it=(e,t)=>{try{e.dropEffect=t}catch{}},fa=(e,t)=>n=>{n.preventDefault(),As=n.target,t.forEach(s=>{const{element:i,onenter:o}=s;$t(n,i)&&(s.state="enter",o(be(n)))})},ua=(e,t)=>n=>{n.preventDefault();const s=n.dataTransfer;zt(s).then(i=>{let o=!1;t.some(r=>{const{filterElement:a,element:l,onenter:d,onexit:c,ondrag:u,allowdrop:m}=r;it(s,"copy");const p=m(i);if(!p){it(s,"none");return}if($t(n,l)){if(o=!0,r.state===null){r.state="enter",d(be(n));return}if(r.state="over",a&&!p){it(s,"none");return}u(be(n))}else a&&!o&&it(s,"none"),r.state&&(r.state=null,c(be(n)))})})},Ea=(e,t)=>n=>{n.preventDefault();const s=n.dataTransfer;zt(s).then(i=>{t.forEach(o=>{const{filterElement:r,element:a,ondrop:l,onexit:d,allowdrop:c}=o;if(o.state=null,!(r&&!$t(n,a))){if(!c(i))return d(be(n));l(be(n),i)}})})},pa=(e,t)=>n=>{As===n.target&&t.forEach(s=>{const{onexit:i}=s;s.state=null,i(be(n))})},ma=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:s,requiresDropOnElement:i,filterItems:o=c=>c}=n,r=aa(e,s?document.documentElement:e,i);let a="",l="";r.allowdrop=c=>t(o(c)),r.ondrop=(c,u)=>{const m=o(u);if(!t(m)){d.ondragend(c);return}l="drag-drop",d.onload(m,c)},r.ondrag=c=>{d.ondrag(c)},r.onenter=c=>{l="drag-over",d.ondragstart(c)},r.onexit=c=>{l="drag-exit",d.ondragend(c)};const d={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{r.destroy()}};return d};let xt=!1;const Ue=[],ws=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,s=t;for(;s!==document.body;){if(s.classList.contains("filepond--root")){n=!0;break}s=s.parentNode}if(!n)return}zt(e.clipboardData).then(n=>{n.length&&Ue.forEach(s=>s(n))})},_a=e=>{Ue.includes(e)||(Ue.push(e),!xt&&(xt=!0,document.addEventListener("paste",ws)))},Ia=e=>{Vt(Ue,Ue.indexOf(e)),Ue.length===0&&(document.removeEventListener("paste",ws),xt=!1)},ga=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{Ia(e)},onload:()=>{}};return _a(e),t},ha=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,X(e.element,"role","status"),X(e.element,"aria-live","polite"),X(e.element,"aria-relevant","additions")};let bn=null,Ln=null;const At=[],ht=(e,t)=>{e.element.textContent=t},Ta=e=>{e.element.textContent=""},Ms=(e,t,n)=>{const s=e.query("GET_TOTAL_ITEMS");ht(e,`${n} ${t}, ${s} ${s===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Ln),Ln=setTimeout(()=>{Ta(e)},1500)},bs=e=>e.element.parentNode.contains(document.activeElement),Ra=({root:e,action:t})=>{if(!bs(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);At.push(n.filename),clearTimeout(bn),bn=setTimeout(()=>{Ms(e,At.join(", "),e.query("GET_LABEL_FILE_ADDED")),At.length=0},750)},Oa=({root:e,action:t})=>{if(!bs(e))return;const n=t.item;Ms(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Sa=({root:e,action:t})=>{const s=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");ht(e,`${s} ${i}`)},Pn=({root:e,action:t})=>{const s=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");ht(e,`${s} ${i}`)},rt=({root:e,action:t})=>{const s=e.query("GET_ITEM",t.id).filename;ht(e,`${t.status.main} ${s} ${t.status.sub}`)},ya=z({create:ha,ignoreRect:!0,ignoreRectUpdate:!0,write:J({DID_LOAD_ITEM:Ra,DID_REMOVE_ITEM:Oa,DID_COMPLETE_ITEM_PROCESSING:Sa,DID_ABORT_ITEM_PROCESSING:Pn,DID_REVERT_ITEM_PROCESSING:Pn,DID_THROW_ITEM_REMOVE_ERROR:rt,DID_THROW_ITEM_LOAD_ERROR:rt,DID_THROW_ITEM_INVALID:rt,DID_THROW_ITEM_PROCESSING_ERROR:rt}),tag:"span",name:"assistant"}),Ls=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Ps=(e,t=16,n=!0)=>{let s=Date.now(),i=null;return(...o)=>{clearTimeout(i);const r=Date.now()-s,a=()=>{s=Date.now(),e(...o)};r<t?n||(i=setTimeout(a,t-r)):a()}},Da=1e6,ut=e=>e.preventDefault(),Aa=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const s=e.query("GET_CLASS_NAME");s&&s.split(" ").filter(l=>l.length).forEach(l=>{e.element.classList.add(l)}),e.ref.label=e.appendChildView(e.createChildView(bo,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(So,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(_s,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(ya,{...t})),e.ref.data=e.appendChildView(e.createChildView(zo,{...t})),e.ref.measure=Te("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(l=>!he(l.value)).map(({name:l,value:d})=>{e.element.dataset[l]=d}),e.ref.widthPrevious=null,e.ref.widthUpdated=Ps(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&o&&!i&&(e.element.addEventListener("touchmove",ut,{passive:!1}),e.element.addEventListener("gesturestart",ut));const r=e.query("GET_CREDITS");if(r.length===2){const l=document.createElement("a");l.className="filepond--credits",l.href=r[0],l.tabIndex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=r[1],e.element.appendChild(l),e.ref.credits=l}},wa=({root:e,props:t,actions:n})=>{if(Ca({root:e,props:t,actions:n}),n.filter(M=>/^DID_SET_STYLE_/.test(M.type)).filter(M=>!he(M.data.value)).map(({type:M,data:v})=>{const D=Ls(M.substring(8).toLowerCase(),"_");e.element.dataset[D]=v.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let s=e.ref.bounds;s||(s=e.ref.bounds=La(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:o,list:r,panel:a}=e.ref;i&&i.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),d=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),u=d?e.query("GET_MAX_FILES")||Da:1,m=c===u,p=n.find(M=>M.type==="DID_ADD_ITEM");if(m&&p){const M=p.data.interactionMethod;o.opacity=0,d?o.translateY=-40:M===de.API?o.translateX=40:M===de.BROWSE?o.translateY=40:o.translateY=30}else m||(o.opacity=1,o.translateX=0,o.translateY=0);const f=Ma(e),I=ba(e),h=o.rect.element.height,R=!d||m?0:h,E=m?r.rect.element.marginTop:0,_=c===0?0:r.rect.element.marginBottom,O=R+E+I.visual+_,y=R+E+I.bounds+_;if(r.translateY=Math.max(0,R-r.rect.element.marginTop)-f.top,l){const M=e.rect.element.width,v=M*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const D=e.ref.updateHistory;D.push(M);const b=2;if(D.length>b*2){const L=D.length,P=L-10;let H=0;for(let w=L;w>=P;w--)if(D[w]===D[w-2]&&H++,H>=b)return}a.scalable=!1,a.height=v;const G=v-R-(_-f.bottom)-(m?E:0);I.visual>G?r.overflow=G:r.overflow=null,e.height=v}else if(s.fixedHeight){a.scalable=!1;const M=s.fixedHeight-R-(_-f.bottom)-(m?E:0);I.visual>M?r.overflow=M:r.overflow=null}else if(s.cappedHeight){const M=O>=s.cappedHeight,v=Math.min(s.cappedHeight,O);a.scalable=!0,a.height=M?v:v-f.top-f.bottom;const D=v-R-(_-f.bottom)-(m?E:0);O>s.cappedHeight&&I.visual>D?r.overflow=D:r.overflow=null,e.height=Math.min(s.cappedHeight,y-f.top-f.bottom)}else{const M=c>0?f.top+f.bottom:0;a.scalable=!0,a.height=Math.max(h,O-M),e.height=Math.max(h,y-M)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},Ma=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},ba=e=>{let t=0,n=0;const s=e.ref.list,i=s.childViews[0],o=i.childViews.filter(E=>E.rect.element.height),r=e.query("GET_ACTIVE_ITEMS").map(E=>o.find(_=>_.id===E.id)).filter(E=>E);if(r.length===0)return{visual:t,bounds:n};const a=i.rect.element.width,l=Yt(i,r,s.dragCoordinates),d=r[0].rect.element,c=d.marginTop+d.marginBottom,u=d.marginLeft+d.marginRight,m=d.width+u,p=d.height+c,f=typeof l<"u"&&l>=0?1:0,I=r.find(E=>E.markedForRemoval&&E.opacity<.45)?-1:0,h=r.length+f+I,R=qt(a,m);return R===1?r.forEach(E=>{const _=E.rect.element.height+c;n+=_,t+=_*E.opacity}):(n=Math.ceil(h/R)*p,t=n),{visual:t,bounds:n}},La=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},jt=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),s=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let o=e.query("GET_MAX_FILES");const r=t.length;return!s&&r>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Y("warning",0,"Max files")}),!0):(o=s?o:1,!s&&n?!1:Ve(o)&&i+r>o?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Y("warning",0,"Max files")}),!0):!1)},Pa=(e,t,n)=>{const s=e.childViews[0];return Yt(s,t,{left:n.scopeLeft-s.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Cn=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),s=t&&!n;if(s&&!e.ref.hopper){const i=ma(e.element,o=>{const r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?o.every(l=>Le("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(d=>d===!0)&&r(l)):!0},{filterItems:o=>{const r=e.query("GET_IGNORED_FILES");return o.filter(a=>Me(a)?!r.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(o,r)=>{const l=e.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),d=e.query("GET_ACTIVE_ITEMS").map(c=>l.find(u=>u.id===c.id)).filter(c=>c);ue("ADD_ITEMS",o,{dispatch:e.dispatch}).then(c=>{if(jt(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:Pa(e.ref.list,d,r),interactionMethod:de.DROP})}),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},i.ondragstart=o=>{e.dispatch("DID_START_DRAG",{position:o})},i.ondrag=Ps(o=>{e.dispatch("DID_DRAG",{position:o})}),i.ondragend=o=>{e.dispatch("DID_END_DRAG",{position:o})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Uo))}else!s&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},vn=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),s=e.query("GET_DISABLED"),i=n&&!s;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(wo,{...t,onload:o=>{ue("ADD_ITEMS",o,{dispatch:e.dispatch}).then(r=>{if(jt(e,r))return!1;e.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:de.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Nn=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),s=t&&!n;s&&!e.ref.paster?(e.ref.paster=ga(),e.ref.paster.onload=i=>{ue("ADD_ITEMS",i,{dispatch:e.dispatch}).then(o=>{if(jt(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:de.PASTE})})}):!s&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Ca=J({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{vn(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Cn(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Nn(e)},DID_SET_DISABLED:({root:e,props:t})=>{Cn(e),Nn(e),vn(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),va=z({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Aa,write:wa,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",ut),e.element.removeEventListener("gesturestart",ut)},mixins:{styles:["height"]}}),Na=(e={})=>{let t=null;const n=dt(),s=js(Ni(n),[Ji,Ui(n)],[yr,xi(n)]);s.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||s.dispatch("KICK")};document.addEventListener("visibilitychange",i);let o=null,r=!1,a=!1,l=null,d=null;const c=()=>{r||(r=!0),clearTimeout(o),o=setTimeout(()=>{r=!1,l=null,d=null,a&&(a=!1,s.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const u=va(s,{id:Ft()});let m=!1,p=!1;const f={_read:()=>{r&&(d=window.innerWidth,l||(l=d),!a&&d!==l&&(s.dispatch("DID_START_RESIZE"),a=!0)),p&&m&&(m=u.element.offsetParent===null),!m&&(u._read(),p=u.rect.element.hidden)},_write:S=>{const A=s.processActionQueue().filter(C=>!/^SET_/.test(C.type));m&&!A.length||(E(A),m=u._write(S,A,a),Bi(s.query("GET_ITEMS")),m&&s.processDispatchQueue())}},I=S=>A=>{const C={type:S};if(!A)return C;if(A.hasOwnProperty("error")&&(C.error=A.error?{...A.error}:null),A.status&&(C.status={...A.status}),A.file&&(C.output=A.file),A.source)C.file=A.source;else if(A.item||A.id){const N=A.item?A.item:s.query("GET_ITEM",A.id);C.file=N?te(N):null}return A.items&&(C.items=A.items.map(te)),/progress/.test(S)&&(C.progress=A.progress),A.hasOwnProperty("origin")&&A.hasOwnProperty("target")&&(C.origin=A.origin,C.target=A.target),C},h={DID_DESTROY:I("destroy"),DID_INIT:I("init"),DID_THROW_MAX_FILES:I("warning"),DID_INIT_ITEM:I("initfile"),DID_START_ITEM_LOAD:I("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:I("addfileprogress"),DID_LOAD_ITEM:I("addfile"),DID_THROW_ITEM_INVALID:[I("error"),I("addfile")],DID_THROW_ITEM_LOAD_ERROR:[I("error"),I("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[I("error"),I("removefile")],DID_PREPARE_OUTPUT:I("preparefile"),DID_START_ITEM_PROCESSING:I("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:I("processfileprogress"),DID_ABORT_ITEM_PROCESSING:I("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:I("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:I("processfiles"),DID_REVERT_ITEM_PROCESSING:I("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[I("error"),I("processfile")],DID_REMOVE_ITEM:I("removefile"),DID_UPDATE_ITEMS:I("updatefiles"),DID_ACTIVATE_ITEM:I("activatefile"),DID_REORDER_ITEMS:I("reorderfiles")},R=S=>{const A={pond:F,...S};delete A.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${S.type}`,{detail:A,bubbles:!0,cancelable:!0,composed:!0}));const C=[];S.hasOwnProperty("error")&&C.push(S.error),S.hasOwnProperty("file")&&C.push(S.file);const N=["type","error","file"];Object.keys(S).filter(W=>!N.includes(W)).forEach(W=>C.push(S[W])),F.fire(S.type,...C);const V=s.query(`GET_ON${S.type.toUpperCase()}`);V&&V(...C)},E=S=>{S.length&&S.filter(A=>h[A.type]).forEach(A=>{const C=h[A.type];(Array.isArray(C)?C:[C]).forEach(N=>{A.type==="DID_INIT_ITEM"?R(N(A.data)):setTimeout(()=>{R(N(A.data))},0)})})},_=S=>s.dispatch("SET_OPTIONS",{options:S}),O=S=>s.query("GET_ACTIVE_ITEM",S),y=S=>new Promise((A,C)=>{s.dispatch("REQUEST_ITEM_PREPARE",{query:S,success:N=>{A(N)},failure:N=>{C(N)}})}),M=(S,A={})=>new Promise((C,N)=>{b([{source:S,options:A}],{index:A.index}).then(V=>C(V&&V[0])).catch(N)}),v=S=>S.file&&S.id,D=(S,A)=>(typeof S=="object"&&!v(S)&&!A&&(A=S,S=void 0),s.dispatch("REMOVE_ITEM",{...A,query:S}),s.query("GET_ACTIVE_ITEM",S)===null),b=(...S)=>new Promise((A,C)=>{const N=[],V={};if(Et(S[0]))N.push.apply(N,S[0]),Object.assign(V,S[1]||{});else{const W=S[S.length-1];typeof W=="object"&&!(W instanceof Blob)&&Object.assign(V,S.pop()),N.push(...S)}s.dispatch("ADD_ITEMS",{items:N,index:V.index,interactionMethod:de.API,success:A,failure:C})}),G=()=>s.query("GET_ACTIVE_ITEMS"),L=S=>new Promise((A,C)=>{s.dispatch("REQUEST_ITEM_PROCESSING",{query:S,success:N=>{A(N)},failure:N=>{C(N)}})}),P=(...S)=>{const A=Array.isArray(S[0])?S[0]:S,C=A.length?A:G();return Promise.all(C.map(y))},H=(...S)=>{const A=Array.isArray(S[0])?S[0]:S;if(!A.length){const C=G().filter(N=>!(N.status===x.IDLE&&N.origin===$.LOCAL)&&N.status!==x.PROCESSING&&N.status!==x.PROCESSING_COMPLETE&&N.status!==x.PROCESSING_REVERT_ERROR);return Promise.all(C.map(L))}return Promise.all(A.map(L))},w=(...S)=>{const A=Array.isArray(S[0])?S[0]:S;let C;typeof A[A.length-1]=="object"?C=A.pop():Array.isArray(S[0])&&(C=S[1]);const N=G();return A.length?A.map(W=>Se(W)?N[W]?N[W].id:null:W).filter(W=>W).map(W=>D(W,C)):Promise.all(N.map(W=>D(W,C)))},F={..._t(),...f,...Gi(s,n),setOptions:_,addFile:M,addFiles:b,getFile:O,processFile:L,prepareFile:y,removeFile:D,moveFile:(S,A)=>s.dispatch("MOVE_ITEM",{query:S,index:A}),getFiles:G,processFiles:H,removeFiles:w,prepareFiles:P,sort:S=>s.dispatch("SORT",{compare:S}),browse:()=>{var S=u.element.querySelector("input[type=file]");S&&S.click()},destroy:()=>{F.fire("destroy",u.element),s.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",i),s.dispatch("DID_DESTROY")},insertBefore:S=>nn(u.element,S),insertAfter:S=>sn(u.element,S),appendTo:S=>S.appendChild(u.element),replaceElement:S=>{nn(u.element,S),S.parentNode.removeChild(S),t=S},restoreElement:()=>{t&&(sn(t,u.element),u.element.parentNode.removeChild(u.element),t=null)},isAttachedTo:S=>u.element===S||t===S,element:{get:()=>u.element},status:{get:()=>s.query("GET_STATUS")}};return s.dispatch("DID_INIT"),Oe(F)},Cs=(e={})=>{const t={};return q(dt(),(s,i)=>{t[s]=i[0]}),Na({...t,...e})},Ga=e=>e.charAt(0).toLowerCase()+e.slice(1),xa=e=>Ls(e.replace(/^data-/,"")),vs=(e,t)=>{q(t,(n,s)=>{q(e,(i,o)=>{const r=new RegExp(n);if(!r.test(i)||(delete e[i],s===!1))return;if(K(s)){e[s]=o;return}const l=s.group;j(s)&&!e[l]&&(e[l]={}),e[l][Ga(i.replace(r,""))]=o}),s.mapping&&vs(e[s.group],s.mapping)})},Ua=(e,t={})=>{const n=[];q(e.attributes,i=>{n.push(e.attributes[i])});const s=n.filter(i=>i.name).reduce((i,o)=>{const r=X(e,o.name);return i[xa(o.name)]=r===o.name?!0:r,i},{});return vs(s,t),s},Fa=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Le("SET_ATTRIBUTE_TO_OPTION_MAP",n);const s={...t},i=Ua(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(r=>{j(i[r])?(j(s[r])||(s[r]={}),Object.assign(s[r],i[r])):s[r]=i[r]}),s.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(r=>({source:r.value,options:{type:r.dataset.type}})));const o=Cs(s);return e.files&&Array.from(e.files).forEach(r=>{o.addFile(r)}),o.replaceElement(e),o},Va=(...e)=>$s(e[0])?Fa(...e):Cs(...e),Ba=["fire","_read","_write"],Gn=e=>{const t={};return ts(e,t,Ba),t},Ha=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,s)=>t[s]),Wa=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),s=new Worker(n);return{transfer:(i,o)=>{},post:(i,o,r)=>{const a=Ft();s.onmessage=l=>{l.data.id===a&&o(l.data.message)},s.postMessage({id:a,message:i},r)},terminate:()=>{s.terminate(),URL.revokeObjectURL(n)}}},qa=e=>new Promise((t,n)=>{const s=new Image;s.onload=()=>{t(s)},s.onerror=i=>{n(i)},s.src=e}),Ns=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Ya=e=>Ns(e,e.name),xn=[],ka=e=>{if(xn.includes(e))return;xn.push(e);const t=e({addFilter:Wi,utils:{Type:T,forin:q,isString:K,isFile:Me,toNaturalFileSize:Es,replaceInString:Ha,getExtensionFromFilename:It,getFilenameWithoutExtension:ds,guesstimateMimeType:ys,getFileFromBlob:Fe,getFilenameFromURL:Qe,createRoute:J,createWorker:Wa,createView:z,createItemAPI:te,loadImage:qa,copyFile:Ya,renameFile:Ns,createBlob:as,applyFilterChain:ue,text:k,getNumericAspectRatioFromString:is},views:{fileActionButton:us}});qi(t.options)},za=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Xa=()=>"Promise"in window,$a=()=>"slice"in Blob.prototype,ja=()=>"URL"in window&&"createObjectURL"in window.URL,Qa=()=>"visibilityState"in document,Za=()=>"performance"in window,Ka=()=>"supports"in(window.CSS||{}),Ja=()=>/MSIE|Trident/.test(window.navigator.userAgent),Un=(()=>{const e=jn()&&!za()&&Qa()&&Xa()&&$a()&&ja()&&Za()&&(Ka()||Ja());return()=>e})(),Re={apps:[]},el="filepond",Pe=()=>{};let Fn={},ze=Pe,wt=Pe,Vn=Pe,Bn=Pe,$e=Pe,Hn=Pe,Wn=Pe;if(Un()){Ti(()=>{Re.apps.forEach(n=>n._read())},n=>{Re.apps.forEach(s=>s._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Un,create:ze,destroy:wt,parse:Vn,find:Bn,registerPlugin:$e,setOptions:Wn}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>q(dt(),(n,s)=>{Fn[n]=s[1]});Fn={},t(),ze=(...n)=>{const s=Va(...n);return s.on("destroy",wt),Re.apps.push(s),Gn(s)},wt=n=>{const s=Re.apps.findIndex(i=>i.isAttachedTo(n));return s>=0?(Re.apps.splice(s,1)[0].restoreElement(),!0):!1},Vn=n=>Array.from(n.querySelectorAll(`.${el}`)).filter(o=>!Re.apps.find(r=>r.isAttachedTo(o))).map(o=>ze(o)),Bn=n=>{const s=Re.apps.find(i=>i.isAttachedTo(n));return s?Gn(s):null},$e=(...n)=>{n.forEach(ka),t()},Hn=()=>{const n={};return q(dt(),(s,i)=>{n[s]=i[0]}),n},Wn=n=>(j(n)&&(Re.apps.forEach(s=>{s.setOptions(n)}),Yi(n)),Hn())}/*!
 * FilePondPluginFileValidateType 1.2.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Gs=({addFilter:e,utils:t})=>{const{Type:n,isString:s,replaceInString:i,guesstimateMimeType:o,getExtensionFromFilename:r,getFilenameFromURL:a}=t,l=(p,f)=>{const I=(/^[^/]+/.exec(p)||[]).pop(),h=f.slice(0,-2);return I===h},d=(p,f)=>p.some(I=>/\*$/.test(I)?l(f,I):I===f),c=p=>{let f="";if(s(p)){const I=a(p),h=r(I);h&&(f=o(h))}else f=p.type;return f},u=(p,f,I)=>{if(f.length===0)return!0;const h=c(p);return I?new Promise((R,E)=>{I(p,h).then(_=>{d(f,_)?R():E()}).catch(E)}):d(f,h)},m=p=>f=>p[f]===null?!1:p[f]||f;return e("SET_ATTRIBUTE_TO_OPTION_MAP",p=>Object.assign(p,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(p,{query:f})=>f("GET_ALLOW_FILE_TYPE_VALIDATION")?u(p,f("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(p,{query:f})=>new Promise((I,h)=>{if(!f("GET_ALLOW_FILE_TYPE_VALIDATION")){I(p);return}const R=f("GET_ACCEPTED_FILE_TYPES"),E=f("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),_=u(p,R,E),O=()=>{const y=R.map(m(f("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(v=>v!==!1),M=y.filter((v,D)=>y.indexOf(v)===D);h({status:{main:f("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:i(f("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:M.join(", "),allButLastType:M.slice(0,-1).join(", "),lastType:M[M.length-1]})}})};if(typeof _=="boolean")return _?I(p):O();_.then(()=>{I(p)}).catch(O)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},tl=typeof window<"u"&&typeof window.document<"u";tl&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Gs}));/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const nl=e=>/^image/.test(e.type),qn=(e,t)=>je(e.x*t,e.y*t),Yn=(e,t)=>je(e.x+t.x,e.y+t.y),sl=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:je(e.x/t,e.y/t)},ot=(e,t,n)=>{const s=Math.cos(t),i=Math.sin(t),o=je(e.x-n.x,e.y-n.y);return je(n.x+s*o.x-i*o.y,n.y+i*o.x+s*o.y)},je=(e=0,t=0)=>({x:e,y:t}),se=(e,t,n=1,s)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(s?t[s]:Math.min(t.width,t.height))},il=(e,t,n)=>{const s=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",o=e.borderColor||e.lineColor||"transparent",r=se(e.borderWidth||e.lineWidth,t,n),a=e.lineCap||"round",l=e.lineJoin||"round",d=typeof s=="string"?"":s.map(u=>se(u,t,n)).join(","),c=e.opacity||1;return{"stroke-linecap":a,"stroke-linejoin":l,"stroke-width":r||0,"stroke-dasharray":d,stroke:o,fill:i,opacity:c}},ce=e=>e!=null,rl=(e,t,n=1)=>{let s=se(e.x,t,n,"width")||se(e.left,t,n,"width"),i=se(e.y,t,n,"height")||se(e.top,t,n,"height"),o=se(e.width,t,n,"width"),r=se(e.height,t,n,"height"),a=se(e.right,t,n,"width"),l=se(e.bottom,t,n,"height");return ce(i)||(ce(r)&&ce(l)?i=t.height-r-l:i=l),ce(s)||(ce(o)&&ce(a)?s=t.width-o-a:s=a),ce(o)||(ce(s)&&ce(a)?o=t.width-s-a:o=0),ce(r)||(ce(i)&&ce(l)?r=t.height-i-l:r=0),{x:s||0,y:i||0,width:o||0,height:r||0}},ol=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),Ie=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),al="http://www.w3.org/2000/svg",xe=(e,t)=>{const n=document.createElementNS(al,e);return t&&Ie(n,t),n},ll=e=>Ie(e,{...e.rect,...e.styles}),cl=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,s=e.rect.width*.5,i=e.rect.height*.5;return Ie(e,{cx:t,cy:n,rx:s,ry:i,...e.styles})},dl={contain:"xMidYMid meet",cover:"xMidYMid slice"},fl=(e,t)=>{Ie(e,{...e.rect,...e.styles,preserveAspectRatio:dl[t.fit]||"none"})},ul={left:"start",center:"middle",right:"end"},El=(e,t,n,s)=>{const i=se(t.fontSize,n,s),o=t.fontFamily||"sans-serif",r=t.fontWeight||"normal",a=ul[t.textAlign]||"start";Ie(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":r,"font-size":i,"font-family":o,"text-anchor":a}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},pl=(e,t,n,s)=>{Ie(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],o=e.childNodes[1],r=e.childNodes[2],a=e.rect,l={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Ie(i,{x1:a.x,y1:a.y,x2:l.x,y2:l.y}),!t.lineDecoration)return;o.style.display="none",r.style.display="none";const d=sl({x:l.x-a.x,y:l.y-a.y}),c=se(.05,n,s);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const u=qn(d,c),m=Yn(a,u),p=ot(a,2,m),f=ot(a,-2,m);Ie(o,{style:"display:block;",d:`M${p.x},${p.y} L${a.x},${a.y} L${f.x},${f.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const u=qn(d,-c),m=Yn(l,u),p=ot(l,2,m),f=ot(l,-2,m);Ie(r,{style:"display:block;",d:`M${p.x},${p.y} L${l.x},${l.y} L${f.x},${f.y}`})}},ml=(e,t,n,s)=>{Ie(e,{...e.styles,fill:"none",d:ol(t.points.map(i=>({x:se(i.x,n,s,"width"),y:se(i.y,n,s,"height")})))})},at=e=>t=>xe(e,{id:t.id}),_l=e=>{const t=xe("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},Il=e=>{const t=xe("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=xe("line");t.appendChild(n);const s=xe("path");t.appendChild(s);const i=xe("path");return t.appendChild(i),t},gl={image:_l,rect:at("rect"),ellipse:at("ellipse"),text:at("text"),path:at("path"),line:Il},hl={rect:ll,ellipse:cl,image:fl,text:El,path:ml,line:pl},Tl=(e,t)=>gl[e](t),Rl=(e,t,n,s,i)=>{t!=="path"&&(e.rect=rl(n,s,i)),e.styles=il(n,s,i),hl[t](e,n,s,i)},Ol=["x","y","left","top","right","bottom","width","height"],Sl=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,yl=e=>{const[t,n]=e,s=n.points?{}:Ol.reduce((i,o)=>(i[o]=Sl(n[o]),i),{});return[t,{zIndex:0,...n,...s}]},Dl=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Al=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:s,resize:i,markup:o}=n,r=n.width,a=n.height;let l=s.width,d=s.height;if(i){const{size:p}=i;let f=p&&p.width,I=p&&p.height;const h=i.mode,R=i.upscale;f&&!I&&(I=f),I&&!f&&(f=I);const E=l<f&&d<I;if(!E||E&&R){let _=f/l,O=I/d;if(h==="force")l=f,d=I;else{let y;h==="cover"?y=Math.max(_,O):h==="contain"&&(y=Math.min(_,O)),l=l*y,d=d*y}}}const c={width:r,height:a};t.element.setAttribute("width",c.width),t.element.setAttribute("height",c.height);const u=Math.min(r/l,a/d);t.element.innerHTML="";const m=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(m).map(yl).sort(Dl).forEach(p=>{const[f,I]=p,h=Tl(f,I);Rl(h,f,I,c,u),t.element.appendChild(h)})}}),Xe=(e,t)=>({x:e,y:t}),wl=(e,t)=>e.x*t.x+e.y*t.y,kn=(e,t)=>Xe(e.x-t.x,e.y-t.y),Ml=(e,t)=>wl(kn(e,t),kn(e,t)),zn=(e,t)=>Math.sqrt(Ml(e,t)),Xn=(e,t)=>{const n=e,s=1.5707963267948966,i=t,o=1.5707963267948966-t,r=Math.sin(s),a=Math.sin(i),l=Math.sin(o),d=Math.cos(o),c=n/r,u=c*a,m=c*l;return Xe(d*u,d*m)},bl=(e,t)=>{const n=e.width,s=e.height,i=Xn(n,t),o=Xn(s,t),r=Xe(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),a=Xe(e.x+e.width+Math.abs(o.y),e.y+Math.abs(o.x)),l=Xe(e.x-Math.abs(o.y),e.y+e.height-Math.abs(o.x));return{width:zn(r,a),height:zn(r,l)}},Ll=(e,t,n=1)=>{const s=e.height/e.width;let i=1,o=t,r=1,a=s;a>o&&(a=o,r=a/s);const l=Math.max(i/r,o/a),d=e.width/(n*l*r),c=d*t;return{width:d,height:c}},xs=(e,t,n,s)=>{const i=s.x>.5?1-s.x:s.x,o=s.y>.5?1-s.y:s.y,r=i*2*e.width,a=o*2*e.height,l=bl(t,n);return Math.max(l.width/r,l.height/a)},Us=(e,t)=>{let n=e.width,s=n*t;s>e.height&&(s=e.height,n=s/t);const i=(e.width-n)*.5,o=(e.height-s)*.5;return{x:i,y:o,width:n,height:s}},Pl=(e,t={})=>{let{zoom:n,rotation:s,center:i,aspectRatio:o}=t;o||(o=e.height/e.width);const r=Ll(e,o,n),a={x:r.width*.5,y:r.height*.5},l={x:0,y:0,width:r.width,height:r.height,center:a},d=typeof t.scaleToFit>"u"||t.scaleToFit,c=xs(e,Us(l,o),s,d?i:{x:.5,y:.5}),u=n*c;return{widthFloat:r.width/u,heightFloat:r.height/u,width:Math.round(r.width/u),height:Math.round(r.height/u)}},_e={type:"spring",stiffness:.5,damping:.45,mass:10},Cl=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),vl=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:_e,originY:_e,scaleX:_e,scaleY:_e,translateX:_e,translateY:_e,rotateZ:_e}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Cl(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:s}=n.crop,{bitmap:i}=t.ref;i.scaleX=s.horizontal?-1:1,i.scaleY=s.vertical?-1:1}}),Nl=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(vl(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Al(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const s=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");s!==null&&(s==="grid"?t.element.dataset.transparencyIndicator=s:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:s})=>{const{crop:i,markup:o,resize:r,dirty:a,width:l,height:d}=n;t.ref.image.crop=i;const c={x:0,y:0,width:l,height:d,center:{x:l*.5,y:d*.5}},u={width:t.ref.image.width,height:t.ref.image.height},m={x:i.center.x*u.width,y:i.center.y*u.height},p={x:c.center.x-u.width*i.center.x,y:c.center.y-u.height*i.center.y},f=Math.PI*2+i.rotation%(Math.PI*2),I=i.aspectRatio||u.height/u.width,h=typeof i.scaleToFit>"u"||i.scaleToFit,R=xs(u,Us(c,I),f,h?i.center:{x:.5,y:.5}),E=i.zoom*R;o&&o.length?(t.ref.createMarkup(),t.ref.markup.width=l,t.ref.markup.height=d,t.ref.markup.resize=r,t.ref.markup.dirty=a,t.ref.markup.markup=o,t.ref.markup.crop=Pl(u,i)):t.ref.markup&&t.ref.destroyMarkup();const _=t.ref.image;if(s){_.originX=null,_.originY=null,_.translateX=null,_.translateY=null,_.rotateZ=null,_.scaleX=null,_.scaleY=null;return}_.originX=m.x,_.originY=m.y,_.translateX=p.x,_.translateY=p.y,_.rotateZ=f,_.scaleX=E,_.scaleY=E}}),Gl=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:_e,scaleY:_e,translateY:_e,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(Nl(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:s})=>{const{clip:i}=t.ref,{image:o,crop:r,markup:a,resize:l,dirty:d}=n;if(i.crop=r,i.markup=a,i.resize=l,i.dirty=d,i.opacity=s?0:1,s||t.rect.element.hidden)return;const c=o.height/o.width;let u=r.aspectRatio||c;const m=t.rect.inner.width,p=t.rect.inner.height;let f=t.query("GET_IMAGE_PREVIEW_HEIGHT");const I=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),h=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),R=t.query("GET_PANEL_ASPECT_RATIO"),E=t.query("GET_ALLOW_MULTIPLE");R&&!E&&(f=m*R,u=R);let _=f!==null?f:Math.max(I,Math.min(m*u,h)),O=_/u;O>m&&(O=m,_=O*u),_>p&&(_=p,O=p/u),i.width=O,i.height=_}});let xl=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,$n=0;const Ul=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let s=xl;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;s=s.replace(/url\(\#/g,"url("+i+"#")}$n++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=s.replace(/__UID__/g,$n)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Fl=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},Vl=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,s=t.data,i=s.length,o=n[0],r=n[1],a=n[2],l=n[3],d=n[4],c=n[5],u=n[6],m=n[7],p=n[8],f=n[9],I=n[10],h=n[11],R=n[12],E=n[13],_=n[14],O=n[15],y=n[16],M=n[17],v=n[18],D=n[19];let b=0,G=0,L=0,P=0,H=0;for(;b<i;b+=4)G=s[b]/255,L=s[b+1]/255,P=s[b+2]/255,H=s[b+3]/255,s[b]=Math.max(0,Math.min((G*o+L*r+P*a+H*l+d)*255,255)),s[b+1]=Math.max(0,Math.min((G*c+L*u+P*m+H*p+f)*255,255)),s[b+2]=Math.max(0,Math.min((G*I+L*h+P*R+H*E+_)*255,255)),s[b+3]=Math.max(0,Math.min((G*O+L*y+P*M+H*v+D)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Bl=(e,t)=>{let n=new Image;n.onload=()=>{const s=n.naturalWidth,i=n.naturalHeight;n=null,t(s,i)},n.src=e},Hl={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Wl=(e,t,n,s)=>{s!==-1&&e.transform.apply(e,Hl[s](t,n))},ql=(e,t,n,s)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const o=i.getContext("2d");return s>=5&&s<=8&&([t,n]=[n,t]),Wl(o,t,n,s),o.drawImage(e,0,0,t,n),i},Fs=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Yl=10,kl=10,zl=e=>{const t=Math.min(Yl/e.width,kl/e.height),n=document.createElement("canvas"),s=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),o=n.height=Math.ceil(e.height*t);s.drawImage(e,0,0,i,o);let r=null;try{r=s.getImageData(0,0,i,o).data}catch{return null}const a=r.length;let l=0,d=0,c=0,u=0;for(;u<a;u+=4)l+=r[u]*r[u],d+=r[u+1]*r[u+1],c+=r[u+2]*r[u+2];return l=Mt(l,a),d=Mt(d,a),c=Mt(c,a),{r:l,g:d,b:c}},Mt=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Xl=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),$l=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},jl=e=>new Promise((t,n)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>{t(s)},s.onerror=i=>{n(i)},s.src=e}),Ql=e=>{const t=Ul(e),n=Gl(e),{createWorker:s}=e.utils,i=(E,_,O)=>new Promise(y=>{E.ref.imageData||(E.ref.imageData=O.getContext("2d").getImageData(0,0,O.width,O.height));const M=$l(E.ref.imageData);if(!_||_.length!==20)return O.getContext("2d").putImageData(M,0,0),y();const v=s(Vl);v.post({imageData:M,colorMatrix:_},D=>{O.getContext("2d").putImageData(D,0,0),v.terminate(),y()},[M.data.buffer])}),o=(E,_)=>{E.removeChildView(_),_.image.width=1,_.image.height=1,_._destroy()},r=({root:E})=>{const _=E.ref.images.shift();return _.opacity=0,_.translateY=-15,E.ref.imageViewBin.push(_),_},a=({root:E,props:_,image:O})=>{const y=_.id,M=E.query("GET_ITEM",{id:y});if(!M)return;const v=M.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},D=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let b,G,L=!1;E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(b=M.getMetadata("markup")||[],G=M.getMetadata("resize"),L=!0);const P=E.appendChildView(E.createChildView(n,{id:y,image:O,crop:v,resize:G,markup:b,dirty:L,background:D,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),E.childViews.length);E.ref.images.push(P),P.opacity=1,P.scaleX=1,P.scaleY=1,P.translateY=0,setTimeout(()=>{E.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:y})},250)},l=({root:E,props:_})=>{const O=E.query("GET_ITEM",{id:_.id});if(!O)return;const y=E.ref.images[E.ref.images.length-1];y.crop=O.getMetadata("crop"),y.background=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(y.dirty=!0,y.resize=O.getMetadata("resize"),y.markup=O.getMetadata("markup"))},d=({root:E,props:_,action:O})=>{if(!/crop|filter|markup|resize/.test(O.change.key)||!E.ref.images.length)return;const y=E.query("GET_ITEM",{id:_.id});if(y){if(/filter/.test(O.change.key)){const M=E.ref.images[E.ref.images.length-1];i(E,O.change.value,M.image);return}if(/crop|markup|resize/.test(O.change.key)){const M=y.getMetadata("crop"),v=E.ref.images[E.ref.images.length-1];if(M&&M.aspectRatio&&v.crop&&v.crop.aspectRatio&&Math.abs(M.aspectRatio-v.crop.aspectRatio)>1e-5){const D=r({root:E});a({root:E,props:_,image:Xl(D.image)})}else l({root:E,props:_})}}},c=E=>{const O=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),y=O?parseInt(O[1]):null;return y!==null&&y<=58?!1:"createImageBitmap"in window&&Fs(E)},u=({root:E,props:_})=>{const{id:O}=_,y=E.query("GET_ITEM",O);if(!y)return;const M=URL.createObjectURL(y.file);Bl(M,(v,D)=>{E.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:O,width:v,height:D})})},m=({root:E,props:_})=>{const{id:O}=_,y=E.query("GET_ITEM",O);if(!y)return;const M=URL.createObjectURL(y.file),v=()=>{jl(M).then(D)},D=b=>{URL.revokeObjectURL(M);const L=(y.getMetadata("exif")||{}).orientation||-1;let{width:P,height:H}=b;if(!P||!H)return;L>=5&&L<=8&&([P,H]=[H,P]);const w=Math.max(1,window.devicePixelRatio*.75),S=E.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*w,A=H/P,C=E.rect.element.width,N=E.rect.element.height;let V=C,W=V*A;A>1?(V=Math.min(P,C*S),W=V*A):(W=Math.min(H,N*S),V=W/A);const Ce=ql(b,V,W,L),Ze=()=>{const Tt=E.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?zl(data):null;y.setMetadata("color",Tt,!0),"close"in b&&b.close(),E.ref.overlayShadow.opacity=1,a({root:E,props:_,image:Ce})},fe=y.getMetadata("filter");fe?i(E,fe,Ce).then(Ze):Ze()};if(c(y.file)){const b=s(Fl);b.post({file:y.file},G=>{if(b.terminate(),!G){v();return}D(G)})}else v()},p=({root:E})=>{const _=E.ref.images[E.ref.images.length-1];_.translateY=0,_.scaleX=1,_.scaleY=1,_.opacity=1},f=({root:E})=>{E.ref.overlayShadow.opacity=1,E.ref.overlayError.opacity=0,E.ref.overlaySuccess.opacity=0},I=({root:E})=>{E.ref.overlayShadow.opacity=.25,E.ref.overlayError.opacity=1},h=({root:E})=>{E.ref.overlayShadow.opacity=.25,E.ref.overlaySuccess.opacity=1},R=({root:E})=>{E.ref.images=[],E.ref.imageData=null,E.ref.imageViewBin=[],E.ref.overlayShadow=E.appendChildView(E.createChildView(t,{opacity:0,status:"idle"})),E.ref.overlaySuccess=E.appendChildView(E.createChildView(t,{opacity:0,status:"success"})),E.ref.overlayError=E.appendChildView(E.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:R,styles:["height"],apis:["height"],destroy:({root:E})=>{E.ref.images.forEach(_=>{_.image.width=1,_.image.height=1})},didWriteView:({root:E})=>{E.ref.images.forEach(_=>{_.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:p,DID_IMAGE_PREVIEW_CONTAINER_CREATE:u,DID_FINISH_CALCULATE_PREVIEWSIZE:m,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:I,DID_THROW_ITEM_PROCESSING_ERROR:I,DID_THROW_ITEM_INVALID:I,DID_COMPLETE_ITEM_PROCESSING:h,DID_START_ITEM_PROCESSING:f,DID_REVERT_ITEM_PROCESSING:f},({root:E})=>{const _=E.ref.imageViewBin.filter(O=>O.opacity===0);E.ref.imageViewBin=E.ref.imageViewBin.filter(O=>O.opacity>0),_.forEach(O=>o(E,O)),_.length=0})})},Vs=e=>{const{addFilter:t,utils:n}=e,{Type:s,createRoute:i,isFile:o}=n,r=Ql(e);return t("CREATE_VIEW",a=>{const{is:l,view:d,query:c}=a;if(!l("file")||!c("GET_ALLOW_IMAGE_PREVIEW"))return;const u=({root:h,props:R})=>{const{id:E}=R,_=c("GET_ITEM",E);if(!_||!o(_.file)||_.archived)return;const O=_.file;if(!nl(O)||!c("GET_IMAGE_PREVIEW_FILTER_ITEM")(_))return;const y="createImageBitmap"in(window||{}),M=c("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!y&&M&&O.size>M)return;h.ref.imagePreview=d.appendChildView(d.createChildView(r,{id:E}));const v=h.query("GET_IMAGE_PREVIEW_HEIGHT");v&&h.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:_.id,height:v});const D=!y&&O.size>c("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");h.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:E},D)},m=(h,R)=>{if(!h.ref.imagePreview)return;let{id:E}=R;const _=h.query("GET_ITEM",{id:E});if(!_)return;const O=h.query("GET_PANEL_ASPECT_RATIO"),y=h.query("GET_ITEM_PANEL_ASPECT_RATIO"),M=h.query("GET_IMAGE_PREVIEW_HEIGHT");if(O||y||M)return;let{imageWidth:v,imageHeight:D}=h.ref;if(!v||!D)return;const b=h.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),G=h.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),P=(_.getMetadata("exif")||{}).orientation||-1;if(P>=5&&P<=8&&([v,D]=[D,v]),!Fs(_.file)||h.query("GET_IMAGE_PREVIEW_UPSCALE")){const C=2048/v;v*=C,D*=C}const H=D/v,w=(_.getMetadata("crop")||{}).aspectRatio||H;let F=Math.max(b,Math.min(D,G));const S=h.rect.element.width,A=Math.min(S*w,F);h.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:_.id,height:A})},p=({root:h})=>{h.ref.shouldRescale=!0},f=({root:h,action:R})=>{R.change.key==="crop"&&(h.ref.shouldRescale=!0)},I=({root:h,action:R})=>{h.ref.imageWidth=R.width,h.ref.imageHeight=R.height,h.ref.shouldRescale=!0,h.ref.shouldDrawPreview=!0,h.dispatch("KICK")};d.registerWriter(i({DID_RESIZE_ROOT:p,DID_STOP_RESIZE:p,DID_LOAD_ITEM:u,DID_IMAGE_PREVIEW_CALCULATE_SIZE:I,DID_UPDATE_ITEM_METADATA:f},({root:h,props:R})=>{h.ref.imagePreview&&(h.rect.element.hidden||(h.ref.shouldRescale&&(m(h,R),h.ref.shouldRescale=!1),h.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{h.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:R.id})})}),h.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,s.BOOLEAN],imagePreviewFilterItem:[()=>!0,s.FUNCTION],imagePreviewHeight:[null,s.INT],imagePreviewMinHeight:[44,s.INT],imagePreviewMaxHeight:[256,s.INT],imagePreviewMaxFileSize:[null,s.INT],imagePreviewZoomFactor:[2,s.INT],imagePreviewUpscale:[!1,s.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,s.INT],imagePreviewTransparencyIndicator:[null,s.STRING],imagePreviewCalculateAverageImageColor:[!1,s.BOOLEAN],imagePreviewMarkupShow:[!0,s.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,s.FUNCTION]}}},Zl=typeof window<"u"&&typeof window.document<"u";Zl&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Vs}));/*!
 * FilePondPluginImageValidateSize 1.2.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Kl=e=>/^image/.test(e.type),Jl=e=>new Promise((t,n)=>{const s=document.createElement("img");s.src=URL.createObjectURL(e),s.onerror=o=>{clearInterval(i),n(o)};const i=setInterval(()=>{s.naturalWidth&&s.naturalHeight&&(clearInterval(i),URL.revokeObjectURL(s.src),t({width:s.naturalWidth,height:s.naturalHeight}))},1)}),Bs=({addFilter:e,utils:t})=>{const{Type:n,replaceInString:s,isFile:i}=t,o=(r,a,l)=>new Promise((d,c)=>{const u=({width:m,height:p})=>{const{minWidth:f,minHeight:I,maxWidth:h,maxHeight:R,minResolution:E,maxResolution:_}=a,O=m*p;m<f||p<I?c("TOO_SMALL"):m>h||p>R?c("TOO_BIG"):E!==null&&O<E?c("TOO_LOW_RES"):_!==null&&O>_&&c("TOO_HIGH_RES"),d()};Jl(r).then(u).catch(()=>{if(!l){c();return}l(r,a).then(u).catch(()=>c())})});return e("LOAD_FILE",(r,{query:a})=>new Promise((l,d)=>{if(!i(r)||!Kl(r)||!a("GET_ALLOW_IMAGE_VALIDATE_SIZE")){l(r);return}const c={minWidth:a("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:a("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:a("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:a("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:a("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:a("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},u=a("GET_IMAGE_VALIDATE_SIZE_MEASURE");o(r,c,u).then(()=>{l(r)}).catch(m=>{const p=m?{TOO_SMALL:{label:a("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:a("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:a("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:a("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:a("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:a("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:a("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:a("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[m]:{label:a("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:r.type};d({status:{main:p.label,sub:m?s(p.details,c):p.details}})})})),{options:{allowImageValidateSize:[!0,n.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",n.STRING],imageValidateSizeMeasure:[null,n.FUNCTION],imageValidateSizeMinResolution:[null,n.INT],imageValidateSizeMaxResolution:[null,n.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",n.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",n.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",n.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",n.STRING],imageValidateSizeMinWidth:[1,n.INT],imageValidateSizeMinHeight:[1,n.INT],imageValidateSizeMaxWidth:[65535,n.INT],imageValidateSizeMaxHeight:[65535,n.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",n.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",n.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} × {minHeight}",n.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} × {maxHeight}",n.STRING]}}},ec=typeof window<"u"&&typeof window.document<"u";ec&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Bs}));$e(Gs);$e(Vs);$e(Bs);const tc={data(){return{menu:{menu_label:"Profil",menu_desc:"Profil Perpustakaan",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},user:{},form:{field:{logo:{small:"/storage/images/logo/logo_small.png",big:"/storage/images/logo/logo.png",newsmall:"",newbig:""},info:{}}},errors:{}}},mounted(){this.userinfo(),this.getProfile();const e=ze(document.querySelector(".logo-big"),{credits:null,allowImagePreview:!0,allowMultiple:!1,allowFileEncode:!1,required:!1,storeAsFile:!0,acceptedFileTypes:["image/png"],allowImageValidateSize:!0,imageValidateSizeMaxWidth:1500,imageValidateSizeMaxHeight:510,onerror:n=>{e.removeFiles(),this.$swal({icon:"error",title:"Invalid Image",text:"The image exceeds the maximum dimensions of 1500x510 pixels."})},onupdatefiles:n=>{n.length>0&&(this.form.field.logo.newbig=n[0].file)}}),t=ze(document.querySelector(".logo-small"),{credits:null,allowImagePreview:!0,allowMultiple:!1,allowFileEncode:!1,required:!1,storeAsFile:!0,acceptedFileTypes:["image/png"],allowImageValidateSize:!0,imageValidateSizeMaxWidth:510,imageValidateSizeMaxHeight:510,onerror:n=>{t.removeFiles(),this.$swal({icon:"error",title:"Invalid Image",text:"The image exceeds the maximum dimensions of 510x510 pixels."})},onupdatefiles:n=>{n.length>0&&(this.form.field.logo.newsmall=n[0].file)}})},methods:{__MENU(){let e=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(t=>{e.hide(),this.menu.menu_label=t.data.menu_label,this.menu.menu_desc=t.data.menu_desc,this.menu.permission=t.data.permission}).catch(t=>{e.hide(),console.error(t)})},userinfo(){this.user={},window.axios.get("/userinfo").then(e=>{this.user=e.data}).catch(e=>{console.error(e)})},getProfile(){let e=this.$loading.show();window.axios.get("/setting/profile").then(t=>{e.hide(),this.form.field.info=t.data}).catch(t=>{e.hide(),console.error(t)})},async handleUpdateProfile(){if(this.form.field.info.password!=""&&this.form.field.info.password!==this.form.field.info.passwordConfirm){this.errors.passwordConfirm=["Kata sandi tidak sesuai!"];return}let e=new FormData;Object.keys(this.form.field.info).forEach(n=>{e.append(n,this.form.field.info[n])}),this.form.field.logo.newsmall&&e.append("logo_small",this.form.field.logo.newsmall),this.form.field.logo.newbig&&e.append("logo",this.form.field.logo.newbig);let t=this.$loading.show();await axios.post("/setting/profile",e).then(n=>{t.hide(),this.$swal({title:"Update Profile",text:n.data,icon:n.status===201?"success":"error",allowOutsideClick:!1,allowEscapeKey:!1,showCloseButton:!1,showCancelButton:!1}).then(s=>{location.reload()})}).catch(n=>{if(t.hide(),n.response&&n.response.status===400){this.errors=n.response.data.errors;let s="";for(let i in this.errors)this.errors.hasOwnProperty(i)&&(s+=`${this.errors[i][0]}
`);this.$swal({icon:"error",title:"Kesalahan",text:s})}else this.$swal({icon:"error",title:"Kesalahan",text:"Terjadi kesalahan, silakan coba lagi nanti."})})},printModalContent(){var e=document.getElementById("modalBodyContent").innerHTML;document.getElementById("printableContent").innerHTML=e;var t=window.open("","","height=600,width=800");t.document.write("<html><head>"),t.document.write(`
                <style>
                    @media print {
                        body {
                            -webkit-print-color-adjust: exact !important;
                            print-color-adjust: exact !important;
                        }

                        @page {
                            margin: 0;
                        }

                        .qr-code-body {
                            display: flex;
                            justify-content: center;
                            align-items: center;
                        }

                        .container-offline {
                            width: 450px;
                            height: 550px;
                            background-color: #fff;
                            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);
                            position: relative;
                        }

                        .qr-code {
                            width: 200px;
                            height: 200px;
                            background-color: #fff;
                            border-radius: 10px;
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                        }

                        .texth {
                            position: absolute;
                            top: 20%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            color: #fff;
                            font-size: 20px;
                            font-weight: bold;
                            width: calc(100% - 20px);
                            text-align: center;
                            padding: 0 10px;
                            word-wrap: break-word;
                        }

                        .textb {
                            position: absolute;
                            bottom: 10%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            color: #ffc107;
                            font-size: 20px;
                            font-weight: bold;
                            width: calc(100% - 20px);
                            text-align: center;
                            padding: 0 10px;
                            word-wrap: break-word;
                        }

                        .container-offline::before {
                            content: "";
                            position: absolute;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            width: 100%;
                            height: 50%;
                            background-color: #ffc107;
                            clip-path: polygon(0 0, 100% 0, 100% 50%, 0 100%);
                        }
                    }
                </style>
            `),t.document.write("</head><body>"),t.document.write(document.getElementById("printableContent").innerHTML),t.document.write("</body></html>"),t.document.close(),t.onload=function(){t.print(),t.close()}}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}},watch:{"form.field.info.password"(e,t){this.errors.password&&(this.errors.password=null),e!==this.form.field.info.passwordConfirm?this.errors.passwordConfirm=["Kata sandi tidak sesuai!"]:this.errors.passwordConfirm=null},"form.field.info.passwordConfirm"(e,t){this.errors.passwordConfirm&&(this.errors.passwordConfirm=null),e!==this.form.field.info.password?this.errors.passwordConfirm=["Kata sandi tidak sesuai!"]:this.errors.passwordConfirm=null}}},U=e=>(zs("data-v-c82a67d8"),e=e(),Xs(),e),nc={class:"section"},sc={class:"row"},ic={class:"col-12"},rc={class:"card"},oc={class:"card-body"},ac={class:"d-flex justify-content-center align-items-center flex-column"},lc={class:"avatar avatar-2xl"},cc=["src"],dc={class:"mt-3"},fc={class:"text-small"},uc=U(()=>g("div",{class:"user-dropdown d-flex align-items-center dropend"},[g("button",{type:"button",class:"btn btn-success me-2","data-bs-toggle":"modal","data-bs-target":"#QrCodeModal"}," QR Code Perpustakaan "),g("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#QrCodeModalOffline"}," QR Code Pengunjung Offline ")],-1)),Ec={class:"col-12"},pc={class:"card"},mc=U(()=>g("div",{class:"card-header"},[g("h5",{class:"card-title"},"Logo")],-1)),_c={class:"card-body"},Ic={class:"row"},gc={class:"col-md-6 mb-4"},hc=U(()=>g("label",{for:"name",class:"form-label"},"Logo Besar",-1)),Tc=U(()=>g("br",null,null,-1)),Rc=["src"],Oc=U(()=>g("div",{class:"form-group mt-2"},[g("input",{type:"file",class:"logo-big"})],-1)),Sc={class:"col-md-6 mb-4"},yc=U(()=>g("label",{for:"name",class:"form-label"},"Logo Kecil",-1)),Dc=U(()=>g("br",null,null,-1)),Ac=["src"],wc=U(()=>g("div",{class:"form-group mt-2"},[g("input",{type:"file",class:"logo-small"})],-1)),Mc={class:"col-12"},bc={class:"card"},Lc=U(()=>g("div",{class:"card-header"},[g("h5",{class:"card-title"},"Profil Perpustakaan")],-1)),Pc={class:"card-body"},Cc={class:"row"},vc={class:"col-md-6 mb-4"},Nc={class:"form-group"},Gc=U(()=>g("label",{for:"name",class:"form-label"},"Nama Aplikasi",-1)),xc={class:"form-group"},Uc=U(()=>g("label",{for:"name",class:"form-label"},"Kabupaten/Kota",-1)),Fc={class:"form-group"},Vc=U(()=>g("label",{for:"phone",class:"form-label"},[ne("Nama Penandatangan MOU "),g("small",{class:"text-danger"},"*")],-1)),Bc={class:"form-group"},Hc=U(()=>g("label",{for:"phone",class:"form-label"},[ne("Nama Penanggung Jawab "),g("small",{class:"text-danger"},"*")],-1)),Wc={class:"form-group"},qc=U(()=>g("label",{for:"phone",class:"form-label"},[ne("Nama Pengelola (Admin) "),g("small",{class:"text-danger"},"*")],-1)),Yc={class:"form-group"},kc=U(()=>g("label",{for:"password-column"},"Kata Sandi",-1)),zc={class:"form-group position-relative has-icon-left mb-4"},Xc=U(()=>g("div",{class:"form-control-icon"},[g("i",{class:"bi bi-shield-lock"})],-1)),$c=U(()=>g("p",{class:"text-subtitle text-muted"},"Isi jika ingin ubah kata sandi",-1)),jc={key:0,class:"invalid-feedback"},Qc={class:"col-md-6 mb-4"},Zc={class:"form-group"},Kc=U(()=>g("label",{for:"name",class:"form-label"},"Alamat",-1)),Jc={class:"form-group"},ed=U(()=>g("label",{for:"phone",class:"form-label"},"NPWP",-1)),td={class:"form-group"},nd=U(()=>g("label",{for:"phone",class:"form-label"},[ne("Jabatan Penandatangan MOU "),g("small",{class:"text-danger"},"*")],-1)),sd={class:"form-group"},id=U(()=>g("label",{for:"phone",class:"form-label"},[ne("Jabatan Penanggung Jawab "),g("small",{class:"text-danger"},"*")],-1)),rd={class:"form-group"},od=U(()=>g("label",{for:"phone",class:"form-label"},[ne("Nomor HP/WA (Admin) "),g("small",{class:"text-danger"},"*")],-1)),ad={class:"form-group"},ld=U(()=>g("label",{for:"password-confirm-column"},"Ulangi Kata Sandi",-1)),cd={class:"form-group position-relative has-icon-left mb-4"},dd=U(()=>g("div",{class:"form-control-icon"},[g("i",{class:"bi bi-shield-lock"})],-1)),fd={key:0,class:"invalid-feedback"},ud=U(()=>g("div",{class:"col-md-12 mb-4"},[g("div",{class:"form-group my-2 d-flex justify-content-end"},[g("button",{type:"submit",class:"btn btn-primary"},"Simpan Perubahan")])],-1)),Ed={class:"modal fade text-left",id:"QrCodeModal",tabindex:"-1",role:"dialog","aria-labelledby":"QrCodeModalLabel","aria-hidden":"true"},pd={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-full",role:"document"},md={class:"modal-content"},_d=U(()=>g("div",{class:"modal-header"},[g("h4",{class:"modal-title",id:"myModalLabel20"},"QR Code Pengunjung")],-1)),Id={class:"modal-body",id:"modalBodyContent"},gd={class:"qr-code-body"},hd={class:"container-offline"},Td={class:"texth"},Rd=U(()=>g("br",null,null,-1)),Od=U(()=>g("div",{class:"qr-code"},[g("img",{src:"/storage/images/logo/qrcode.png",style:{"max-width":"200px","max-height":"200px"}})],-1)),Sd={class:"textb"},yd=U(()=>g("br",null,null,-1)),Dd={class:"modal-footer"},Ad=U(()=>g("i",{class:"bx bx-check d-block d-sm-none"},null,-1)),wd=U(()=>g("span",{class:"d-none d-sm-block"},"Cetak",-1)),Md=[Ad,wd],bd=U(()=>g("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[g("i",{class:"bx bx-x d-block d-sm-none"}),g("span",{class:"d-none d-sm-block"},"Tutup")],-1)),Ld={class:"modal fade text-left",id:"QrCodeModalOffline",tabindex:"-1",role:"dialog","aria-labelledby":"QrCodeModalOfflineLabel","aria-hidden":"true"},Pd={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-full",role:"document"},Cd={class:"modal-content"},vd=U(()=>g("div",{class:"modal-header"},[g("h4",{class:"modal-title",id:"myModalLabel20"},"QR Code Pengunjung Offline")],-1)),Nd={class:"modal-body",id:"modalBodyContent"},Gd={class:"qr-code-body"},xd={class:"container-offline"},Ud={class:"texth"},Fd=U(()=>g("br",null,null,-1)),Vd=U(()=>g("div",{class:"qr-code"},[g("img",{src:"/storage/images/logo/qrcode_offline.png",style:{"max-width":"200px","max-height":"200px"}})],-1)),Bd={class:"textb"},Hd=U(()=>g("br",null,null,-1)),Wd={class:"modal-footer"},qd=U(()=>g("i",{class:"bx bx-check d-block d-sm-none"},null,-1)),Yd=U(()=>g("span",{class:"d-none d-sm-block"},"Cetak",-1)),kd=[qd,Yd],zd=U(()=>g("button",{type:"button",class:"btn btn-light-secondary","data-bs-dismiss":"modal"},[g("i",{class:"bx bx-x d-block d-sm-none"}),g("span",{class:"d-none d-sm-block"},"Tutup")],-1)),Xd=U(()=>g("div",{id:"printableArea",style:{display:"none"}},[g("div",{id:"printableContent"})],-1));function $d(e,t,n,s,i,o){const r=ks("action-bar");return He(),Be(Ys,null,[Ws(r,{data:i.menu,"menu-label":i.menu.menu_label},null,8,["data","menu-label"]),g("section",nc,[g("div",sc,[g("div",ic,[g("div",rc,[g("div",oc,[g("div",ac,[g("div",lc,[g("img",{src:"/storage/images/logo/logo_small.png?"+Math.floor(Math.random()*900)+100},null,8,cc)]),g("h3",dc,me(i.user.name),1),g("p",fc,me(i.user.email),1),uc])])])]),g("div",Ec,[g("div",pc,[mc,g("div",_c,[g("div",Ic,[g("div",gc,[hc,Tc,i.form.field.logo.small?(He(),Be("img",{key:0,src:i.form.field.logo.big+"?"+Math.floor(Math.random()*900)+100,height:"100px"},null,8,Rc)):Je("",!0),Oc]),g("div",Sc,[yc,Dc,i.form.field.logo.small?(He(),Be("img",{key:0,src:i.form.field.logo.small+"?"+Math.floor(Math.random()*900)+100,height:"100px"},null,8,Ac)):Je("",!0),wc])])])])]),g("div",Mc,[g("div",bc,[Lc,g("div",Pc,[g("form",{class:"form",onSubmit:t[12]||(t[12]=qs((...a)=>o.handleUpdateProfile&&o.handleUpdateProfile(...a),["prevent"]))},[g("div",Cc,[g("div",vc,[g("div",Nc,[Gc,re(g("input",{type:"text",name:"name",id:"name",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>i.form.field.info.application_name=a),placeholder:"Nama Aplikasi"},null,512),[[oe,i.form.field.info.application_name]])]),g("div",xc,[Uc,re(g("input",{type:"text",name:"name",id:"name",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=a=>i.form.field.info.kabupaten_name=a),placeholder:"Kabupaten/Kota",readonly:""},null,512),[[oe,i.form.field.info.kabupaten_name]])]),g("div",Fc,[Vc,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=a=>i.form.field.info.mou_sign_name=a),placeholder:"Nama Penandatangan MOU",readonly:""},null,512),[[oe,i.form.field.info.mou_sign_name]])]),g("div",Bc,[Hc,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=a=>i.form.field.info.pers_responsible=a),placeholder:"Nama Penanggung Jawab",readonly:""},null,512),[[oe,i.form.field.info.pers_responsible]])]),g("div",Wc,[qc,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=a=>i.form.field.info.administrator_name=a),placeholder:"Nama Pengelola"},null,512),[[oe,i.form.field.info.administrator_name]])]),g("div",Yc,[kc,g("div",zc,[re(g("input",{type:"password",class:Qt(["form-control form-control-md",{"is-invalid":i.errors.password}]),placeholder:"Kata Sandi","onUpdate:modelValue":t[5]||(t[5]=a=>i.form.field.info.password=a)},null,2),[[oe,i.form.field.info.password]]),Xc,$c,i.errors.password?(He(),Be("div",jc,me(i.errors.password[0]),1)):Je("",!0)])])]),g("div",Qc,[g("div",Zc,[Kc,re(g("input",{type:"text",name:"name",id:"name",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=a=>i.form.field.info.address=a),placeholder:"Alamat"},null,512),[[oe,i.form.field.info.address]])]),g("div",Jc,[ed,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=a=>i.form.field.info.npwp=a),placeholder:"NPWP"},null,512),[[oe,i.form.field.info.npwp]])]),g("div",td,[nd,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=a=>i.form.field.info.pos_sign_name=a),placeholder:"Jabatan Penandatangan MOU",readonly:""},null,512),[[oe,i.form.field.info.pos_sign_name]])]),g("div",sd,[id,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=a=>i.form.field.info.pos_pers_responsible=a),placeholder:"Jabatan Penanggung Jawab",readonly:""},null,512),[[oe,i.form.field.info.pos_pers_responsible]])]),g("div",rd,[od,re(g("input",{type:"text",name:"phone",id:"phone",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=a=>i.form.field.info.administrator_phone=a),placeholder:"Nomor HP/WA"},null,512),[[oe,i.form.field.info.administrator_phone]])]),g("div",ad,[ld,g("div",cd,[re(g("input",{type:"password",class:Qt(["form-control form-control-md",{"is-invalid":i.errors.passwordConfirm}]),placeholder:"Ulangi Kata Sandi","onUpdate:modelValue":t[11]||(t[11]=a=>i.form.field.info.passwordConfirm=a)},null,2),[[oe,i.form.field.info.passwordConfirm]]),dd,i.errors.passwordConfirm?(He(),Be("div",fd,me(i.errors.passwordConfirm[0]),1)):Je("",!0)])])])]),ud],32)])])])])]),g("div",Ed,[g("div",pd,[g("div",md,[_d,g("div",Id,[g("div",gd,[g("div",hd,[g("div",Td,[ne(me(i.form.field.info.application_name)+" ",1),Rd,ne("Scan untuk mengunjungi aplikasi ")]),Od,g("div",Sd,[ne(me(i.form.field.info.instansi_name)+" ",1),yd,ne(me(i.form.field.info.app_url),1)])])])]),g("div",Dd,[g("button",{type:"button",class:"btn btn-primary ms-1",onClick:t[13]||(t[13]=a=>o.printModalContent())},Md),bd])])])]),g("div",Ld,[g("div",Pd,[g("div",Cd,[vd,g("div",Nd,[g("div",Gd,[g("div",xd,[g("div",Ud,[ne(me(i.form.field.info.application_name)+" ",1),Fd,ne("Scan untuk kunjungan di lokasi ")]),Vd,g("div",Bd,[ne(me(i.form.field.info.instansi_name)+" ",1),Hd,ne(me(i.form.field.info.app_url)+"/offline-visitor ",1)])])])]),g("div",Wd,[g("button",{type:"button",class:"btn btn-primary ms-1",onClick:t[14]||(t[14]=a=>o.printModalContent())},kd),zd])])])]),Xd],64)}const Zd=Hs(tc,[["render",$d],["__scopeId","data-v-c82a67d8"]]);export{Zd as default};
//# sourceMappingURL=Profile-BgPl59hh.js.map
