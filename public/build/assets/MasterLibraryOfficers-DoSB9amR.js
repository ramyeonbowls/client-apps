import{F as x,a as T,E}from"./vee-validate.esm-Nlz2O7Po.js";import{_ as C,c as u,d as c,a as e,F as b,e as m,g,n as f,w as F,r as p,o as _,s as v,v as w}from"./sweetalert2.min-C72B2ZMm.js";import"./_commonjsHelpers-DSXiPLDm.js";let d;const M={components:{VeeForm:x,Field:T,ErrorMessage:E},data(){return{menu:{menu_label:"",menu_desc:"",permission:{create:!1,read:!1,update:!1,delete:!1,print:!1,approve:!1}},selected:[],form:{submitted:!1,new:!1,edit:!1,field:{nip:"",name:"",position:""}},errors:{}}},mounted(){this.__MENU(),this.$root.web_access_log();let n=this;d=$("#data_rst").DataTable({paging:!0,pagingType:"full_numbers",lengthMenu:[[10,25,50,100,500],[10,25,50,100,500]],pageLength:25,processing:!0,serverSide:!0,deferRender:!0,stateSave:!0,select:!0,rowId:"extn",order:[[0,"asc"]],ajax:"/master/library-officer-mst",columns:[{data:"nip"},{data:"name"},{data:"position"}],language:{lengthMenu:"_MENU_",search:"_INPUT_",searchPlaceholder:"Pencarian..",info:'<span class="fs-sm">Menampilkan _START_ sampai _END_ dari _TOTAL_ entri</span>',infoEmpty:'<span class="fs-sm">Menampilkan 0 sampai 0 dari 0 entri</span>',infoFiltered:'<span class="fs-sm">(disaring dari _MAX_ total entri)</span>',zeroRecords:'<span class="fs-sm">Tidak Ada Data</span>',paginate:{first:'<i class="bi bi-chevron-double-left"></i>',previous:'<i class="bi bi-chevron-left"></i>',next:'<i class="bi bi-chevron-right"></i>',last:'<i class="bi bi-chevron-double-right"></i>'}}}),window.$("#data_rst tbody").on("click","tr",function(){n.selected=[],window.$(this).hasClass("selected")?window.$(this).removeClass("selected"):(d.$("tr.selected").removeClass("selected"),window.$(this).addClass("selected"),d.rows(".selected").data().length>0&&n.selected.push(d.rows(".selected").data()[0]))})},methods:{__MENU(){let n=this.$loading.show();window.axios.get("/web-access-log/"+this.$route.name).then(s=>{n.hide(),this.menu.menu_label=s.data.menu_label,this.menu.menu_desc=s.data.menu_desc,this.menu.permission=s.data.permission}).catch(s=>{n.hide(),console.error(s)})},create(){this.form.new=!0,this.form.edit=!1,this.clearForm()},edit(){this.selected.length>0?(this.form.new=!1,this.form.edit=!0,this.submitted=!1,this.form.field.id=this.selected[0].id,this.form.field.nip=this.selected[0].nip,this.form.field.name=this.selected[0].name,this.form.field.position=this.selected[0].position):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},destroy(){this.selected.length>0?this.$swal({icon:"question",text:"Apakah anda yakin ingin menghapus data ini?",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:'<i class="bi bi-trash-fill"></i> Hapus',cancelButtonText:'<i class="bi bi-x-square-fill"></i> Batal',buttonsStyling:!1,customClass:{confirmButton:"btn btn-sm btn-danger me-2",cancelButton:"btn btn-sm btn-secondary"}}).then(n=>{if(n.value){let s=this.$loading.show();window.axios.delete("/master/library-officer-mst/"+this.selected[0].id+"?menufn="+this.$route.name).then(l=>{s.hide(),this.selected=[],d.ajax.reload(),this.$swal({toast:!0,icon:"success",html:l.data})})}}):this.$swal({toast:!0,icon:"warning",text:"Tidak ada baris yang dipilih!"})},submit(){this.form.submitted||(this.form.submitted=!0,this.$refs.form.setErrors({nip:[],name:[],position:[]}),this.$refs.form.validate().then(n=>{if(n.valid){this.form.submitted=!1;let s=this.$loading.show();if(this.form.new){let l=new FormData;Object.keys(this.form.field).forEach(t=>{l.append(t,this.form.field[t])}),window.axios.post("/master/library-officer-mst?menu_fn="+this.$route.name,l).then(t=>{s.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:t.status===201?"success":"info",html:t.data})}).catch(t=>{s.hide(),this.form.submitted=!1,t.response.status===422&&this.$refs.form.setErrors(t.response.data.errors)})}else{let l=new FormData;l.append("_method","PUT"),Object.keys(this.form.field).forEach(t=>{l.append(t,this.form.field[t])}),window.axios.post("/master/library-officer-mst/"+this.form.field.id+"?menu_fn="+this.$route.name,l).then(t=>{s.hide(),this.cancel(),this.$swal({toast:!0,position:"top",icon:t.status===201?"success":"info",html:t.data})}).catch(t=>{s.hide(),this.form.submitted=!1,t.response.status===422&&this.$refs.form.setErrors(t.response.data.errors)})}}else this.form.submitted=!1}))},cancel(){this.form.new=!1,this.form.edit=!1,this.form.submitted=!1,this.selected=[],this.clearForm(),d.ajax.reload(null,!1)},clearForm(){this.form.field.id="",this.form.field.nip="",this.form.field.name="",this.form.field.position="",this.$refs.form.setErrors({nip:[],name:[],position:[]}),this.$refs.form.resetForm()}},computed:{cPermitted(){return this.menu.permission.create},rPermitted(){return this.menu.permission.read},uPermitted(){return this.menu.permission.update},dPermitted(){return this.menu.permission.delete},pPermitted(){return this.menu.permission.print},aPermitted(){return this.menu.permission.approve}}},N={class:"section"},P={class:"row"},B={class:"col-md-12"},V={class:"card"},I={class:"card-header"},S={class:"buttons"},U=e("i",{class:"bi bi-check-square-fill"},null,-1),j=e("i",{class:"bi bi-pencil-square"},null,-1),q=e("i",{class:"bi bi-x-square-fill"},null,-1),D=e("i",{class:"bi bi-check-square-fill"},null,-1),A=e("i",{class:"bi bi-x-square-fill"},null,-1),O={class:"card-body"},z={class:"nav nav-tabs",id:"myTab",role:"tablist"},J={class:"nav-item",role:"presentation"},L={class:"nav-item",role:"presentation"},R={class:"tab-content",id:"myTabContent"},H=e("table",{class:"table table-striped",id:"data_rst"},[e("thead",null,[e("tr",null,[e("th",null,"Nama"),e("th",null,"NIK"),e("th",null,"Jabatan")])])],-1),K=[H],X=["onSubmit"],G={class:"form-body"},Q={class:"row"},W=e("p",{class:"col-12"},null,-1),Y={class:"col-12"},Z={class:"form-group has-icon-left"},ee=e("label",{for:"email-id-icon"},"NIP",-1),se={class:"position-relative"},te=e("div",{class:"form-control-icon"},[e("i",{class:"bi bi-card-text"})],-1),ie={class:"col-12"},ae={class:"form-group has-icon-left"},oe=e("label",{for:"first-name-icon"},"Nama",-1),ne={class:"position-relative"},le=e("div",{class:"form-control-icon"},[e("i",{class:"bi bi-person"})],-1),re={class:"col-12"},de={class:"form-group has-icon-left"},ce=e("label",{for:"mobile-id-icon"},"Jabatan",-1),me={class:"position-relative"},fe=e("div",{class:"form-control-icon"},[e("i",{class:"bi bi-person-vcard"})],-1);function he(n,s,l,t,i,a){const y=p("action-bar"),h=p("ErrorMessage"),k=p("VeeForm");return _(),u(b,null,[c(y,{data:i.menu,"menu-label":i.menu.menu_label},null,8,["data","menu-label"]),e("section",N,[e("div",P,[e("div",B,[e("div",V,[e("div",I,[e("div",S,[!i.form.new&&!i.form.edit?(_(),u(b,{key:0},[e("a",{href:"#",class:"btn icon icon-left btn-primary",onClick:s[0]||(s[0]=(...o)=>a.create&&a.create(...o))},[U,m(" Tambah")]),e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:s[1]||(s[1]=(...o)=>a.edit&&a.edit(...o))},[j,m(" Sunting")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:s[2]||(s[2]=(...o)=>a.destroy&&a.destroy(...o))},[q,m(" Hapus")])],64)):(_(),u(b,{key:1},[e("a",{href:"#",class:"btn icon icon-left btn-success",onClick:s[3]||(s[3]=g((...o)=>a.submit&&a.submit(...o),["prevent"]))},[D,m(" Simpan")]),e("a",{href:"#",class:"btn icon icon-left btn-danger",onClick:s[4]||(s[4]=(...o)=>a.cancel&&a.cancel(...o))},[A,m(" Batal")])],64))])]),e("div",O,[e("ul",z,[e("li",J,[e("a",{class:f(["nav-link",i.form.new||i.form.edit?"disabled":"active"]),id:"data-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"data","aria-selected":"true"},"Data",2)]),e("li",L,[e("a",{class:f(["nav-link",!i.form.new&&!i.form.edit?"disabled":"active"]),id:"form-tab","data-bs-toggle":"tab",href:"javascript:void(0);",role:"tab","aria-controls":"form","aria-selected":"false"},"Form",2)])]),e("div",R,[e("div",{class:f(["tab-pane fade",!i.form.new&&!i.form.edit?"show active":""]),id:"data",role:"tabpanel","aria-labelledby":"data-tab"},K,2),e("div",{class:f(["tab-pane fade",i.form.new||i.form.edit?"show active":""]),id:"form",role:"tabpanel","aria-labelledby":"form-tab"},[c(k,{ref:"form",as:"div"},{default:F(({handleSubmit:o})=>[e("form",{class:"form form-horizontal",onSubmit:g(r=>o(r,a.submit),["prevent"])},[e("div",G,[e("div",Q,[W,e("div",Y,[e("div",Z,[ee,e("div",se,[v(e("input",{type:"text",class:"form-control",placeholder:"NIP",id:"email-id-icon","onUpdate:modelValue":s[5]||(s[5]=r=>i.form.field.nip=r)},null,512),[[w,i.form.field.nip]]),te]),c(h,{name:"nip",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})])]),e("div",ie,[e("div",ae,[oe,e("div",ne,[v(e("input",{type:"text",class:"form-control",placeholder:"Nama",id:"first-name-icon","onUpdate:modelValue":s[6]||(s[6]=r=>i.form.field.name=r)},null,512),[[w,i.form.field.name]]),le]),c(h,{name:"name",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})])]),e("div",re,[e("div",de,[ce,e("div",me,[v(e("input",{type:"text",class:"form-control",placeholder:"Jabatan",id:"mobile-id-icon","onUpdate:modelValue":s[7]||(s[7]=r=>i.form.field.position=r)},null,512),[[w,i.form.field.position]]),fe]),c(h,{name:"position",class:"invalid-feedback animated fadeIn mt-0 mb-1",style:{display:"block"}})])])])])],40,X)]),_:1},512)],2)])])])])])])],64)}const _e=C(M,[["render",he]]);export{_e as default};
//# sourceMappingURL=MasterLibraryOfficers-DoSB9amR.js.map
