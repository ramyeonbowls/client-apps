{"version":3,"file":"sidebar-CM1cPj1c.js","sources":["../../../resources/js/assets/js/helper/isDesktop.js","../../../resources/js/assets/js/components/sidebar.js"],"sourcesContent":["export default (window) => window.innerWidth > 1200\n","import isDesktop from '../helper/isDesktop'\n\n/**\n * Calculate nested children height in sidebar menu\n * @param {HTMLElement} el\n */\nconst calculateChildrenHeight = (el, deep = false) => {\n    const children = el.children\n\n    let height = 0\n    for (let i = 0; i < el.childElementCount; i++) {\n        const child = children[i]\n        height += child.querySelector('.submenu-link').clientHeight\n\n        // 2-level menu\n        if (deep && child.classList.contains('has-sub')) {\n            const subsubmenu = child.querySelector('.submenu')\n\n            if (subsubmenu.classList.contains('submenu-open')) {\n                const childrenHeight = ~~[...subsubmenu.querySelectorAll('.submenu-link')].reduce((acc, curr) => acc + curr.clientHeight, 0)\n                height += childrenHeight\n            }\n        }\n    }\n    el.style.setProperty('--submenu-height', height + 'px')\n    return height\n}\n\n/**\n * a Sidebar component\n * @param  {HTMLElement} el - sidebar element\n * @param  {object} options={} - options\n */\nclass Sidebar {\n    constructor(el, options = {}) {\n        this.sidebarEL = el instanceof HTMLElement ? el : document.querySelector(el)\n        this.options = options\n        this.init()\n    }\n\n    /**\n     * initialize the sidebar\n     */\n    init() {\n        // add event listener to sidebar\n        document.querySelectorAll('.burger-btn').forEach((el) => el.addEventListener('click', this.toggle.bind(this)))\n        document.querySelectorAll('.sidebar-hide').forEach((el) => el.addEventListener('click', this.toggle.bind(this)))\n        window.addEventListener('resize', this.onResize.bind(this))\n\n        const toggleSubmenu = (el) => {\n            if (el.classList.contains('submenu-open')) {\n                el.classList.remove('submenu-open')\n                el.classList.add('submenu-closed')\n            } else {\n                el.classList.remove('submenu-closed')\n                el.classList.add('submenu-open')\n            }\n        }\n\n        let sidebarItems = document.querySelectorAll('.sidebar-item.has-sub')\n        for (var i = 0; i < sidebarItems.length; i++) {\n            let sidebarItem = sidebarItems[i]\n\n            sidebarItems[i].querySelector('.sidebar-link').addEventListener('click', (e) => {\n                e.preventDefault()\n                let submenu = sidebarItem.querySelector('.submenu')\n                toggleSubmenu(submenu)\n            })\n\n            // If submenu has submenu\n            const submenuItems = sidebarItem.querySelectorAll('.submenu-item.has-sub')\n            submenuItems.forEach((item) => {\n                item.addEventListener('click', () => {\n                    const submenuLevelTwo = item.querySelector('.submenu')\n                    toggleSubmenu(submenuLevelTwo)\n\n                    // Pass second .submenu\n                    const height = calculateChildrenHeight(item.parentElement, true)\n                })\n            })\n        }\n\n        // Perfect Scrollbar Init\n        if (typeof PerfectScrollbar == 'function') {\n            const container = document.querySelector('.sidebar-wrapper')\n            const ps = new PerfectScrollbar(container, {\n                wheelPropagation: true,\n            })\n        }\n\n        // Scroll into active sidebar\n        setTimeout(() => {\n            const activeSidebarItem = document.querySelector('.sidebar-item.active')\n            if (activeSidebarItem) {\n                this.forceElementVisibility(activeSidebarItem)\n            }\n        }, 300)\n\n        if (this.options.recalculateHeight) {\n            reInit_SubMenuHeight(sidebarEl)\n        }\n    }\n\n    /**\n     * On Sidebar Rezise Event\n     */\n    onResize() {\n        if (isDesktop(window)) {\n            this.sidebarEL.classList.add('active')\n            this.sidebarEL.classList.remove('inactive')\n        } else {\n            this.sidebarEL.classList.remove('active')\n        }\n\n        // reset\n        this.deleteBackdrop()\n        this.toggleOverflowBody(true)\n    }\n\n    /**\n     * Toggle Sidebar\n     */\n    toggle() {\n        const sidebarState = this.sidebarEL.classList.contains('active')\n        if (sidebarState) {\n            this.hide()\n        } else {\n            this.show()\n        }\n    }\n\n    /**\n     * Show Sidebar\n     */\n    show() {\n        this.sidebarEL.classList.add('active')\n        this.sidebarEL.classList.remove('inactive')\n        this.createBackdrop()\n        this.toggleOverflowBody()\n    }\n\n    /**\n     * Hide Sidebar\n     */\n    hide() {\n        this.sidebarEL.classList.remove('active')\n        this.sidebarEL.classList.add('inactive')\n        this.deleteBackdrop()\n        this.toggleOverflowBody()\n    }\n\n    /**\n     * Create Sidebar Backdrop\n     */\n    createBackdrop() {\n        if (isDesktop(window)) return\n        this.deleteBackdrop()\n        const backdrop = document.createElement('div')\n        backdrop.classList.add('sidebar-backdrop')\n        backdrop.addEventListener('click', this.hide.bind(this))\n        document.body.appendChild(backdrop)\n    }\n\n    /**\n     * Delete Sidebar Backdrop\n     */\n    deleteBackdrop() {\n        const backdrop = document.querySelector('.sidebar-backdrop')\n        if (backdrop) {\n            backdrop.remove()\n        }\n    }\n\n    /**\n     * Toggle Overflow Body\n     */\n    toggleOverflowBody(active) {\n        if (isDesktop(window)) return\n        const sidebarState = this.sidebarEL.classList.contains('active')\n        const body = document.querySelector('body')\n        if (typeof active == 'undefined') {\n            body.style.overflowY = sidebarState ? 'hidden' : 'auto'\n        } else {\n            body.style.overflowY = active ? 'auto' : 'hidden'\n        }\n    }\n\n    isElementInViewport(el) {\n        var rect = el.getBoundingClientRect()\n\n        return rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    }\n\n    forceElementVisibility(el) {\n        if (!this.isElementInViewport(el)) {\n            el.scrollIntoView(false)\n        }\n    }\n}\n\nlet sidebarEl = document.getElementById('sidebar')\n\n/**\n * On First Load\n */\nconst onFirstLoad = (sidebarEL) => {\n    if (!sidebarEl) return\n    if (isDesktop(window)) {\n        sidebarEL.classList.add('active')\n        sidebarEL.classList.add('sidebar-desktop')\n    }\n\n    // Get submenus size\n    let submenus = document.querySelectorAll('.sidebar-item.has-sub .submenu')\n    for (var i = 0; i < submenus.length; i++) {\n        let submenu = submenus[i]\n        const sidebarItem = submenu.parentElement\n        const height = submenu.clientHeight\n\n        if (sidebarItem.classList.contains('active')) submenu.classList.add('submenu-open')\n        else submenu.classList.add('submenu-closed')\n        setTimeout(() => {\n            const height = calculateChildrenHeight(submenu, true)\n        }, 50)\n    }\n}\n\nconst reInit_SubMenuHeight = (sidebarEl) => {\n    if (!sidebarEl) return\n\n    // Get submenus size\n    let submenus = document.querySelectorAll('.sidebar-item.has-sub .submenu')\n    for (var i = 0; i < submenus.length; i++) {\n        let submenu = submenus[i]\n        const sidebarItem = submenu.parentElement\n        const height = submenu.clientHeight\n\n        if (sidebarItem.classList.contains('active')) submenu.classList.add('submenu-open')\n        else submenu.classList.add('submenu-closed')\n        setTimeout(() => {\n            const height = calculateChildrenHeight(submenu, true)\n        }, 50)\n    }\n}\n\nif (document.readyState !== 'loading') {\n    onFirstLoad(sidebarEl)\n} else {\n    window.addEventListener('DOMContentLoaded', () => onFirstLoad(sidebarEl))\n}\n/**\n * Create Sidebar Wrapper\n */\n\n// NOTE make Sidebar method as a global function\nwindow.Sidebar = Sidebar\nwindow.onFirstLoad = onFirstLoad\n\n// NOTE use this to reinitialize sidebar with recalculate height\n// NOTE fixed dropdown smooth animation\n/* \nconst sidebar = new window.Sidebar(document.getElementById(\"sidebar\"), {\n  recalculateHeight: true\n}) \n*/\n"],"names":["isDesktop","window","calculateChildrenHeight","el","deep","children","height","i","child","subsubmenu","childrenHeight","acc","curr","Sidebar","options","toggleSubmenu","sidebarItems","sidebarItem","e","submenu","item","submenuLevelTwo","container","activeSidebarItem","reInit_SubMenuHeight","sidebarEl","backdrop","active","sidebarState","body","rect","onFirstLoad","sidebarEL","submenus"],"mappings":"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"}