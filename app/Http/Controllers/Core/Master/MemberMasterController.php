<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-23 17:36:13             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Master; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use Illuminate\Support\Facades\Log; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use PhpOffice\PhpSpreadsheet\IOFactory; use Yajra\DataTables\Facades\DataTables; use Illuminate\Support\Facades\Validator; use App\Services\Master\MemberMasterService; use App\Exports\Master\MemberMasterTemplateExport; class MemberMasterController extends Controller { private MemberMasterService $member_service; public function __construct() { $this->middleware("\x61\165\x74\x68"); $this->member_service = new MemberMasterService(); } public function index(Request $request) : JsonResponse { goto mfk4Q; z0xBT: $results = []; goto Bzo2y; mfk4Q: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\x4c\157\x67"); goto Utcvo; Utcvo: $logs->write(__FUNCTION__, "\123\x54\x41\122\124"); goto z0xBT; kBeRt: $logs->write(__FUNCTION__, "\x53\124\x4f\x50\15\12"); goto i1V0w; Bzo2y: try { goto B4aMi; UmsRV: $logs->write("\x42\111\116\x44\111\x4e\107", "\x5b" . implode("\x2c\40", $queries[$q]["\x62\x69\156\144\151\156\147\x73"]) . "\135"); goto dD4RO; B4aMi: DB::enableQueryLog(); goto N_UgB; OXILG: $queries = DB::getQueryLog(); goto Ak_Zo; xRxxO: T1V90: goto VdkUp; bsOA2: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\151\156\144\151\x6e\x67\163"], str_replace("\77", "\47\x3f\x27", $queries[$q]["\161\x75\145\x72\x79"])); goto UmsRV; Waj2V: gRavq: goto etlAV; N_UgB: $results = $this->member_service->get(); goto OXILG; dD4RO: $logs->write("\123\x51\114", $sql); goto OGqX8; B08H8: $q++; goto CiHH0; etlAV: if (!($q < count($queries))) { goto T1V90; } goto bsOA2; OGqX8: Ii77q: goto B08H8; Ak_Zo: $q = 0; goto Waj2V; CiHH0: goto gRavq; goto xRxxO; VdkUp: } catch (Throwable $th) { $logs->write("\x45\122\x52\117\122", $th->getMessage()); } goto kBeRt; i1V0w: return DataTables::of($results)->escapeColumns()->editColumn("\x70\x68\157\x74\157", function ($value) { goto QnQi0; IW9Ay: return $photoUrl; goto WAHuS; QnQi0: $photo = isset($value->photo) ? public_path("\57\x73\x74\x6f\x72\141\x67\x65\57\151\155\141\147\145\163\x2f\x70\x72\157\146\151\154\x65\57" . $value->photo) : null; goto GKj5p; GKj5p: $photoUrl = $photo && file_exists($photo) ? "\x2f\163\x74\157\162\141\x67\x65\57\x69\155\x61\x67\x65\x73\57\160\x72\x6f\146\x69\x6c\x65\57" . $value->photo : "\57\163\x74\157\x72\141\x67\145\x2f\x69\x6d\141\147\x65\163\x2f\x70\x72\157\146\x69\x6c\145\57\x64\145\146\x61\165\x6c\x74\x2e\x6a\x70\147"; goto IW9Ay; WAHuS: })->addIndexColumn()->toJson(); goto yYMbM; yYMbM: } public function store(Request $request) { goto W0CY8; tgILJ: $check = true; goto L8RA0; yYQN7: tKjqo: goto D9sSx; gUs2W: $result["\x6d\145\x73\163\141\147\x65"] = ''; goto tgILJ; nSnrN: KL1Nj: goto efx2H; zdao2: if ($request->has("\144\x6f\x77\x6e\154\157\141\x64") && $request->download == "\164\x70\154") { goto tKjqo; } goto Vog_g; L8RA0: $messages = ''; goto bFPpx; D9sSx: $logs->write(__FUNCTION__, "\104\157\167\x6e\x6c\x6f\x61\x64\40\x54\x70\x6c"); goto GlzTs; GlzTs: return Excel::download(new MemberMasterTemplateExport(), "\115\x61\x73\164\x65\162\x5f\115\145\155\x62\x65\x72\x5f\124\x65\155\x70\154\x61\x74\145\56\170\154\x73\170"); goto nSnrN; mDk8c: $logs->write(__FUNCTION__, "\x53\x54\101\122\124"); goto zdao2; bFPpx: try { goto oc9yl; rluLL: vhvU8: goto CmlW2; QXlbp: ebRAQ: goto jtE2P; bOPEG: $errors = ''; goto WxS52; WfMr6: $email = trim($Sheetheader->getCellByColumnAndRow(2, $row)->getFormattedValue()); goto BFz03; pa_sJ: DB::commit(); goto wAlCz; lT2E9: $spreadsheet = IOFactory::load($request->file("\146\151\154\x65")); goto p1dOL; pzDbJ: $data = ["\156\141\x6d\x65" => $name, "\x65\x6d\x61\151\154" => $email, "\160\x68\157\156\145" => $phone, "\147\145\156\x64\145\x72" => $gender, "\142\151\162\x74\x68\x64\x61\171" => $birthday, "\156\x69\x6b" => $nik, "\160\141\x73\163\x77\157\162\144" => $password]; goto JMct9; a5V_x: goto D19xE; goto rluLL; EaUhF: $messages = "\x53\141\154\141\x68\x20\x54\145\155\160\x6c\x61\x74\145\41"; goto GB0gi; cP7q4: $result["\155\145\163\x73\x61\x67\145"] = $messages; goto w8nQq; p1dOL: $Sheetheader = $spreadsheet->getSheet(0); goto egDdb; Z37em: $q = 0; goto MM7wd; gmncR: MuoX6: goto S3XQu; nlxyS: nF5un: goto m08kO; DizoO: goto ebRAQ; goto sMw1i; sMw1i: pf990: goto kPrYC; WRVfW: $H_highestRow = $Sheetheader->getHighestRow(); goto OFKO5; iA5fr: $logs->write("\x46\x61\151\x6c\145\144", $result["\155\x65\x73\163\x61\x67\145"]); goto cP7q4; mMpdQ: DB::enableQueryLog(); goto lT2E9; AQUpa: lhthx: goto Z1yFD; JMct9: $validator = Validator::make($data, ["\156\x61\155\x65" => ["\162\x65\x71\x75\x69\162\145\x64", "\x73\x74\x72\151\156\147", "\x6d\x61\170\72\62\x35\65"], "\x65\155\x61\x69\x6c" => ["\162\x65\x71\x75\151\162\145\144", "\x73\164\162\151\156\147", "\x65\155\x61\x69\x6c", "\x6d\141\x78\72\62\x35\x35", "\165\x6e\x69\x71\x75\x65\x3a\x75\x73\x65\x72\163\x2c\x65\x6d\x61\x69\x6c"], "\x6e\151\x6b" => "\x6e\x75\154\x6c\141\142\x6c\145\x7c\163\164\x72\x69\x6e\x67\x7c\x6d\141\x78\72\x32\60", "\160\x68\x6f\156\x65" => "\162\x65\x71\x75\151\162\145\144\174\163\164\162\151\156\147\x7c\155\141\x78\x3a\61\65", "\x62\151\x72\x74\150\x64\141\x79" => "\x72\x65\x71\165\x69\x72\x65\144\174\144\141\x74\x65", "\147\x65\156\x64\x65\162" => "\162\x65\x71\165\151\x72\145\144\x7c\163\164\x72\151\x6e\x67\x7c\x69\x6e\72\114\x2c\120", "\x70\141\163\163\167\x6f\162\144" => ["\162\x65\161\x75\x69\x72\x65\x64", "\163\164\162\151\156\x67", "\155\151\156\72\70"]]); goto oNTAD; egDdb: $H_worksheetTitle = $Sheetheader->getTitle(); goto WRVfW; CmlW2: DB::rollBack(); goto iA5fr; DTac2: $check = false; goto bOPEG; nw8dg: ++$row; goto bUNJg; wAlCz: $logs->write("\111\116\106\117", "\x53\x75\x63\x63\x65\x73\x73\146\165\154\x6c\171\x20\143\x72\x65\141\x74\145\x64"); goto oXg0v; MM7wd: ffwqb: goto ru8b1; UHJ_l: Vw1v5: goto QXlbp; m08kO: $messages .= $errors; goto AQUpa; CIWSh: $password = trim($Sheetheader->getCellByColumnAndRow(7, $row)->getFormattedValue()); goto pzDbJ; oc9yl: DB::beginTransaction(); goto mMpdQ; WxS52: foreach ($validator->errors()->all() as $error) { $errors .= "\105\x72\x72\157\x72\163\x20\151\156\40\x72\157\167\40" . $row . "\x3a\x20" . $error . "\74\142\162\76"; eer4W: } goto nlxyS; mn0NL: $check = false; goto EaUhF; S3XQu: if (!($row <= $H_highestRow)) { goto Vw1v5; } goto jqCmP; dbUr4: $nik = trim($Sheetheader->getCellByColumnAndRow(6, $row)->getFormattedValue()); goto CIWSh; MqCu9: $q++; goto NAZlf; ru8b1: if (!($q < count($queries))) { goto WjXkt; } goto XXoG2; BcJvy: $queries = DB::getQueryLog(); goto Z37em; zg5Qo: try { goto Y5_U_; ZXSx0: if ($created) { goto N3YBY; } goto wHnZB; Y5_U_: $created = $this->member_service->store((object) $data); goto ZXSx0; EP8ur: $messages = "\x44\x61\164\141\x20\147\x61\x67\141\x6c\x20\x64\x69\x62\165\x61\x74\56"; goto qErzO; wHnZB: $check = false; goto EP8ur; qErzO: N3YBY: goto cOnF2; cOnF2: } catch (Throwable $e) { goto tG8kX; P24CD: $logs->write("\105\x52\122\117\122", $e->getMessage()); goto N0etn; tG8kX: $check = false; goto uYtlg; uYtlg: $messages = "\104\x61\164\x61\x20\147\x61\x67\x61\x6c\x20\x64\x69\x62\165\141\x74\x2e"; goto P24CD; N0etn: } goto LsdWO; oXg0v: $result["\x73\x74\x61\164\x75\163"] = 201; goto c8RT_; LsdWO: ZZXOY: goto SUxx1; c8RT_: $result["\x6d\x65\163\x73\x61\x67\x65"] = "\x44\141\x74\x61\40\x62\x65\162\x68\x61\163\151\x6c\40\144\x69\x62\165\141\164\x2e"; goto a5V_x; kPrYC: $row = 2; goto gmncR; GB0gi: $this->logs->write("\x45\x52\122\117\122", "\x57\x72\157\156\147\40\x54\x65\x6d\160\154\141\x74\145\x21"); goto DizoO; OFKO5: $H_worksheetTitle_A = explode("\40", $H_worksheetTitle); goto R_YRW; SMeYR: WjXkt: goto R5YOl; NAZlf: goto ffwqb; goto SMeYR; w8nQq: D19xE: goto BcJvy; rVOjo: $birthday = trim($Sheetheader->getCellByColumnAndRow(5, $row)->getFormattedValue()); goto dbUr4; jtE2P: if (!$check) { goto vhvU8; } goto pa_sJ; o5w5a: $gender = trim($Sheetheader->getCellByColumnAndRow(4, $row)->getFormattedValue()); goto rVOjo; Z1yFD: if (!$check) { goto ZZXOY; } goto zg5Qo; bUNJg: goto MuoX6; goto UHJ_l; VT6eD: $logs->write("\102\111\116\x44\111\116\107", "\x5b" . implode("\54\x20", $queries[$q]["\142\x69\156\x64\151\156\x67\163"]) . "\135"); goto pPi7c; jqCmP: $name = trim($Sheetheader->getCellByColumnAndRow(1, $row)->getFormattedValue()); goto WfMr6; BFz03: $phone = trim($Sheetheader->getCellByColumnAndRow(3, $row)->getFormattedValue()); goto o5w5a; pPi7c: $logs->write("\123\121\x4c", $sql); goto siqHc; SUxx1: V8Kji: goto nw8dg; siqHc: l5IHJ: goto MqCu9; R_YRW: if (strtolower($H_worksheetTitle_A[0]) == "\155\145\155\x62\145\x72") { goto pf990; } goto mn0NL; oNTAD: if (!$validator->fails()) { goto lhthx; } goto DTac2; XXoG2: $sql = Str::replaceArray("\77", $queries[$q]["\142\151\156\x64\151\x6e\147\x73"], str_replace("\77", "\47\77\47", $queries[$q]["\x71\x75\145\x72\171"])); goto VT6eD; R5YOl: } catch (Throwable $th) { $logs->write("\x45\x52\122\x4f\x52", $th->getMessage()); $result["\155\x65\x73\163\x61\147\x65"] = "\104\141\164\141\40\147\141\147\141\x6c\40\144\x69\142\165\x61\x74\x2e\x3c\142\162\x3e" . $th->getMessage(); } goto O3u3_; O3u3_: $logs->write(__FUNCTION__, "\123\x54\x4f\x50\xd\xa"); goto QMIpQ; QMIpQ: return response()->json($result["\x6d\145\x73\163\x61\x67\145"], $result["\163\x74\x61\164\x75\163"]); goto LGkZm; W0CY8: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\x4c\157\147"); goto mDk8c; LGkZm: goto KL1Nj; goto yYQN7; Vog_g: $result["\x73\x74\141\164\x75\x73"] = 200; goto gUs2W; efx2H: } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update(UpdateMemberMasterRequest $request, string $id) : JsonResponse { goto eWNDr; uOhnU: $result["\x6d\x65\x73\x73\x61\x67\145"] = ''; goto kGdik; kGdik: try { goto Y336y; Azvm7: WnTm0: goto P2w0G; VB4BJ: if (!($q < count($queries))) { goto WnTm0; } goto NnOFC; OCsdf: $result["\163\x74\141\x74\x75\x73"] = 201; goto C1apt; uoRjt: if (!$request->hasFile("\146\x69\x6c\145")) { goto fhh4v; } goto KmucG; uTdv2: $q = 0; goto WKgwp; C1apt: $result["\x6d\145\x73\x73\x61\147\x65"] = "\104\141\164\141\x20\142\145\162\150\141\163\x69\x6c\40\144\151\160\x65\162\142\x61\162\165\x69\56"; goto ZuuMM; bAOjI: $logs->write("\111\116\106\x4f", "\123\165\143\x63\x65\x73\x73\146\165\154\x6c\171\40\x75\160\x64\x61\x74\145\x64"); goto OCsdf; WKgwp: AR6H4: goto VB4BJ; NnOFC: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\151\x6e\144\x69\156\x67\163"], str_replace("\77", "\47\77\47", $queries[$q]["\x71\x75\x65\x72\171"])); goto madnX; UB63P: $logs->write("\123\x51\114", $sql); goto fiOC5; Ks_hb: fhh4v: goto aYY4s; R2GxQ: $q++; goto ULHqo; aYY4s: $updated = $this->member_service->update((object) $validated, $id); goto yKG4W; ZuuMM: djeOG: goto yg6z5; KmucG: try { goto AiJxE; mX81T: $extension = $request->file("\x66\151\x6c\145")->getClientOriginalExtension(); goto ELbL3; ELbL3: $Member_name = explode("\56", str_replace("\40", '', $Member_file))[0] . "\55" . now("\101\x73\x69\141\x2f\x4a\141\x6b\141\162\164\x61")->format("\131\x6d\x64\x48\151\x73") . "\x2d" . rand(100000, 999999) . "\x2e" . $extension; goto AnoM8; X9CI6: $validated["\x66\x69\x6c\145"] = $Member_name; goto nb8IZ; AiJxE: $Member_file = $request->file("\146\151\x6c\x65")->getClientOriginalName(); goto mX81T; AnoM8: $request->file("\146\151\154\145")->storeAs("\x2f\x70\x75\142\x6c\x69\x63\x2f\x69\155\141\147\145\x73\57\x4d\x65\x6d\x62\145\162", $Member_name); goto X9CI6; nb8IZ: } catch (Throwable $th) { $logs->write("\105\x52\x52\x4f\x52", $th->getMessage()); } goto Ks_hb; Y336y: DB::enableQueryLog(); goto uoRjt; yKG4W: if (!$updated) { goto djeOG; } goto bAOjI; madnX: $logs->write("\102\x49\x4e\104\111\x4e\x47", "\133" . implode("\54\x20", $queries[$q]["\x62\x69\x6e\x64\151\156\147\x73"]) . "\135"); goto UB63P; yg6z5: $queries = DB::getQueryLog(); goto uTdv2; fiOC5: YHdgk: goto R2GxQ; ULHqo: goto AR6H4; goto Azvm7; P2w0G: } catch (Throwable $th) { $logs->write("\x45\x52\122\x4f\122", $th->getMessage()); $result["\x6d\145\163\x73\141\x67\145"] = "\x44\x61\x74\141\x20\x67\141\x67\x61\x6c\40\144\151\x70\145\162\x62\141\x72\x75\151\x2e\x3c\x62\162\x3e" . $th->getMessage(); } goto SKPJf; r3NO4: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\x4c\157\x67"); goto KTMts; eWNDr: $validated = $request->validated(); goto r3NO4; KTMts: $logs->write(__FUNCTION__, "\123\124\x41\x52\x54"); goto TrTKc; SKPJf: return response()->json($result["\155\x65\x73\x73\141\147\x65"], $result["\163\164\x61\164\x75\163"]); goto k0YdY; TrTKc: $result["\163\x74\x61\164\x75\x73"] = 200; goto uOhnU; k0YdY: } public function destroy(string $id) : JsonResponse { goto T7MH7; LXtW1: try { goto dCRh_; wd8FE: $q = 0; goto XbpJ4; ynsL4: if (!($q < count($queries))) { goto D3lWS; } goto PS81r; yzlc5: $dibaca = $check[0]->total ?? 0; goto g6_8R; enRjW: DfLai: goto qPfJ0; zaeUO: $logs->write("\102\x49\116\x44\111\x4e\107", "\133" . implode("\x2c\40", $queries[$q]["\x62\151\156\144\151\x6e\147\163"]) . "\x5d"); goto TlAO8; XbpJ4: q4V0K: goto ynsL4; dCRh_: DB::enableQueryLog(); goto u4lO4; g6_8R: if (!($dibaca > 0)) { goto DfLai; } goto mnX85; yCdJO: $q++; goto lUKgj; TQpJU: $result["\x6d\x65\x73\x73\141\147\145"] = "\x44\141\x74\x61\40\142\x65\162\x68\141\163\151\x6c\x20\144\151\x68\141\x70\x75\x73"; goto O364y; kwAHy: D3lWS: goto BWqlH; KbGhD: $queries = DB::getQueryLog(); goto wd8FE; BWqlH: if (!$deleted) { goto s_940; } goto TQpJU; PS81r: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\x69\156\x64\151\156\147\x73"], str_replace("\x3f", "\x27\x3f\x27", $queries[$q]["\161\x75\145\x72\x79"])); goto zaeUO; O364y: s_940: goto hCy6M; TlAO8: $logs->write("\x53\121\114", $sql); goto SWDjM; xB7je: return response()->json($result["\x6d\145\x73\x73\141\147\x65"], $result["\163\x74\x61\164\x75\x73"]); goto enRjW; qPfJ0: $deleted = $this->member_service->delete($id); goto KbGhD; lUKgj: goto q4V0K; goto kwAHy; u4lO4: $check = $this->member_service->check($id); goto yzlc5; mnX85: $result["\155\145\x73\x73\141\147\x65"] = "\115\145\155\142\145\162\x20\164\x69\x64\141\153\x20\142\151\x73\141\x20\x64\x69\150\141\x70\165\x73\x2c\x20\x6b\x61\162\x65\156\141\x20\163\x75\144\141\x68\40\x70\145\x72\156\141\150\40\142\141\143\141\x20\x62\x75\153\165"; goto xB7je; SWDjM: JHV2P: goto yCdJO; hCy6M: } catch (Throwable $th) { $logs->write("\105\122\122\x4f\122", $th->getMessage()); $result["\x6d\x65\163\163\x61\x67\145"] = "\104\x61\164\x61\x20\147\x61\147\x61\x6c\40\x64\151\150\141\160\x75\x73\x2e\74\x62\162\76" . $th->getMessage(); } goto LYGfg; XWx8H: $logs->write(__FUNCTION__, "\123\124\101\x52\x54"); goto B9McV; T7MH7: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\x6f\147"); goto XWx8H; B9McV: $result["\x73\x74\x61\x74\165\x73"] = 200; goto kL86n; kL86n: $result["\x6d\x65\163\163\x61\147\145"] = ''; goto LXtW1; B4oOH: return response()->json($result["\x6d\145\163\163\141\147\x65"], $result["\x73\x74\x61\x74\x75\163"]); goto hGFNq; LYGfg: $logs->write(__FUNCTION__, "\123\124\117\120\15\12"); goto B4oOH; hGFNq: } }
