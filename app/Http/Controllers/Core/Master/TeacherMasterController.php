<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-18 10:11:19             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Master; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use Illuminate\Support\Facades\Log; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use PhpOffice\PhpSpreadsheet\IOFactory; use Yajra\DataTables\Facades\DataTables; use Illuminate\Support\Facades\Validator; use App\Services\Master\TeacherMasterService; use App\Exports\Master\TeacherMasterTemplateExport; class TeacherMasterController extends Controller { private TeacherMasterService $Teacher_service; public function __construct() { $this->middleware("\141\165\x74\150"); $this->Teacher_service = new TeacherMasterService(); } public function index(Request $request) : JsonResponse { goto GM9zi; dwc0H: return DataTables::of($results)->escapeColumns()->editColumn("\160\150\157\164\157", function ($value) { goto PqlgF; sk0Fz: $photoUrl = $photo && file_exists($photo) ? "\x2f\x73\164\157\x72\x61\x67\145\x2f\151\155\141\x67\145\163\57\x70\x72\157\146\151\154\145\57" . $value->photo : "\57\163\x74\157\x72\141\147\x65\x2f\151\x6d\141\x67\145\x73\x2f\160\162\157\x66\x69\154\x65\x2f\x64\145\146\x61\165\x6c\164\x2e\x6a\160\x67"; goto ZgSUt; ZgSUt: return $photoUrl; goto VnpDP; PqlgF: $photo = isset($value->photo) ? public_path("\x2f\163\164\x6f\x72\141\x67\x65\x2f\151\155\141\147\145\x73\x2f\160\162\157\x66\x69\x6c\145\x2f" . $value->photo) : null; goto sk0Fz; VnpDP: })->addIndexColumn()->toJson(); goto gCMMd; TUu4v: try { goto ayosR; C6KR8: $logs->write("\123\121\114", $sql); goto de7oB; KZI4a: goto H6yuw; goto iGswB; rnvML: $results = $this->Teacher_service->get(); goto GnMtI; a1MOw: if (!($q < count($queries))) { goto jkVsv; } goto PtcWw; iX40J: $q++; goto KZI4a; ayosR: DB::enableQueryLog(); goto rnvML; fwlVu: $q = 0; goto xI4bW; GnMtI: $queries = DB::getQueryLog(); goto fwlVu; rr003: $logs->write("\102\x49\116\x44\111\x4e\107", "\x5b" . implode("\x2c\40", $queries[$q]["\142\151\156\144\x69\x6e\x67\x73"]) . "\135"); goto C6KR8; xI4bW: H6yuw: goto a1MOw; PtcWw: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\x69\x6e\144\x69\156\147\x73"], str_replace("\x3f", "\47\x3f\x27", $queries[$q]["\161\x75\x65\x72\x79"])); goto rr003; iGswB: jkVsv: goto v0RJe; de7oB: iDVYP: goto iX40J; v0RJe: } catch (Throwable $th) { $logs->write("\105\x52\x52\x4f\122", $th->getMessage()); } goto brtsq; DvDLg: $logs->write(__FUNCTION__, "\123\x54\101\x52\x54"); goto VXOpw; brtsq: $logs->write(__FUNCTION__, "\x53\124\117\x50\15\12"); goto dwc0H; GM9zi: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\x6f\147"); goto DvDLg; VXOpw: $results = []; goto TUu4v; gCMMd: } public function store(Request $request) { goto UtXwE; YUf8J: $logs->write(__FUNCTION__, "\x53\124\101\x52\x54"); goto JqoJh; TL1kH: goto waAUt; goto wlW2k; InWEN: $result["\x6d\145\x73\x73\x61\x67\x65"] = ''; goto cmn3d; tUn0H: $result["\163\164\x61\164\x75\x73"] = 200; goto InWEN; aICwL: return Excel::download(new TeacherMasterTemplateExport(), "\115\x61\163\x74\x65\162\137\x54\145\x61\x63\150\145\162\x5f\x54\x65\155\x70\x6c\x61\164\x65\56\170\x6c\x73\x78"); goto RxJzJ; kMHqg: return response()->json($result["\x6d\x65\x73\163\x61\147\x65"], $result["\x73\164\x61\164\x75\x73"]); goto TL1kH; Wdc5v: $logs->write(__FUNCTION__, "\123\x54\x4f\120\xd\12"); goto kMHqg; IfNkH: $logs->write(__FUNCTION__, "\x44\157\x77\156\x6c\157\141\144\x20\x54\x70\154"); goto aICwL; JqoJh: if ($request->has("\x64\157\167\156\154\157\141\144") && $request->download == "\164\x70\x6c") { goto orcnG; } goto tUn0H; UtXwE: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\x4c\x6f\x67"); goto YUf8J; glWZd: try { goto d14pj; gvdk0: $spreadsheet = IOFactory::load($request->file("\x66\x69\154\x65")); goto vUW02; Yzq3y: kynlN: goto Zzz8L; un5RN: $nik = trim($Sheetheader->getCellByColumnAndRow(6, $row)->getFormattedValue()); goto HXVO8; IBEw0: goto P3EBs; goto yKxEk; i6UCS: $check = false; goto klTlx; EPFK2: goto gNTKi; goto MUCZu; wHK2a: DB::commit(); goto H9nfK; Znky8: if (!$check) { goto e3G1W; } goto CKskx; RQbXJ: $check = false; goto bew_j; Ya2bu: if (!($row <= $H_highestRow)) { goto cD81V; } goto tWtqI; vNcDw: P3EBs: goto Ya2bu; IBSad: if (strtolower($H_worksheetTitle_A[0]) == "\x74\145\x61\x63\x68\145\162") { goto UrNdE; } goto RQbXJ; bew_j: $messages = "\x53\141\154\141\x68\x20\124\x65\x6d\x70\154\141\x74\x65\41"; goto YPzeS; H9nfK: $logs->write("\111\116\x46\x4f", "\123\165\x63\143\x65\163\x73\146\x75\154\x6c\x79\x20\x63\162\145\x61\x74\145\144"); goto qek3r; VMacw: if (!($q < count($queries))) { goto OQrL3; } goto PCGaD; NZfG2: $logs->write("\123\x51\114", $sql); goto CEdTw; ODpYV: UrNdE: goto sYwyw; YPzeS: $this->logs->write("\105\x52\122\117\122", "\x57\162\x6f\x6e\x67\x20\124\145\x6d\x70\154\x61\x74\x65\41"); goto x8fDR; IR9C_: $H_worksheetTitle = $Sheetheader->getTitle(); goto w_ap6; q2wZX: $birthday = trim($Sheetheader->getCellByColumnAndRow(5, $row)->getFormattedValue()); goto un5RN; sYwyw: $row = 2; goto vNcDw; K_Xkl: $phone = trim($Sheetheader->getCellByColumnAndRow(3, $row)->getFormattedValue()); goto mUEMx; un9qm: DB::enableQueryLog(); goto gvdk0; goL2I: Dlcfb: goto Ulb9H; lftt2: QgVuH: goto Znky8; DApw7: $queries = DB::getQueryLog(); goto efIiZ; Tzhhg: cc2UU: goto Qvj4r; YHwEn: $logs->write("\102\x49\116\104\111\x4e\x47", "\133" . implode("\54\x20", $queries[$q]["\x62\x69\x6e\144\x69\x6e\147\163"]) . "\x5d"); goto NZfG2; ol42E: $validator = Validator::make($data, ["\156\141\155\145" => ["\x72\x65\x71\x75\151\x72\x65\144", "\163\x74\x72\151\156\x67", "\x6d\x61\170\72\62\x35\65"], "\x65\x6d\141\x69\154" => ["\162\145\161\165\151\x72\145\144", "\x73\x74\162\151\156\x67", "\x65\155\x61\x69\x6c", "\155\x61\x78\72\62\x35\65", "\165\x6e\151\161\x75\145\72\165\163\145\x72\163\x2c\x65\x6d\141\x69\x6c"], "\156\151\x6b" => "\156\x75\x6c\154\x61\142\154\x65\x7c\x73\164\162\x69\156\147\174\155\x61\170\72\x32\60", "\x70\x68\157\x6e\x65" => "\162\x65\161\x75\x69\x72\x65\x64\x7c\163\x74\x72\x69\x6e\147\174\x6d\x61\170\72\61\x35", "\x62\x69\x72\x74\150\x64\x61\x79" => "\162\145\161\165\151\162\x65\144\174\144\141\x74\x65", "\147\145\x6e\144\145\162" => "\x72\145\161\x75\151\162\x65\x64\x7c\x73\x74\x72\x69\x6e\x67\174\x69\156\x3a\x4c\54\120", "\160\141\x73\x73\x77\x6f\162\x64" => ["\x72\145\161\x75\x69\162\145\x64", "\x73\164\162\151\156\x67", "\155\x69\156\72\70"]]); goto O4E_q; D7FkC: $logs->write("\x46\x61\x69\x6c\145\x64", $result["\x6d\145\x73\x73\141\x67\x65"]); goto D4J_Z; FcCVR: bv472: goto DApw7; Ulb9H: $messages .= $errors; goto lftt2; ozckF: goto bv472; goto Tzhhg; Qvj4r: DB::rollBack(); goto D7FkC; wTwUc: foreach ($validator->errors()->all() as $error) { $errors .= "\105\x72\162\x6f\x72\x73\40\151\x6e\x20\x72\157\x77\x20" . $row . "\x3a\40" . $error . "\x3c\x62\162\x3e"; SXJ5o: } goto goL2I; x8fDR: goto O6HDV; goto ODpYV; d14pj: DB::beginTransaction(); goto un9qm; PdnC9: $data = ["\x6e\x61\x6d\145" => $name, "\145\155\141\151\x6c" => $email, "\160\150\x6f\x6e\x65" => $phone, "\147\x65\x6e\144\x65\162" => $gender, "\142\x69\x72\x74\150\x64\x61\171" => $birthday, "\x6e\151\x6b" => $nik, "\160\141\163\163\x77\x6f\162\x64" => $password]; goto ol42E; pAfG5: $result["\x6d\145\163\163\141\147\145"] = "\x44\141\x74\141\40\x62\145\x72\150\x61\163\x69\x6c\x20\x64\151\142\x75\x61\x74\56"; goto ozckF; MUCZu: OQrL3: goto q4IlE; D4J_Z: $result["\155\x65\x73\163\x61\x67\145"] = $messages; goto FcCVR; Q0t3p: gNTKi: goto VMacw; fjBc7: if (!$check) { goto cc2UU; } goto wHK2a; CKskx: try { goto y2Rzf; OBHKI: $check = false; goto BI5OU; BI5OU: $messages = "\x44\x61\x74\141\x20\147\141\x67\x61\154\40\x64\151\x62\165\x61\164\56"; goto QdW3n; y2Rzf: $created = $this->Teacher_service->store((object) $data); goto Xzbq4; Xzbq4: if ($created) { goto W1plE; } goto OBHKI; QdW3n: W1plE: goto ldD7B; ldD7B: } catch (Throwable $e) { goto iHddl; P3ENo: $messages = "\104\141\x74\x61\x20\147\x61\147\141\154\40\144\151\x62\x75\141\x74\x2e"; goto ADNc3; ADNc3: $logs->write("\105\122\x52\117\x52", $e->getMessage()); goto yGoLJ; iHddl: $check = false; goto P3ENo; yGoLJ: } goto H3Cg5; H3Cg5: e3G1W: goto Yzq3y; vUW02: $Sheetheader = $spreadsheet->getSheet(0); goto IR9C_; mUEMx: $gender = trim($Sheetheader->getCellByColumnAndRow(4, $row)->getFormattedValue()); goto q2wZX; PGB6a: $H_worksheetTitle_A = explode("\x20", $H_worksheetTitle); goto IBSad; C0A0h: O6HDV: goto fjBc7; PCGaD: $sql = Str::replaceArray("\77", $queries[$q]["\x62\x69\156\144\151\156\x67\x73"], str_replace("\x3f", "\47\77\47", $queries[$q]["\x71\165\145\x72\x79"])); goto YHwEn; efIiZ: $q = 0; goto Q0t3p; MMA49: $q++; goto EPFK2; HXVO8: $password = trim($Sheetheader->getCellByColumnAndRow(7, $row)->getFormattedValue()); goto PdnC9; qek3r: $result["\163\x74\x61\164\165\163"] = 201; goto pAfG5; O4E_q: if (!$validator->fails()) { goto QgVuH; } goto i6UCS; yKxEk: cD81V: goto C0A0h; tWtqI: $name = trim($Sheetheader->getCellByColumnAndRow(1, $row)->getFormattedValue()); goto Oj5NX; CEdTw: AflxP: goto MMA49; w_ap6: $H_highestRow = $Sheetheader->getHighestRow(); goto PGB6a; Zzz8L: ++$row; goto IBEw0; klTlx: $errors = ''; goto wTwUc; Oj5NX: $email = trim($Sheetheader->getCellByColumnAndRow(2, $row)->getFormattedValue()); goto K_Xkl; q4IlE: } catch (Throwable $th) { $logs->write("\105\122\x52\x4f\122", $th->getMessage()); $result["\155\145\163\163\x61\x67\x65"] = "\x44\141\x74\141\40\x67\141\147\x61\x6c\x20\x64\x69\x62\165\x61\x74\56\x3c\x62\x72\x3e" . $th->getMessage(); } goto Wdc5v; wlW2k: orcnG: goto IfNkH; RxJzJ: waAUt: goto OZBOE; cmn3d: $check = true; goto nv02z; nv02z: $messages = ''; goto glWZd; OZBOE: } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update(UpdateTeacherMasterRequest $request, string $id) : JsonResponse { goto sEplb; Ds3lo: return response()->json($result["\155\145\x73\163\x61\x67\x65"], $result["\x73\164\141\x74\x75\x73"]); goto elAFL; bVRVJ: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\x6f\147"); goto MVUPx; OUMIQ: $result["\163\x74\141\x74\165\163"] = 200; goto WYCoR; BYjXq: try { goto XIb88; HcMxo: $q = 0; goto ZW_WU; lqDNe: goto wyJ16; goto Qdtbk; zoL_t: if (!($q < count($queries))) { goto chVi_; } goto nylf2; jQjWp: $queries = DB::getQueryLog(); goto HcMxo; MCbFH: $updated = $this->Teacher_service->update((object) $validated, $id); goto vmoag; Qdtbk: chVi_: goto hBTYz; CjlbO: try { goto Z1Ymz; Z1Ymz: $Teacher_file = $request->file("\x66\151\154\145")->getClientOriginalName(); goto WzHL0; Tsqy8: $request->file("\146\x69\154\145")->storeAs("\x2f\160\165\142\154\x69\143\x2f\151\x6d\141\x67\x65\x73\57\x54\145\141\x63\150\x65\x72", $Teacher_name); goto JO8Fp; a9hGo: $Teacher_name = explode("\56", str_replace("\40", '', $Teacher_file))[0] . "\x2d" . now("\x41\163\x69\x61\57\112\x61\153\141\162\164\x61")->format("\x59\x6d\144\110\151\x73") . "\55" . rand(100000, 999999) . "\x2e" . $extension; goto Tsqy8; JO8Fp: $validated["\x66\151\x6c\145"] = $Teacher_name; goto E5DYe; WzHL0: $extension = $request->file("\146\151\154\x65")->getClientOriginalExtension(); goto a9hGo; E5DYe: } catch (Throwable $th) { $logs->write("\x45\x52\122\117\x52", $th->getMessage()); } goto f4t3O; pJ5Y6: $q++; goto lqDNe; J1x2x: $result["\155\145\163\x73\x61\147\145"] = "\x44\141\x74\x61\x20\x62\x65\162\x68\141\x73\x69\x6c\x20\x64\x69\160\145\162\142\141\x72\x75\x69\56"; goto voljy; r5_jX: if (!$request->hasFile("\x66\151\154\x65")) { goto RoH_3; } goto CjlbO; bPRjn: $logs->write("\111\116\106\x4f", "\123\165\143\143\x65\163\x73\146\165\x6c\154\x79\x20\165\160\144\x61\x74\x65\x64"); goto VUSuw; u9vqD: D02Iw: goto pJ5Y6; f4t3O: RoH_3: goto MCbFH; VUSuw: $result["\163\x74\x61\164\165\x73"] = 201; goto J1x2x; gp4is: $logs->write("\102\111\x4e\x44\x49\116\x47", "\x5b" . implode("\54\40", $queries[$q]["\x62\151\156\144\x69\156\147\x73"]) . "\x5d"); goto JqhrW; voljy: shTlq: goto jQjWp; nylf2: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\x69\156\144\x69\x6e\147\x73"], str_replace("\77", "\x27\x3f\47", $queries[$q]["\161\x75\145\x72\x79"])); goto gp4is; JqhrW: $logs->write("\x53\121\114", $sql); goto u9vqD; XIb88: DB::enableQueryLog(); goto r5_jX; vmoag: if (!$updated) { goto shTlq; } goto bPRjn; ZW_WU: wyJ16: goto zoL_t; hBTYz: } catch (Throwable $th) { $logs->write("\x45\x52\122\117\122", $th->getMessage()); $result["\155\145\x73\x73\x61\147\145"] = "\104\x61\164\141\40\147\141\x67\x61\154\40\144\151\x70\145\162\x62\x61\162\x75\x69\56\74\142\162\x3e" . $th->getMessage(); } goto Ds3lo; MVUPx: $logs->write(__FUNCTION__, "\123\124\x41\x52\124"); goto OUMIQ; WYCoR: $result["\x6d\x65\163\x73\x61\147\x65"] = ''; goto BYjXq; sEplb: $validated = $request->validated(); goto bVRVJ; elAFL: } public function destroy(string $id) : JsonResponse { goto gzTzy; Li5wc: return response()->json($result["\x6d\145\x73\163\141\x67\145"], $result["\163\x74\141\x74\165\x73"]); goto vfE2L; SURY2: try { goto eYKY0; e_54y: if (!($q < count($queries))) { goto jKM9Z; } goto rXK7A; rXK7A: $sql = Str::replaceArray("\77", $queries[$q]["\142\151\156\x64\151\156\x67\x73"], str_replace("\77", "\x27\77\x27", $queries[$q]["\161\x75\145\162\x79"])); goto LUT76; eAm0q: if (!$deleted) { goto UEVLF; } goto G5o3o; vFdF6: mpqXv: goto zaU8I; Yqehj: goto i6I0y; goto C3fmn; xBI21: i6I0y: goto e_54y; G5o3o: $result["\x6d\145\x73\163\x61\x67\145"] = "\x44\x61\164\141\40\142\145\162\x68\141\x73\x69\154\40\144\x69\x68\141\160\165\x73"; goto BAh0O; BAh0O: UEVLF: goto sdRZH; yvmRv: $queries = DB::getQueryLog(); goto BCyFg; vVCer: $logs->write("\x53\x51\114", $sql); goto vFdF6; BCyFg: $q = 0; goto xBI21; zaU8I: $q++; goto Yqehj; eYKY0: DB::enableQueryLog(); goto wv_oB; wv_oB: $deleted = $this->Teacher_service->delete($id); goto yvmRv; C3fmn: jKM9Z: goto eAm0q; LUT76: $logs->write("\x42\111\x4e\104\x49\116\x47", "\x5b" . implode("\54\x20", $queries[$q]["\142\x69\x6e\144\151\x6e\x67\x73"]) . "\135"); goto vVCer; sdRZH: } catch (Throwable $th) { $logs->write("\105\122\x52\x4f\x52", $th->getMessage()); $result["\x6d\145\163\x73\141\147\145"] = "\104\141\164\141\x20\147\x61\147\141\x6c\x20\x64\151\x68\x61\x70\x75\163\x2e\x3c\x62\162\x3e" . $th->getMessage(); } goto jukTR; gzTzy: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\114\x6f\x67"); goto Ry3Vm; RADjR: $result["\x73\164\141\x74\x75\x73"] = 200; goto ymbwf; jukTR: $logs->write(__FUNCTION__, "\x53\124\x4f\x50\xd\12"); goto Li5wc; ymbwf: $result["\155\x65\163\x73\x61\147\145"] = ''; goto SURY2; Ry3Vm: $logs->write(__FUNCTION__, "\x53\124\x41\122\x54"); goto RADjR; vfE2L: } }
