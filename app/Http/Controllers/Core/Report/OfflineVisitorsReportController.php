<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-18 10:11:19             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Report; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use App\Exports\Report\OfflineVisitorsReportExport; use App\Services\Report\OfflineVisitorsReportService; use Yajra\DataTables\Facades\DataTables; class OfflineVisitorsReportController extends Controller { private OfflineVisitorsReportService $visitors_service; public function __construct() { $this->middleware("\141\x75\164\x68"); $this->visitors_service = new OfflineVisitorsReportService(); } public function index(Request $request) : JsonResponse { goto GathB; I9E97: return DataTables::of($results)->escapeColumns()->addIndexColumn()->toJson(); goto zGXtt; zFAzS: return DataTables::of([])->toJson(); goto eus0K; Uj1hP: $results = []; goto xUy6b; eus0K: MYsJY: goto QI1nT; n5wZk: $logs->write(__FUNCTION__, "\123\x54\101\122\x54"); goto Uj1hP; GathB: if (!$request->has("\x6e\157\x64\x61\164\141")) { goto MYsJY; } goto zFAzS; xUy6b: try { goto N46zx; ZN2tL: if (!($q < count($queries))) { goto U1fC4; } goto RmHLY; YcjCh: $q = 0; goto Y35xM; nFRc6: $filter["\120\122\x4f\126\111\x4e\x53\x49"] = $request->PROVINSI ?? ''; goto kH1mU; vpjyp: $filter["\x57\114"] = $request->WL ?? ''; goto D0ibw; sTaAP: $logs->write("\x53\121\114", $sql); goto Rj10l; KCJkf: $q++; goto M6vQA; Yc_iL: $logs->write("\102\111\x4e\x44\x49\116\107", "\x5b" . implode("\54\x20", $queries[$q]["\142\x69\156\x64\151\x6e\147\x73"]) . "\135"); goto sTaAP; b_T3Y: $results = $this->visitors_service->get($filter); goto gTnmb; F8aj5: $filter["\105\116\104\137\x44\101\124\x45"] = $request->END_DATE ?? ''; goto b_T3Y; Rj10l: xXs1C: goto KCJkf; gTnmb: $queries = DB::getQueryLog(); goto YcjCh; Vy2SZ: U1fC4: goto sxSsX; Y35xM: ItBTw: goto ZN2tL; kH1mU: $filter["\x4b\x41\102\125\120\x41\124\x45\x4e"] = $request->KABUPATEN ?? ''; goto vpjyp; N46zx: DB::enableQueryLog(); goto nFRc6; RmHLY: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\x69\x6e\x64\x69\x6e\147\x73"], str_replace("\77", "\x27\x3f\x27", $queries[$q]["\161\165\145\162\171"])); goto Yc_iL; D0ibw: $filter["\123\x54\101\x52\124\137\x44\101\124\105"] = $request->START_DATE ?? ''; goto F8aj5; M6vQA: goto ItBTw; goto Vy2SZ; sxSsX: } catch (Throwable $th) { $logs->write("\x45\x52\122\117\122", $th->getMessage()); } goto Uf9zE; Uf9zE: $logs->write(__FUNCTION__, "\123\x54\x4f\x50\15\12"); goto I9E97; QI1nT: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\x4c\x6f\x67"); goto n5wZk; zGXtt: } public function store() { } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update() { } public function destroy(string $id) : JsonResponse { } public function ExportXLS(Request $request) { goto Wvm0A; FxBsl: $logs->write("\123\121\x4c", $sql); goto fkiDa; fkiDa: efned: goto wuFP9; p1IVn: try { goto yAjj5; WfYP4: $filter["\x57\x4c"] = $request->WL ?? ''; goto fgN2j; yAjj5: DB::enableQueryLog(); goto utHs8; utHs8: $filter["\x50\x52\x4f\x56\x49\116\x53\111"] = $request->PROVINSI ?? ''; goto PwwAP; PwwAP: $filter["\113\x41\102\125\120\101\x54\x45\116"] = $request->KABUPATEN ?? ''; goto WfYP4; NTXrz: $this->visitors_service->get($filter)->map(function ($value, $i) use(&$results) { goto BxWwZ; XVeSj: $results[$i]["\153\141\x62\x75\x70\x61\x74\x65\x6e\x5f\x6e\141\155\x65"] = $value->kabupaten_name; goto GcCce; GcCce: $results[$i]["\x76\x69\x73\151\x74\x6f\162"] = $value->visitor; goto ICh5L; BxWwZ: $results[$i]["\x77\x6c\x5f\x6e\x61\x6d\145"] = $value->wl_name; goto EROGJ; EROGJ: $results[$i]["\x70\162\157\166\151\156\x73\151\137\x6e\141\x6d\145"] = $value->provinsi_name; goto XVeSj; ICh5L: }); goto btOQC; fwqMG: $filter["\105\x4e\104\x5f\x44\101\x54\x45"] = $request->END_DATE ?? ''; goto NTXrz; fgN2j: $filter["\x53\x54\101\x52\x54\137\x44\101\124\x45"] = $request->START_DATE ?? ''; goto fwqMG; btOQC: } catch (\Exception $e) { $logs->write("\105\122\x52\117\122", $e->getMessage()); } goto Py1hV; DvIOE: goto tPghI; goto ywNgh; WI7m3: $logs->write(__FUNCTION__, "\123\124\117\x50\15\12"); goto b10ey; wuFP9: $q++; goto DvIOE; ZhQva: $logs->write(__FUNCTION__, "\x53\x54\x41\122\x54"); goto UCVw2; UCVw2: $results = []; goto p1IVn; Wvm0A: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\114\157\x67"); goto ZhQva; iw8pz: if (!($q < count($queries))) { goto JJGwm; } goto GcFtZ; GcFtZ: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\x69\156\x64\151\x6e\147\163"], str_replace("\77", "\47\77\47", $queries[$q]["\161\x75\x65\x72\x79"])); goto rKkAO; ywNgh: JJGwm: goto WI7m3; X5pLz: $q = 0; goto vgCGG; Py1hV: $queries = DB::getQueryLog(); goto X5pLz; rKkAO: $logs->write("\x42\x49\116\104\111\x4e\x47", "\x5b" . implode("\54\40", $queries[$q]["\x62\x69\156\144\151\x6e\x67\x73"]) . "\x5d"); goto FxBsl; vgCGG: tPghI: goto iw8pz; b10ey: return Excel::download(new OfflineVisitorsReportExport($results), "\114\141\160\x6f\162\141\156\x5f\x50\x65\156\x67\x75\x6e\x6a\x75\156\x67\137\x4f\146\x66\154\151\x6e\x65\x2e\170\x6c\x73\x78"); goto wQ4Gb; wQ4Gb: } }
