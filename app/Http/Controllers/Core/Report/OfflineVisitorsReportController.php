<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-23 17:36:13             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Report; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use App\Exports\Report\OfflineVisitorsReportExport; use App\Services\Report\OfflineVisitorsReportService; use Yajra\DataTables\Facades\DataTables; class OfflineVisitorsReportController extends Controller { private OfflineVisitorsReportService $visitors_service; public function __construct() { $this->middleware("\x61\x75\x74\x68"); $this->visitors_service = new OfflineVisitorsReportService(); } public function index(Request $request) : JsonResponse { goto TdvZs; TdvZs: if (!$request->has("\x6e\x6f\x64\141\x74\x61")) { goto NSjVN; } goto abnvv; VDIkT: $results = []; goto aHO6x; isgyf: $logs->write(__FUNCTION__, "\123\124\101\122\x54"); goto VDIkT; iZX8r: return DataTables::of($results)->escapeColumns()->addIndexColumn()->toJson(); goto z0a2B; WdvvG: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\x6f\147"); goto isgyf; PQyX4: NSjVN: goto WdvvG; RvQdi: $logs->write(__FUNCTION__, "\x53\x54\117\x50\15\12"); goto iZX8r; aHO6x: try { goto t86XW; CmaB1: if (!($q < count($queries))) { goto Og7R_; } goto egGGb; gqZaW: $results = $this->visitors_service->get($filter); goto ybIIt; bV5ob: eImD6: goto j54zy; KOPWT: $filter["\x4b\x41\102\x55\120\101\124\105\116"] = $request->KABUPATEN ?? ''; goto ecTZq; LNgJE: $q = 0; goto wu1ic; E4OlF: Og7R_: goto aUfDH; t86XW: DB::enableQueryLog(); goto ZdM6k; QetfM: $filter["\123\124\101\x52\x54\x5f\104\x41\124\105"] = $request->START_DATE ?? ''; goto DC_zt; j54zy: $q++; goto kXgNx; DC_zt: $filter["\105\116\x44\137\x44\101\124\105"] = $request->END_DATE ?? ''; goto gqZaW; J0UZE: $logs->write("\102\x49\116\104\x49\116\107", "\133" . implode("\x2c\x20", $queries[$q]["\142\151\156\144\x69\x6e\147\163"]) . "\x5d"); goto EFuBi; ZdM6k: $filter["\x50\122\x4f\x56\x49\x4e\123\x49"] = $request->PROVINSI ?? ''; goto KOPWT; ybIIt: $queries = DB::getQueryLog(); goto LNgJE; ecTZq: $filter["\127\x4c"] = $request->WL ?? ''; goto QetfM; EFuBi: $logs->write("\123\x51\x4c", $sql); goto bV5ob; wu1ic: vnLCH: goto CmaB1; egGGb: $sql = Str::replaceArray("\77", $queries[$q]["\x62\x69\156\x64\x69\x6e\147\x73"], str_replace("\77", "\x27\x3f\x27", $queries[$q]["\x71\x75\145\x72\x79"])); goto J0UZE; kXgNx: goto vnLCH; goto E4OlF; aUfDH: } catch (Throwable $th) { $logs->write("\105\122\122\117\x52", $th->getMessage()); } goto RvQdi; abnvv: return DataTables::of([])->toJson(); goto PQyX4; z0a2B: } public function store() { } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update() { } public function destroy(string $id) : JsonResponse { } public function ExportXLS(Request $request) { goto uwPfM; nH0fZ: $logs->write(__FUNCTION__, "\123\124\117\120\15\12"); goto ktXdL; j0y1Y: $logs->write("\102\111\116\x44\111\x4e\107", "\133" . implode("\54\x20", $queries[$q]["\142\x69\x6e\144\x69\156\x67\163"]) . "\x5d"); goto TP5bt; rzgVO: $results = []; goto Q04Vk; nQL_i: $q++; goto KPTvM; TP5bt: $logs->write("\x53\x51\114", $sql); goto Ow7dE; ktXdL: return Excel::download(new OfflineVisitorsReportExport($results), "\114\x61\160\157\x72\141\156\x5f\120\x65\x6e\x67\165\x6e\x6a\165\156\147\137\117\146\x66\154\x69\x6e\x65\56\170\154\x73\170"); goto ySalP; evhuX: EcicE: goto nH0fZ; QHF_A: $q = 0; goto B_30l; Ow7dE: by8s9: goto nQL_i; Q04Vk: try { goto L4PQF; gkfcX: $this->visitors_service->get($filter)->map(function ($value, $i) use(&$results) { goto QNe44; Lj8B1: $results[$i]["\x70\x72\x6f\x76\x69\x6e\x73\151\137\x6e\141\155\x65"] = $value->provinsi_name; goto wY8nz; VPaTD: $results[$i]["\x76\151\x73\151\164\x6f\x72"] = $value->visitor; goto b4zdw; QNe44: $results[$i]["\x77\154\x5f\156\141\155\x65"] = $value->wl_name; goto Lj8B1; wY8nz: $results[$i]["\x6b\141\142\165\160\x61\164\145\x6e\137\x6e\141\155\x65"] = $value->kabupaten_name; goto VPaTD; b4zdw: }); goto PAYSn; b0HE4: $filter["\123\x54\101\122\124\137\104\101\x54\105"] = $request->START_DATE ?? ''; goto VUnQO; sRwLp: $filter["\120\122\117\x56\111\x4e\x53\x49"] = $request->PROVINSI ?? ''; goto ddS9p; W1XUk: $filter["\x57\x4c"] = $request->WL ?? ''; goto b0HE4; ddS9p: $filter["\113\x41\x42\x55\x50\101\x54\105\116"] = $request->KABUPATEN ?? ''; goto W1XUk; L4PQF: DB::enableQueryLog(); goto sRwLp; VUnQO: $filter["\x45\116\104\137\104\101\x54\x45"] = $request->END_DATE ?? ''; goto gkfcX; PAYSn: } catch (\Exception $e) { $logs->write("\105\122\122\117\x52", $e->getMessage()); } goto o6Sll; uwPfM: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\x4c\x6f\147"); goto gNlOE; QiGCd: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\151\156\x64\x69\x6e\x67\163"], str_replace("\77", "\x27\77\47", $queries[$q]["\x71\x75\145\x72\x79"])); goto j0y1Y; FvPN2: if (!($q < count($queries))) { goto EcicE; } goto QiGCd; KPTvM: goto kOmrF; goto evhuX; B_30l: kOmrF: goto FvPN2; gNlOE: $logs->write(__FUNCTION__, "\123\124\x41\122\124"); goto rzgVO; o6Sll: $queries = DB::getQueryLog(); goto QHF_A; ySalP: } }
