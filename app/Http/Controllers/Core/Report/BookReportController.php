<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-23 17:36:13             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Report; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use Illuminate\Support\Facades\Log; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use App\Exports\Report\BookReportExport; use Yajra\DataTables\Facades\DataTables; use App\Services\Report\BookReportService; class BookReportController extends Controller { private BookReportService $book_service; public function __construct() { $this->middleware("\141\165\164\150"); $this->book_service = new BookReportService(); } public function index(Request $request) : JsonResponse { goto sxncf; Il0Dz: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\114\157\147"); goto o3jt3; LwVfE: $logs->write(__FUNCTION__, "\x53\124\x4f\120\15\xa"); goto ZCAVT; ZHZxz: $results = []; goto YFi2l; QE5G8: CQcbz: goto Il0Dz; sxncf: if (!$request->has("\x6e\157\x64\141\164\x61")) { goto CQcbz; } goto vERt3; ZCAVT: return DataTables::of($results)->escapeColumns()->addIndexColumn()->toJson(); goto MCYj9; o3jt3: $logs->write(__FUNCTION__, "\123\124\101\122\124"); goto ZHZxz; YFi2l: try { goto uodoc; JWK_I: $logs->write("\123\x51\x4c", $sql); goto tnUrI; uodoc: DB::enableQueryLog(); goto LF6nW; tnUrI: X1bjr: goto kQe56; X8DfY: $logs->write("\x42\111\116\104\x49\116\107", "\133" . implode("\54\x20", $queries[$q]["\142\x69\x6e\144\x69\x6e\x67\x73"]) . "\135"); goto JWK_I; LF6nW: $filter["\120\x52\117\x56\111\x4e\x53\x49"] = $request->PROVINSI ?? ''; goto y0Qob; vmgqR: $results = $this->book_service->get($filter); goto h3Nlx; y0Qob: $filter["\x4b\x41\102\125\x50\101\124\105\x4e"] = $request->KABUPATEN ?? ''; goto HEMZk; al20r: goto UdIXC; goto XqHQb; GolJ8: $sql = Str::replaceArray("\77", $queries[$q]["\142\x69\x6e\x64\x69\156\147\163"], str_replace("\77", "\47\77\x27", $queries[$q]["\161\x75\145\x72\171"])); goto X8DfY; h3Nlx: $queries = DB::getQueryLog(); goto qemhT; qemhT: $q = 0; goto coyLB; EC6C3: if (!($q < count($queries))) { goto Ox1fF; } goto GolJ8; XqHQb: Ox1fF: goto vv0Jf; kQe56: $q++; goto al20r; coyLB: UdIXC: goto EC6C3; HEMZk: $filter["\127\114"] = $request->WL ?? ''; goto vmgqR; vv0Jf: } catch (Throwable $th) { $logs->write("\x45\122\122\117\x52", $th->getMessage()); } goto LwVfE; vERt3: return DataTables::of([])->toJson(); goto QE5G8; MCYj9: } public function store() { } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update() { } public function destroy(string $id) : JsonResponse { } public function ExportXLS(Request $request) { goto CCw1s; h75Ig: $q++; goto yJeHf; xnEoF: $logs->write(__FUNCTION__, "\123\124\x4f\120\15\xa"); goto ac2np; yV2a4: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\x69\x6e\x64\x69\156\x67\163"], str_replace("\x3f", "\x27\77\47", $queries[$q]["\161\165\x65\162\171"])); goto bJGK_; tfOnM: $logs->write("\x53\x51\114", $sql); goto xtV6w; xtV6w: iBpYB: goto h75Ig; bJGK_: $logs->write("\102\111\116\x44\x49\116\x47", "\133" . implode("\x2c\x20", $queries[$q]["\142\151\x6e\144\x69\x6e\x67\163"]) . "\x5d"); goto tfOnM; ac2np: return Excel::download(new BookReportExport($results), "\114\141\x70\157\x72\x61\x6e\137\102\165\x6b\x75\56\x78\x6c\163\170"); goto rBNkq; yJeHf: goto lkiog; goto qDTgk; DzIjl: if (!($q < count($queries))) { goto klAc4; } goto yV2a4; CjuBA: lkiog: goto DzIjl; WLy3B: try { goto Qou8O; WzEfu: $filter["\x50\x52\117\x56\111\116\123\111"] = $request->PROVINSI ?? ''; goto ZJ6rT; iiTyH: $filter["\x57\114"] = $request->WL ?? ''; goto sYgQ9; ZJ6rT: $filter["\113\101\x42\x55\120\101\124\105\x4e"] = $request->KABUPATEN ?? ''; goto iiTyH; sYgQ9: $this->book_service->get($filter)->map(function ($value, $i) use(&$results) { goto KQW9P; tUyCP: $results[$i]["\160\x72\157\166\151\156\x73\151\x5f\x6e\x61\155\x65"] = $value->provinsi_name; goto widCP; KQW9P: $results[$i]["\x77\154\137\x6e\141\x6d\x65"] = $value->wl_name; goto tUyCP; D4KB1: $results[$i]["\x77\x72\151\x74\x65\x72"] = $value->writer; goto ngl1T; widCP: $results[$i]["\x6b\x61\x62\x75\160\x61\164\145\156\137\x6e\x61\155\145"] = $value->kabupaten_name; goto zzhAG; ngl1T: $results[$i]["\151\x73\142\156"] = $value->isbn; goto BJYF1; BJYF1: $results[$i]["\145\x69\163\x62\x6e"] = $value->eisbn; goto TTRbw; TTRbw: $results[$i]["\x71\x74\x79"] = $value->qty; goto Ue_qy; FB_sG: $results[$i]["\160\x75\142\154\151\163\x68\145\162"] = $value->publisher; goto D4KB1; zzhAG: $results[$i]["\x74\151\x74\x6c\x65"] = $value->title; goto FB_sG; Ue_qy: }); goto MU6J6; Qou8O: DB::enableQueryLog(); goto WzEfu; MU6J6: } catch (\Exception $e) { $logs->write("\x45\x52\x52\117\x52", $e->getMessage()); } goto GleYw; kNYfA: $logs->write(__FUNCTION__, "\x53\124\101\122\x54"); goto nrN0U; CCw1s: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\157\x67"); goto kNYfA; nrN0U: $results = []; goto WLy3B; GleYw: $queries = DB::getQueryLog(); goto rdWxm; qDTgk: klAc4: goto xnEoF; rdWxm: $q = 0; goto CjuBA; rBNkq: } }
