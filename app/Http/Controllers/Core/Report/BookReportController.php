<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-18 10:11:19             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Report; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use Illuminate\Support\Facades\Log; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use App\Exports\Report\BookReportExport; use Yajra\DataTables\Facades\DataTables; use App\Services\Report\BookReportService; class BookReportController extends Controller { private BookReportService $book_service; public function __construct() { $this->middleware("\141\165\164\x68"); $this->book_service = new BookReportService(); } public function index(Request $request) : JsonResponse { goto Ui35Z; ygFXW: return DataTables::of([])->toJson(); goto wXFOS; POoH3: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\114\x6f\x67"); goto DxRY5; Ui35Z: if (!$request->has("\x6e\x6f\144\141\x74\x61")) { goto lAmxB; } goto ygFXW; P2d2E: $logs->write(__FUNCTION__, "\x53\x54\117\120\xd\xa"); goto cf8RM; DxRY5: $logs->write(__FUNCTION__, "\x53\124\101\x52\x54"); goto lvmHT; D4O3W: try { goto v8RTN; CFEPf: fnO9O: goto F1iEE; cinVY: $filter["\x50\x52\117\126\x49\x4e\123\x49"] = $request->PROVINSI ?? ''; goto m_dr8; Nrwhf: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\151\156\144\151\156\147\x73"], str_replace("\x3f", "\47\x3f\x27", $queries[$q]["\161\165\x65\x72\171"])); goto s1eZB; Jqe_z: $q++; goto TiTTr; aDisx: $results = $this->book_service->get($filter); goto OFQbZ; MC4JY: $q = 0; goto GJJ87; OFQbZ: $queries = DB::getQueryLog(); goto MC4JY; Kso55: $filter["\x57\x4c"] = $request->WL ?? ''; goto aDisx; m_dr8: $filter["\113\101\x42\125\x50\101\124\105\116"] = $request->KABUPATEN ?? ''; goto Kso55; TiTTr: goto QyKpD; goto CFEPf; v8RTN: DB::enableQueryLog(); goto cinVY; s1eZB: $logs->write("\102\111\116\104\x49\x4e\x47", "\x5b" . implode("\x2c\40", $queries[$q]["\x62\151\156\144\151\156\x67\x73"]) . "\x5d"); goto x7Tfk; WGa2L: if (!($q < count($queries))) { goto fnO9O; } goto Nrwhf; X4oCM: DMeSr: goto Jqe_z; GJJ87: QyKpD: goto WGa2L; x7Tfk: $logs->write("\x53\x51\114", $sql); goto X4oCM; F1iEE: } catch (Throwable $th) { $logs->write("\105\x52\x52\x4f\122", $th->getMessage()); } goto P2d2E; lvmHT: $results = []; goto D4O3W; wXFOS: lAmxB: goto POoH3; cf8RM: return DataTables::of($results)->escapeColumns()->addIndexColumn()->toJson(); goto tqt4K; tqt4K: } public function store() { } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update() { } public function destroy(string $id) : JsonResponse { } public function ExportXLS(Request $request) { goto OWFZ5; Exg9i: OQIbF: goto XjpQy; Hrbx9: $q = 0; goto jf0JP; B6wiS: $logs->write("\x42\x49\116\x44\x49\x4e\x47", "\x5b" . implode("\54\40", $queries[$q]["\x62\x69\156\144\151\x6e\147\x73"]) . "\135"); goto jZ1Ms; lZzAI: $queries = DB::getQueryLog(); goto Hrbx9; ZYYyU: $logs->write(__FUNCTION__, "\x53\x54\101\122\124"); goto HCEue; HCEue: $results = []; goto ZcSQX; XjpQy: $logs->write(__FUNCTION__, "\x53\124\x4f\x50\xd\12"); goto Dpv4u; OWFZ5: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\x4c\157\x67"); goto ZYYyU; lsKry: eTb0i: goto e0dIF; Dpv4u: return Excel::download(new BookReportExport($results), "\x4c\x61\x70\157\162\141\x6e\x5f\x42\165\x6b\165\x2e\x78\x6c\x73\x78"); goto X3gTM; p7841: goto Rp0i3; goto Exg9i; ZcSQX: try { goto n_WrI; JkU_2: $filter["\x57\114"] = $request->WL ?? ''; goto RKY_C; QWkKj: $filter["\120\122\117\126\x49\x4e\123\111"] = $request->PROVINSI ?? ''; goto xxm8w; xxm8w: $filter["\x4b\101\x42\x55\x50\x41\124\x45\x4e"] = $request->KABUPATEN ?? ''; goto JkU_2; n_WrI: DB::enableQueryLog(); goto QWkKj; RKY_C: $this->book_service->get($filter)->map(function ($value, $i) use(&$results) { goto rVzya; I92a7: $results[$i]["\x65\151\x73\x62\x6e"] = $value->eisbn; goto ffQKp; DN7eS: $results[$i]["\x74\151\164\x6c\145"] = $value->title; goto wDSK8; wDSK8: $results[$i]["\x70\x75\142\154\151\163\150\145\x72"] = $value->publisher; goto QyLgg; tjMYY: $results[$i]["\151\x73\142\156"] = $value->isbn; goto I92a7; QKVaw: $results[$i]["\160\x72\157\166\x69\x6e\x73\151\137\x6e\x61\x6d\x65"] = $value->provinsi_name; goto v68mM; rVzya: $results[$i]["\167\154\x5f\156\x61\155\x65"] = $value->wl_name; goto QKVaw; ffQKp: $results[$i]["\x71\x74\171"] = $value->qty; goto EgY8T; QyLgg: $results[$i]["\167\162\151\x74\145\x72"] = $value->writer; goto tjMYY; v68mM: $results[$i]["\x6b\141\x62\x75\160\141\x74\x65\x6e\137\156\x61\x6d\145"] = $value->kabupaten_name; goto DN7eS; EgY8T: }); goto u6qt7; u6qt7: } catch (\Exception $e) { $logs->write("\105\x52\122\117\x52", $e->getMessage()); } goto lZzAI; jZ1Ms: $logs->write("\x53\x51\x4c", $sql); goto lsKry; e0dIF: $q++; goto p7841; jf0JP: Rp0i3: goto GLyqz; GLyqz: if (!($q < count($queries))) { goto OQIbF; } goto euGeH; euGeH: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\x69\x6e\144\151\x6e\147\163"], str_replace("\x3f", "\x27\77\47", $queries[$q]["\x71\165\x65\x72\171"])); goto B6wiS; X3gTM: } }
