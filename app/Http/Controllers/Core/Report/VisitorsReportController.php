<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-18 10:11:19             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Report; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use App\Exports\Report\VisitorsReportExport; use App\Services\Report\VisitorsReportService; use Yajra\DataTables\Facades\DataTables; class VisitorsReportController extends Controller { private VisitorsReportService $visitors_service; public function __construct() { $this->middleware("\x61\165\164\x68"); $this->visitors_service = new VisitorsReportService(); } public function index(Request $request) : JsonResponse { goto RuWUW; yyl5E: return DataTables::of($results)->escapeColumns()->addIndexColumn()->toJson(); goto QQMx1; I1f52: $logs->write(__FUNCTION__, "\123\x54\x41\122\124"); goto btF0A; nBJnn: lQrwd: goto zi_eX; btF0A: $results = []; goto jP2fj; jP2fj: try { goto oO3qK; gUSO7: $logs->write("\x42\x49\116\104\111\x4e\107", "\x5b" . implode("\x2c\40", $queries[$q]["\x62\x69\156\x64\x69\x6e\147\163"]) . "\135"); goto hBHsw; NHqZE: $results = $this->visitors_service->get($filter); goto LXHQ2; iZ0RV: $q = 0; goto LEf1o; S2LlE: $filter["\x4b\101\102\x55\x50\101\124\105\116"] = $request->KABUPATEN ?? ''; goto R3K0c; LXHQ2: $queries = DB::getQueryLog(); goto iZ0RV; nTgTc: goto xqByE; goto HTbwI; oO3qK: DB::enableQueryLog(); goto ACpAW; ACpAW: $filter["\120\x52\117\x56\111\x4e\x53\x49"] = $request->PROVINSI ?? ''; goto S2LlE; hBHsw: $logs->write("\123\121\114", $sql); goto jxjbP; LEf1o: xqByE: goto pTYuf; LK4gE: $filter["\x45\x4e\104\x5f\104\101\x54\105"] = $request->END_DATE ?? ''; goto NHqZE; jxjbP: Y7N5U: goto Iyl8L; HTbwI: SXeHB: goto YBLd8; na6Dc: $sql = Str::replaceArray("\77", $queries[$q]["\142\x69\x6e\x64\x69\156\147\x73"], str_replace("\x3f", "\47\x3f\47", $queries[$q]["\161\165\x65\162\x79"])); goto gUSO7; R3K0c: $filter["\x57\114"] = $request->WL ?? ''; goto HedN6; HedN6: $filter["\123\124\x41\122\x54\137\x44\x41\x54\x45"] = $request->START_DATE ?? ''; goto LK4gE; Iyl8L: $q++; goto nTgTc; pTYuf: if (!($q < count($queries))) { goto SXeHB; } goto na6Dc; YBLd8: } catch (Throwable $th) { $logs->write("\105\x52\122\x4f\x52", $th->getMessage()); } goto KLgp1; RuWUW: if (!$request->has("\x6e\x6f\144\x61\164\x61")) { goto lQrwd; } goto jsR7Q; jsR7Q: return DataTables::of([])->toJson(); goto nBJnn; KLgp1: $logs->write(__FUNCTION__, "\x53\124\117\120\15\xa"); goto yyl5E; zi_eX: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\x4c\x6f\147"); goto I1f52; QQMx1: } public function store() { } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update() { } public function destroy(string $id) : JsonResponse { } public function ExportXLS(Request $request) { goto cq_dW; k7IE9: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\151\156\x64\151\x6e\147\163"], str_replace("\77", "\47\x3f\x27", $queries[$q]["\x71\x75\x65\x72\x79"])); goto d5evl; Vr_WM: $logs->write("\123\x51\114", $sql); goto HgY4A; MA1yH: goto Ore47; goto SLYZT; fYkES: $queries = DB::getQueryLog(); goto Q1D41; HgY4A: DtyrW: goto Wi3ws; lpuHc: $logs->write(__FUNCTION__, "\x53\124\x41\122\124"); goto u1cFV; u1cFV: $results = []; goto vH5sd; cq_dW: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\x6f\147"); goto lpuHc; Th0he: return Excel::download(new VisitorsReportExport($results), "\114\x61\x70\157\162\141\x6e\x5f\x42\x61\x63\141\137\102\165\x6b\165\56\170\x6c\163\170"); goto Sk5Cr; Q1D41: $q = 0; goto VlB4t; SLYZT: KE3WL: goto d24uh; d5evl: $logs->write("\102\111\x4e\104\111\116\107", "\x5b" . implode("\x2c\x20", $queries[$q]["\x62\151\156\x64\151\x6e\147\x73"]) . "\x5d"); goto Vr_WM; Wi3ws: $q++; goto MA1yH; vH5sd: try { goto WpiF4; Q_3bd: $filter["\123\124\x41\x52\124\x5f\104\x41\x54\x45"] = $request->START_DATE ?? ''; goto pJNC7; a1XsM: $this->visitors_service->get($filter)->map(function ($value, $i) use(&$results) { goto aZxCC; aZxCC: $results[$i]["\x77\x6c\137\x6e\x61\x6d\145"] = $value->wl_name; goto EGRRp; AzHTl: $results[$i]["\153\x61\x62\165\x70\141\164\x65\156\137\156\141\155\x65"] = $value->kabupaten_name; goto ExB18; EGRRp: $results[$i]["\x70\162\x6f\166\151\x6e\x73\x69\x5f\156\141\x6d\145"] = $value->provinsi_name; goto AzHTl; ExB18: $results[$i]["\x76\151\x73\x69\164\x6f\x72"] = $value->visitor; goto zINqR; zINqR: }); goto KSrji; vmx1c: $filter["\x57\x4c"] = $request->WL ?? ''; goto Q_3bd; WpiF4: DB::enableQueryLog(); goto jkwT7; jkwT7: $filter["\x50\122\x4f\126\111\116\x53\111"] = $request->PROVINSI ?? ''; goto XGg3t; pJNC7: $filter["\x45\116\104\137\x44\101\x54\105"] = $request->END_DATE ?? ''; goto a1XsM; XGg3t: $filter["\x4b\x41\102\125\120\101\124\105\116"] = $request->KABUPATEN ?? ''; goto vmx1c; KSrji: } catch (\Exception $e) { $logs->write("\105\x52\x52\117\x52", $e->getMessage()); } goto fYkES; VlB4t: Ore47: goto KCpR5; KCpR5: if (!($q < count($queries))) { goto KE3WL; } goto k7IE9; d24uh: $logs->write(__FUNCTION__, "\x53\x54\x4f\x50\15\xa"); goto Th0he; Sk5Cr: } }
