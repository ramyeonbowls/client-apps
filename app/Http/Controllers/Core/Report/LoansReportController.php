<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-18 10:11:19             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Http\Controllers\Core\Report; use App\Logs; use Exception; use Throwable; use Carbon\Carbon; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Http\Request; use Illuminate\Http\JsonResponse; use Illuminate\Support\Facades\DB; use App\Http\Controllers\Controller; use Maatwebsite\Excel\Facades\Excel; use App\Exports\Report\LoansReportExport; use App\Services\Report\LoansReportService; use Yajra\DataTables\Facades\DataTables; class LoansReportController extends Controller { private LoansReportService $loans_service; public function __construct() { $this->middleware("\x61\165\164\x68"); $this->loans_service = new LoansReportService(); } public function index(Request $request) : JsonResponse { goto Hu1g9; I92QN: return DataTables::of($results)->escapeColumns()->addIndexColumn()->toJson(); goto vIuVd; Hu1g9: if (!$request->has("\156\157\144\141\x74\x61")) { goto GgELb; } goto PqhN8; dMnlb: $logs->write(__FUNCTION__, "\x53\124\x4f\x50\15\xa"); goto I92QN; GlKCI: try { goto jyvOi; mI909: if (!($q < count($queries))) { goto VTE71; } goto HvbJW; V7pY2: $filter["\x45\116\104\137\x44\x41\124\105"] = $request->END_DATE ?? ''; goto BpkOP; vkL7s: $filter["\113\x41\x42\125\x50\101\124\105\x4e"] = $request->KABUPATEN ?? ''; goto FaS7P; cs5qL: $q++; goto a7yZA; JxmjT: NYGk0: goto cs5qL; BpkOP: $filter["\x53\124\x41\x54\x55\123"] = $request->STATUS ?? ''; goto tJ_B0; swtuf: xvUiL: goto mI909; tJ_B0: $results = $this->loans_service->get($filter); goto fsdfV; WfGL9: VTE71: goto LFjok; fsdfV: $queries = DB::getQueryLog(); goto jxO4C; HvbJW: $sql = Str::replaceArray("\77", $queries[$q]["\x62\151\x6e\x64\x69\156\x67\x73"], str_replace("\x3f", "\47\77\47", $queries[$q]["\x71\165\x65\162\171"])); goto SrfqW; koOV_: $filter["\x50\x52\117\x56\111\x4e\123\x49"] = $request->PROVINSI ?? ''; goto vkL7s; FaS7P: $filter["\x57\x4c"] = $request->WL ?? ''; goto NG8oc; jxO4C: $q = 0; goto swtuf; xsNhQ: $logs->write("\x53\x51\x4c", $sql); goto JxmjT; NG8oc: $filter["\x53\124\x41\122\x54\x5f\104\x41\124\x45"] = $request->START_DATE ?? ''; goto V7pY2; SrfqW: $logs->write("\x42\111\x4e\x44\x49\x4e\x47", "\x5b" . implode("\x2c\x20", $queries[$q]["\x62\151\x6e\144\151\x6e\147\163"]) . "\x5d"); goto xsNhQ; jyvOi: DB::enableQueryLog(); goto koOV_; a7yZA: goto xvUiL; goto WfGL9; LFjok: } catch (Throwable $th) { $logs->write("\105\x52\x52\117\x52", $th->getMessage()); } goto dMnlb; CNQX0: $logs->write(__FUNCTION__, "\123\124\x41\x52\x54"); goto VFR0J; VFR0J: $results = []; goto GlKCI; gXtIW: $logs = new Logs(Arr::last(explode("\134", get_class())) . "\114\157\147"); goto CNQX0; dggfs: GgELb: goto gXtIW; PqhN8: return DataTables::of([])->toJson(); goto dggfs; vIuVd: } public function store() { } public function show(string $id) : JsonResponse { return response()->json($id, 200); } public function update() { } public function destroy(string $id) : JsonResponse { } public function ExportXLS(Request $request) { goto nUcQi; z2tc2: $queries = DB::getQueryLog(); goto nWMz1; TXa2m: $logs->write("\x42\111\116\x44\x49\x4e\107", "\x5b" . implode("\54\40", $queries[$q]["\x62\x69\156\144\151\156\147\163"]) . "\135"); goto BMoDy; nUcQi: $logs = new Logs(Arr::last(explode("\x5c", get_class())) . "\x4c\157\x67"); goto A7jeA; oF0g3: $results = []; goto LZJwf; gnwT3: B0YIt: goto WGzuw; W2s1y: $logs->write(__FUNCTION__, "\123\124\117\120\xd\12"); goto ONvod; A7jeA: $logs->write(__FUNCTION__, "\x53\124\x41\122\x54"); goto oF0g3; WGzuw: if (!($q < count($queries))) { goto WzHiQ; } goto WD22r; hGc6q: goto B0YIt; goto EecqD; ONvod: return Excel::download(new LoansReportExport($results), "\114\x61\x70\x6f\162\x61\156\x5f\102\141\143\141\137\x42\x75\153\165\x2e\x78\x6c\163\x78"); goto VG3AW; qW2Rg: $q++; goto hGc6q; WD22r: $sql = Str::replaceArray("\77", $queries[$q]["\x62\x69\156\144\151\x6e\x67\163"], str_replace("\77", "\x27\77\x27", $queries[$q]["\161\x75\145\x72\171"])); goto TXa2m; LZJwf: try { goto vWuig; MsCtm: $filter["\123\x54\101\x52\x54\137\x44\101\x54\x45"] = $request->START_DATE ?? ''; goto bU2aN; NMvSc: $filter["\x53\x54\x41\x54\x55\x53"] = $request->STATUS ?? ''; goto hUlcp; TP7K9: $filter["\x4b\x41\x42\x55\120\101\x54\105\x4e"] = $request->KABUPATEN ?? ''; goto KPinB; bU2aN: $filter["\105\x4e\x44\x5f\x44\101\x54\105"] = $request->END_DATE ?? ''; goto NMvSc; KPinB: $filter["\127\x4c"] = $request->WL ?? ''; goto MsCtm; vWuig: DB::enableQueryLog(); goto ioVXH; hUlcp: $this->loans_service->get($filter)->map(function ($value, $i) use(&$results) { goto HTF7T; k9Jd6: $results[$i]["\146\154\141\x67\137\145\156\144"] = $value->flag_end == "\x59" ? "\104\151\x6b\x65\155\142\141\154\151\x6b\141\156" : "\104\151\x70\151\x6e\x6a\x61\x6d"; goto BA0nr; oZM8p: $results[$i]["\163\164\141\162\x74\137\x64\141\164\x65"] = $value->start_date; goto wU6vv; Iiux_: $results[$i]["\x65\156\x64\x5f\x64\141\x74\x65"] = $value->end_date; goto k9Jd6; FRpQC: $results[$i]["\156\141\x6d\x65"] = $value->name; goto oZM8p; HTF7T: $results[$i]["\167\x6c\x5f\156\141\x6d\x65"] = $value->wl_name; goto vz8Hu; vz8Hu: $results[$i]["\x70\162\x6f\x76\x69\x6e\163\151\x5f\x6e\x61\x6d\145"] = $value->provinsi_name; goto xCePo; wU6vv: $results[$i]["\x74\151\x74\x6c\x65"] = $value->title; goto Iiux_; xCePo: $results[$i]["\153\141\x62\x75\x70\x61\x74\x65\x6e\137\x6e\x61\155\x65"] = $value->kabupaten_name; goto FRpQC; BA0nr: }); goto pY1Kf; ioVXH: $filter["\120\x52\x4f\x56\x49\x4e\123\111"] = $request->PROVINSI ?? ''; goto TP7K9; pY1Kf: } catch (\Exception $e) { $logs->write("\105\122\122\117\x52", $e->getMessage()); } goto z2tc2; nWMz1: $q = 0; goto gnwT3; BMoDy: $logs->write("\123\x51\x4c", $sql); goto CIElx; EecqD: WzHiQ: goto W2s1y; CIElx: MSjmf: goto qW2Rg; VG3AW: } }
