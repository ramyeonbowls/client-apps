<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-23 17:36:13             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Console\Commands; use Storage; use App\Logs; use Carbon\Carbon; use Illuminate\Support\Str; use Illuminate\Console\Command; use Illuminate\Support\Facades\DB; class AutoExportTrx extends Command { protected $signature = "\147\x69\156\145\163\x69\x61\72\145\x78\x70\157\x72\x74\55\x74\x72\x78\40\x7b\x42\x4c\117\x43\x4b\x3d\125\x53\105\x52\x53\175\x20\173\55\55\x64\145\x62\165\147\175\40\x7b\55\x2d\x70\145\162\x69\157\144\145\x3d\x7d"; protected $description = "\x43\x6f\155\155\141\x6e\144\40\x66\x6f\162\40\x75\160\144\141\x74\x65\40\x65\x78\x70\157\162\x74\x20\164\x72\x61\x6e\163\x61\x63\164\x69\x6f\156\x20\164\x6f\40\146\x74\x70\x20\173\x42\x4c\x4f\103\x4b\x3d\x77\x68\x69\x63\x68\40\x74\162\x61\x6e\163\x61\x63\x74\x69\x6f\156\40\x74\x6f\x20\x65\x78\x70\x6f\162\x74\x7d\x20\173\55\x2d\144\x65\142\x75\147\75\160\x72\x69\156\164\40\x71\x75\x65\162\x79\40\164\x6f\40\154\157\x67\163\175\x20\173\x2d\x2d\x70\145\162\x69\157\144\x65\75\55\61\x7d"; public function handle() { goto XO2Pl; Finm1: if ($filter_block == '' || $filter_block == "\101\x4c\x4c\102\114\x4f\103\113") { goto HWbS9; } goto wvs4K; l1L6A: if ($filter_block == '' || $filter_block == "\x41\x4c\x4c\102\114\x4f\103\x4b") { goto dp7VX; } goto xkD1K; isIZk: lLnFr: goto ac2rW; lzfHi: $logs->write("\x53\124\117\120", "\xd\xa"); goto lIuEw; VmY76: $this->exportRead($logs, $client_id); goto YK82L; l03yj: H4K9i: goto s12Dr; yP0UX: goto SELESAI; goto l03yj; wvs4K: goto SELESAI; goto LIrfN; wJ1Cu: $job_info = pathinfo(__FILE__); goto TVWOE; rR3Ng: $logs = new Logs($client_id . "\137" . $this->periode . "\137" . $nama_jobs . "\137" . $filter_block); goto wxVzL; XO2Pl: $client_id = config("\141\160\x70\56\x63\154\x69\145\x6e\x74\x5f\151\x64", ''); goto wJ1Cu; Q1e_y: dp7VX: goto k1lka; qkwz8: b9hSb: goto yma3w; LIrfN: HWbS9: goto J3kDh; Ij2NR: $this->debug = $this->option("\144\145\142\x75\147") ?? 0; goto EHrkU; F5986: goto SELESAI; goto q1N3Q; xkD1K: goto SELESAI; goto Q1e_y; q1N3Q: qWTmn: goto TkUhH; gxWI7: ALLTRX: goto O80yG; HfcsO: $filter_block = $this->argument("\x42\x4c\117\x43\113") ? $this->argument("\102\x4c\x4f\x43\113") : "\x52\105\x41\104"; goto Ij2NR; qu6gX: if ($filter_block == '' || $filter_block == "\x41\x4c\x4c\x42\114\117\x43\x4b") { goto H4K9i; } goto yP0UX; TkUhH: VISIT: goto PdWxj; BqcOc: $this->ftp_username = env("\106\x54\120\137\125\123\x45\122\116\101\115\105"); goto dGshy; wFq5D: $this->exportAttr($logs, $client_id); goto VmY76; a362N: $this->exportRent($logs, $client_id); goto eOE1A; eOE1A: if ($filter_block == '' || $filter_block == "\101\114\114\102\114\x4f\x43\x4b") { goto qWTmn; } goto F5986; TVWOE: $nama_jobs = $job_info["\x66\x69\154\x65\156\141\x6d\145"]; goto vE8JN; dGshy: $this->ftp_password = env("\106\124\120\x5f\120\x41\x53\x53\x57\117\x52\104"); goto AIa_T; s12Dr: RENT: goto a362N; EZO_L: if ($filter_block == '' || $filter_block == "\x41\114\114\x42\114\117\103\x4b") { goto b9hSb; } goto HReB0; YK82L: $this->exportRent($logs, $client_id); goto Ndk4c; yma3w: ATTR: goto itT6H; Ndk4c: $this->exportVisit($logs, $client_id); goto wHzoZ; vE8JN: $now = Carbon::now("\x41\163\x69\x61\x2f\112\141\x6b\141\x72\x74\141"); goto HfcsO; EHrkU: $this->periode = $this->option("\160\145\162\x69\x6f\144\x65") !== '' ? now()->addMonths((int) $this->option("\x70\x65\x72\151\x6f\144\x65"))->format("\x59\155") : now()->format("\x59\155"); goto rR3Ng; vs8mW: goto SELESAI; goto RvLGw; lma13: oVNFc: goto isIZk; ac2rW: if ($filter_block == '' || $filter_block == "\101\x4c\114\x42\114\117\103\113") { goto MaiHr; } goto vs8mW; itT6H: $this->exportAttr($logs, $client_id); goto Finm1; RvLGw: MaiHr: goto gxWI7; Uuyj7: $this->exportUsers($logs, $client_id); goto EZO_L; AIa_T: switch ($filter_block) { case "\x55\x53\x45\x52\x53": goto USERS; goto lLnFr; case "\x41\x54\124\x52": goto ATTR; goto lLnFr; case "\x52\105\101\x44": goto READ; goto lLnFr; case "\x52\x45\x4e\124": goto RENT; goto lLnFr; case "\126\111\123\111\124": goto VISIT; goto lLnFr; case "\x41\x4c\x4c\124\x52\x58": goto ALLTRX; goto lLnFr; } goto lma13; k1lka: SELESAI: goto lzfHi; wHzoZ: goto SELESAI; goto hg8Hh; hg8Hh: USERS: goto Uuyj7; PdWxj: $this->exportVisit($logs, $client_id); goto l1L6A; wxVzL: $logs->write("\x53\x54\x41\x52\x54", ''); goto ezlce; O80yG: $this->exportUsers($logs, $client_id); goto wFq5D; J3kDh: READ: goto fQyNf; fQyNf: $this->exportRead($logs, $client_id); goto qu6gX; ezlce: $this->ftp_host = env("\x46\124\120\x5f\x48\x4f\x53\124"); goto BqcOc; HReB0: goto SELESAI; goto qkwz8; lIuEw: } private function exportUsers($logs, $client_id) { goto f_xcD; X_j2T: if (!$this->debug) { goto zbbe1; } goto bOKVX; hH252: B0Pyw: goto PqeSe; VMnTm: $sql = Str::replaceArray("\77", $queries[$q]["\x62\151\156\x64\151\156\147\163"], str_replace("\77", "\x27\x3f\47", $queries[$q]["\161\x75\145\x72\x79"])); goto ULtGu; PqeSe: if (!($q < count($queries))) { goto nzfpC; } goto VMnTm; HmE42: try { goto pwfpj; iHXMk: $logs->write("\x53\x75\143\x63\145\x73\163", "\103\x72\x65\x61\164\145\x64\40\x64\x69\x72\145\143\164\x6f\x72\x79\x3a\40{$remote_dir}"); goto tNqpJ; bdOG_: if ($login) { goto Ipbgx; } goto HWRX9; GeGqf: ftp_close($conn_id); goto W2wml; CIYLB: $logs->write("\104\141\x74\141", "\133" . $row . "\135"); goto xBdDK; QZFL3: fclose($handle); goto NsWYJ; nCMtC: if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) { goto LYtmW; } goto xLd8y; tNqpJ: iAkbv: goto Ohtcy; xBdDK: if ($row > 0) { goto vI97k; } goto EMSnb; D99va: $logs->write("\x53\165\x63\143\145\163\x73", "\106\151\154\145\x20\165\x70\154\157\x61\144\145\144\40\163\x75\143\x63\145\x73\x73\x66\x75\154\x6c\171\x20\x74\157\x20\106\124\120\x20\163\x65\x72\166\x65\162\56"); goto b2q6I; EMSnb: $this->line("\116\157\x20\104\x61\164\x61"); goto eD12S; PN4Py: $remote_file = $remote_dir . "\57" . basename($file); goto nCMtC; Ej9sA: $remote_dir = "\x2f" . $client_id; goto feLPb; feLPb: if (@ftp_chdir($conn_id, $remote_dir)) { goto oCUXW; } goto OSIlu; TVj1J: unlink($file); goto XHtM_; NHJp3: $row = count($query); goto CIYLB; Ohtcy: oCUXW: goto PN4Py; OSIlu: if (ftp_mkdir($conn_id, $remote_dir)) { goto J68Dh; } goto gnNCZ; iT1UZ: foreach ($query as $value) { fputcsv($handle, [$value->id, $value->name, $value->email, $value->email_verified_at, $value->password, $value->remember_token, $value->created_at, $value->updated_at, $value->role, $value->client_id, $value->flag_approve], "\x7c"); q7Eyj: } goto ij3MT; bvqiL: $this->line("\105\116\104\40\x3d\x3e\40" . $SECTIONNAME . "\xd\12"); goto ibShP; NsWYJ: $conn_id = ftp_connect($this->ftp_host); goto HQstv; HQstv: $login = ftp_login($conn_id, $this->ftp_username, $this->ftp_password); goto bdOG_; ij3MT: oUZGW: goto QZFL3; f3rML: vI97k: goto tZ3YX; XHtM_: ishNV: goto bvqiL; g5_1S: Ipbgx: goto Ej9sA; tZ3YX: $file = storage_path("\141\160\160\x2f\147\x6e\x73\137" . $this->periode . "\137\165\163\x72\56\143\163\x76"); goto r2Pry; AouF7: goto pn6n1; goto PPoCr; xLd8y: $logs->write("\105\x72\162\157\x72", "\165\x70\x6c\x6f\x61\x64\151\x6e\147\40\x74\x68\x65\40\146\x69\x6c\x65\40\164\x6f\x20\106\124\120\x2e"); goto AouF7; r2Pry: $handle = fopen($file, "\x77"); goto GdE5O; HWRX9: $logs->write("\105\162\x72\157\x72", "\x46\124\x50\x20\x6c\x6f\147\x69\156\40\x66\141\151\x6c\145\144\x2e"); goto BbC8K; pwfpj: $this->line("\102\105\107\x49\x4e\x20\75\x3e\x20" . $SECTIONNAME); goto NHJp3; PPoCr: LYtmW: goto D99va; GdE5O: fputcsv($handle, ["\x69\x64", "\156\x61\155\145", "\145\x6d\141\151\154", "\145\155\x61\151\154\137\x76\145\162\x69\x66\x69\x65\x64\x5f\141\x74", "\x70\141\x73\163\167\x6f\x72\144", "\x72\145\x6d\x65\155\142\x65\x72\137\164\157\x6b\x65\156", "\143\x72\x65\x61\164\x65\x64\137\x61\164", "\165\x70\x64\141\x74\x65\144\137\x61\x74", "\162\x6f\154\145", "\143\x6c\x69\145\x6e\164\x5f\x69\x64", "\146\154\x61\x67\x5f\141\160\160\162\157\x76\145"], "\x7c"); goto iT1UZ; erwmT: goto iAkbv; goto CJDi_; BbC8K: goto sQgeN; goto g5_1S; eD12S: goto ishNV; goto f3rML; b2q6I: pn6n1: goto GeGqf; CJDi_: J68Dh: goto iHXMk; gnNCZ: $logs->write("\105\x72\x72\x6f\162", "\106\x61\x69\154\145\x64\40\164\x6f\x20\x63\162\x65\x61\164\x65\x20\144\x69\162\x65\x63\164\157\162\171\72\x20{$remote_dir}"); goto erwmT; W2wml: sQgeN: goto TVj1J; ibShP: } catch (\PDOException $e_H) { goto abRAA; VO_Jw: $errMessage = $e_H->errorInfo[2]; goto ZZT3_; abRAA: $sqlState = $e_H->errorInfo[0]; goto o33QT; o33QT: $errCode = $e_H->errorInfo[1]; goto VO_Jw; ZZT3_: $logs->write($SECTIONNAME, "\105\x52\122\117\x52\x20" . $sqlState . "\x20\x3d\x3e\40" . $errMessage . "\12"); goto W_VKs; W_VKs: } goto nWlAO; rc7WT: goto B0Pyw; goto ofJmH; Kawe7: $queries = DB::getQueryLog(); goto LHlZI; ofJmH: nzfpC: goto dRl64; LHlZI: $q = 0; goto hH252; bOKVX: DB::enableQueryLog(); goto FRASu; hPMM_: $query = DB::table("\165\163\x65\162\x73\x20\x61\163\x20\x61")->select(["\141\56\52"])->where(function ($query) { $query->whereRaw("\x44\x41\x54\x45\x5f\106\x4f\122\x4d\x41\124\x28\x61\56\143\x72\145\x61\164\145\144\137\x61\164\54\40\47\45\131\x25\155\47\x29\40\x3d\x20\x27" . $this->periode . "\x27")->orWhereRaw("\x44\101\x54\x45\x5f\106\117\x52\115\x41\124\x28\x61\56\165\x70\144\141\164\x65\x64\x5f\x61\x74\x2c\x20\47\45\131\45\155\47\x29\40\x3d\40\x27" . $this->periode . "\x27"); })->get(); goto HmE42; jAqon: wwNAm: goto SQTNQ; nWlAO: if (!$this->debug) { goto uolq8; } goto Kawe7; f_xcD: $SECTIONNAME = "\125\123\105\x52\123"; goto X_j2T; ULtGu: $logs->write("\x42\111\116\x44\x49\116\x47", "\133" . implode("\x2c\40", $queries[$q]["\x62\151\156\x64\151\156\x67\163"]) . "\x5d"); goto MIiAZ; dRl64: uolq8: goto euR3l; MIiAZ: $logs->write("\x53\x51\x4c", $sql); goto jAqon; SQTNQ: $q++; goto rc7WT; FRASu: zbbe1: goto hPMM_; euR3l: } private function exportAttr($logs, $client_id) { goto eoAAl; oaJPz: try { goto t8yMe; nOXN0: ftp_close($conn_id); goto F21eG; ylhx3: $conn_id = ftp_connect($this->ftp_host); goto y4KOE; t8yMe: $this->line("\102\x45\107\111\116\40\75\76\x20" . $SECTIONNAME); goto Tj30O; LkcmK: T6Yub: goto NKawC; bK1_N: goto luTkE; goto kMlep; ROHwU: sO7kZ: goto g5YWr; MEzdv: $logs->write("\x45\162\162\157\162", "\165\x70\x6c\x6f\141\144\151\156\x67\40\x74\x68\145\x20\x66\151\x6c\145\40\164\x6f\40\x46\x54\x50\x2e"); goto wpWRu; O8aLE: if (@ftp_chdir($conn_id, $remote_dir)) { goto sO7kZ; } goto VXyX1; NW5F4: goto QiYu0; goto Ak1QR; avPZM: goto q3jsu; goto JvrVs; ZkOfg: $remote_dir = "\57" . $client_id; goto O8aLE; S7mxG: $this->line("\105\116\x44\x20\x3d\76\40" . $SECTIONNAME . "\15\xa"); goto BCFZR; ZJ6_I: if ($login) { goto EtOx9; } goto mnPsW; wpWRu: goto sxKTd; goto qZNLf; kMlep: QjXEv: goto vldZd; F21eG: q3jsu: goto anYnb; aWc3m: QiYu0: goto ROHwU; lRVMu: if ($row > 0) { goto QjXEv; } goto b1D8G; mnPsW: $logs->write("\105\x72\162\157\162", "\106\124\x50\x20\154\157\x67\x69\x6e\40\146\141\151\x6c\145\x64\56"); goto avPZM; zt9OA: foreach ($query as $value) { fputcsv($handle, [$value->id, $value->client_id, $value->nik, $value->phone, $value->birthday, $value->photo, $value->created_at, $value->updated_at, $value->gender, $value->email], "\x7c"); eagKu: } goto LkcmK; hNa1L: $logs->write("\123\165\x63\143\x65\x73\163", "\106\x69\x6c\145\x20\x75\160\154\157\141\x64\x65\x64\x20\163\165\x63\143\x65\x73\x73\146\x75\154\x6c\x79\x20\x74\x6f\40\x46\x54\x50\x20\x73\145\162\x76\145\162\x2e"); goto m9uxv; Ak1QR: YBiN6: goto q5EE_; fznwt: luTkE: goto S7mxG; vldZd: $file = storage_path("\x61\x70\160\57\147\x6e\163\137" . $this->periode . "\137\141\164\x74\162\x2e\x63\x73\x76"); goto QRIaB; y4KOE: $login = ftp_login($conn_id, $this->ftp_username, $this->ftp_password); goto ZJ6_I; VXyX1: if (ftp_mkdir($conn_id, $remote_dir)) { goto YBiN6; } goto Ly28L; Ly28L: $logs->write("\x45\162\x72\157\x72", "\106\141\x69\x6c\x65\144\x20\x74\x6f\40\x63\162\145\x61\164\x65\40\144\x69\162\x65\x63\x74\157\162\171\x3a\40{$remote_dir}"); goto NW5F4; qZNLf: rK55C: goto hNa1L; b1D8G: $this->line("\x4e\157\40\104\x61\x74\x61"); goto bK1_N; xvbyI: if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) { goto rK55C; } goto MEzdv; QRIaB: $handle = fopen($file, "\167"); goto ZOZYo; q5EE_: $logs->write("\x53\165\x63\143\x65\163\x73", "\x43\x72\x65\141\164\145\x64\x20\x64\x69\x72\x65\x63\164\x6f\162\x79\x3a\40{$remote_dir}"); goto aWc3m; mLhMh: $logs->write("\104\141\x74\x61", "\133" . $row . "\x5d"); goto lRVMu; ZOZYo: fputcsv($handle, ["\151\144", "\x63\154\151\x65\156\164\x5f\x69\x64", "\156\x69\x6b", "\x70\x68\x6f\156\x65", "\x62\151\x72\164\x68\144\x61\171", "\160\150\x6f\x74\x6f", "\x63\162\145\x61\164\x65\x64\137\x61\164", "\165\160\144\141\x74\145\144\137\141\x74", "\x67\x65\x6e\x64\145\x72", "\x65\155\141\151\x6c"], "\174"); goto zt9OA; anYnb: unlink($file); goto fznwt; JvrVs: EtOx9: goto ZkOfg; g5YWr: $remote_file = $remote_dir . "\57" . basename($file); goto xvbyI; NKawC: fclose($handle); goto ylhx3; m9uxv: sxKTd: goto nOXN0; Tj30O: $row = count($query); goto mLhMh; BCFZR: } catch (\PDOException $e_H) { goto NKIS8; NKIS8: $sqlState = $e_H->errorInfo[0]; goto hY_fQ; S367X: $logs->write($SECTIONNAME, "\105\x52\122\x4f\122\40" . $sqlState . "\x20\x3d\x3e\x20" . $errMessage . "\xa"); goto az4mk; DSyCS: $errMessage = $e_H->errorInfo[2]; goto S367X; hY_fQ: $errCode = $e_H->errorInfo[1]; goto DSyCS; az4mk: } goto l0jdA; Ep2PK: PpjnH: goto GY3Ca; DvYBd: $queries = DB::getQueryLog(); goto rAMpg; UI7qe: $logs->write("\123\121\x4c", $sql); goto MRLq7; GwtVX: DB::enableQueryLog(); goto qbxrY; RoiGL: goto PpjnH; goto LLugI; GY3Ca: if (!($q < count($queries))) { goto Z59Tf; } goto fkPDJ; eoAAl: $SECTIONNAME = "\x41\124\x54\x52"; goto uzNNC; l0jdA: if (!$this->debug) { goto hxHe_; } goto DvYBd; MRLq7: SEA1y: goto O_VjC; kac_w: $query = DB::table("\164\x61\164\x74\x72\x5f\x6d\x65\x6d\x62\x65\x72\40\x61\163\40\141")->select(["\x61\56\x2a", "\142\56\145\155\141\x69\154"])->join("\165\x73\145\162\x73\x20\141\x73\40\142", function ($join) { $join->on("\x61\56\143\x6c\151\145\156\164\137\x69\x64", "\75", "\142\56\x63\154\x69\145\x6e\x74\137\x69\x64")->on("\141\56\151\x64", "\75", "\x62\56\x69\144"); })->where(function ($query) { $query->whereRaw("\104\101\124\105\x5f\106\x4f\x52\x4d\x41\x54\50\x61\56\143\x72\x65\141\164\x65\x64\x5f\x61\x74\x2c\x20\x27\x25\131\45\x6d\x27\51\40\x3d\x20\47" . $this->periode . "\x27")->orWhereRaw("\104\101\x54\x45\137\106\117\x52\x4d\x41\124\50\141\x2e\165\160\144\x61\x74\145\x64\137\141\x74\x2c\x20\47\x25\131\45\x6d\47\x29\x20\75\x20\x27" . $this->periode . "\x27"); })->get(); goto oaJPz; LLugI: Z59Tf: goto NoOiE; fkPDJ: $sql = Str::replaceArray("\77", $queries[$q]["\142\x69\156\x64\151\156\x67\x73"], str_replace("\77", "\x27\x3f\x27", $queries[$q]["\161\x75\x65\x72\x79"])); goto KqBfx; KqBfx: $logs->write("\x42\x49\x4e\x44\111\116\107", "\133" . implode("\x2c\x20", $queries[$q]["\x62\x69\156\x64\151\x6e\x67\163"]) . "\x5d"); goto UI7qe; uzNNC: if (!$this->debug) { goto H0SqJ; } goto GwtVX; O_VjC: $q++; goto RoiGL; qbxrY: H0SqJ: goto kac_w; rAMpg: $q = 0; goto Ep2PK; NoOiE: hxHe_: goto VkYsV; VkYsV: } private function exportRead($logs, $client_id) { goto mo9zG; bSKRj: $queries = DB::getQueryLog(); goto XvFrg; Sw3Yn: u8Coe: goto wHJ4Q; VA3c5: goto l4llj; goto O1XGr; Pbc8b: try { goto CMdpj; xgeUW: $remote_dir = "\x2f" . $client_id; goto qx9dJ; UD3lN: if ($login) { goto TmkXz; } goto cZueF; qMeeN: $login = ftp_login($conn_id, $this->ftp_username, $this->ftp_password); goto UD3lN; ax4E1: $logs->write("\x45\x72\x72\x6f\x72", "\165\x70\154\157\x61\144\151\x6e\x67\x20\164\x68\x65\x20\146\x69\x6c\x65\40\164\157\x20\106\124\x50\x2e"); goto CzJ3M; NpCOa: $logs->write("\x53\165\143\143\x65\x73\163", "\x43\x72\145\141\x74\x65\144\40\x64\x69\162\145\x63\164\x6f\x72\171\72\40{$remote_dir}"); goto YvWXv; Ccn9b: LjiVL: goto pQQve; CzJ3M: goto HbgwR; goto lyNOp; YvWXv: aWwYX: goto ZrTCC; FN3lH: if (ftp_mkdir($conn_id, $remote_dir)) { goto jt353; } goto bTvJS; PWtVz: fclose($handle); goto JfkYD; CMdpj: $this->line("\x42\x45\x47\111\116\x20\75\x3e\40" . $SECTIONNAME); goto oGChN; lyNOp: SCuYK: goto yYOpZ; xtJsU: HbgwR: goto fpiS8; eFgMw: fputcsv($handle, ["\x69\144", "\165\x73\145\162\137\x69\144", "\143\x6c\x69\145\156\x74\x5f\151\144", "\163\x74\x61\162\164\x5f\162\x65\141\144", "\145\156\x64\x5f\x72\x65\x61\x64", "\x63\162\x65\x61\x74\145\x64\x5f\x61\x74", "\165\x70\144\x61\x74\x65\144\x5f\x61\164", "\142\157\157\x6b\137\x69\x64", "\146\x6c\x61\x67\x5f\x65\x6e\144", "\145\x6d\x61\151\154"], "\x7c"); goto iMXA4; TpkjW: $file = storage_path("\141\160\160\57\147\x6e\x73\x5f" . $this->periode . "\137\162\145\x61\144\56\x63\163\166"); goto hzeSB; ZN1iM: goto IHGMh; goto Z0hQY; cJd_d: if ($row > 0) { goto QowdA; } goto HiqWO; hzeSB: $handle = fopen($file, "\167"); goto eFgMw; PdcZR: jt353: goto NpCOa; ZrTCC: tKLDJ: goto FWrck; qx9dJ: if (@ftp_chdir($conn_id, $remote_dir)) { goto tKLDJ; } goto FN3lH; KDCM2: $logs->write("\104\x61\164\141", "\133" . $row . "\x5d"); goto cJd_d; JfkYD: $conn_id = ftp_connect($this->ftp_host); goto qMeeN; iMXA4: foreach ($query as $value) { fputcsv($handle, [$value->id, $value->user_id, $value->client_id, $value->start_read, $value->end_read, $value->created_at, $value->updated_at, $value->book_id, $value->flag_end, $value->email], "\x7c"); wmxKk: } goto wOvX1; Jo7x6: $this->line("\105\116\x44\x20\75\x3e\40" . $SECTIONNAME . "\xd\xa"); goto wvyXR; yYOpZ: $logs->write("\123\x75\143\x63\145\x73\x73", "\x46\151\154\x65\40\x75\x70\x6c\x6f\141\x64\x65\144\x20\163\165\143\x63\x65\x73\163\x66\165\154\x6c\x79\x20\x74\157\x20\x46\124\x50\40\163\x65\162\166\x65\162\56"); goto xtJsU; Z0hQY: QowdA: goto TpkjW; oGChN: $row = count($query); goto KDCM2; wOvX1: lJkGP: goto PWtVz; bTvJS: $logs->write("\x45\x72\x72\x6f\162", "\x46\141\151\154\x65\144\40\164\x6f\x20\143\162\x65\141\164\x65\40\x64\151\162\x65\x63\164\157\x72\171\72\40{$remote_dir}"); goto Cre0R; CrsyL: TmkXz: goto xgeUW; jvjzC: goto LjiVL; goto CrsyL; FdoB7: IHGMh: goto Jo7x6; FWrck: $remote_file = $remote_dir . "\x2f" . basename($file); goto cY6Ln; pQQve: unlink($file); goto FdoB7; cZueF: $logs->write("\105\x72\162\157\x72", "\x46\124\x50\x20\x6c\157\147\x69\x6e\40\146\x61\x69\x6c\x65\x64\x2e"); goto jvjzC; HiqWO: $this->line("\116\x6f\x20\104\x61\x74\x61"); goto ZN1iM; fpiS8: ftp_close($conn_id); goto Ccn9b; Cre0R: goto aWwYX; goto PdcZR; cY6Ln: if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) { goto SCuYK; } goto ax4E1; wvyXR: } catch (\PDOException $e_H) { goto fOCPJ; fOCPJ: $sqlState = $e_H->errorInfo[0]; goto wEsgq; vvu2E: $logs->write($SECTIONNAME, "\x45\x52\122\x4f\x52\x20" . $sqlState . "\x20\75\76\40" . $errMessage . "\xa"); goto aPf5d; SQ18e: $errMessage = $e_H->errorInfo[2]; goto vvu2E; wEsgq: $errCode = $e_H->errorInfo[1]; goto SQ18e; aPf5d: } goto IFIrU; wHJ4Q: $query = DB::table("\x74\164\x72\x78\x5f\162\145\141\144\x20\x61\x73\x20\x61")->select(["\x61\x2e\x2a", "\x62\x2e\145\x6d\141\x69\154"])->join("\x75\x73\x65\x72\x73\x20\141\x73\40\x62", function ($join) { $join->on("\141\x2e\143\x6c\x69\x65\156\164\x5f\151\x64", "\x3d", "\x62\56\x63\154\151\145\156\164\x5f\151\144")->on("\141\x2e\x75\163\x65\x72\137\151\144", "\75", "\142\56\x69\x64"); })->whereRaw("\104\101\124\105\137\106\117\122\x4d\x41\124\50\141\x2e\x73\x74\x61\162\x74\x5f\162\x65\x61\144\x2c\x20\47\45\x59\45\155\47\x29\x20\x3d\40\47" . $this->periode . "\47")->get(); goto Pbc8b; bafOq: if (!$this->debug) { goto u8Coe; } goto ttv0j; IFIrU: if (!$this->debug) { goto bY5Ra; } goto bSKRj; Llbrk: bY5Ra: goto yLnvy; T70ci: fU7cw: goto UiL2a; mo9zG: $SECTIONNAME = "\122\x45\101\x44"; goto bafOq; O579I: if (!($q < count($queries))) { goto DXOdJ; } goto BXzs_; O1XGr: DXOdJ: goto Llbrk; BXzs_: $sql = Str::replaceArray("\77", $queries[$q]["\142\x69\x6e\144\x69\156\x67\x73"], str_replace("\77", "\x27\77\x27", $queries[$q]["\x71\x75\145\x72\x79"])); goto FVtuM; zXxPA: $logs->write("\123\121\x4c", $sql); goto T70ci; XvFrg: $q = 0; goto EhiXG; FVtuM: $logs->write("\x42\111\x4e\x44\x49\116\x47", "\133" . implode("\x2c\40", $queries[$q]["\x62\151\x6e\x64\151\156\147\163"]) . "\135"); goto zXxPA; ttv0j: DB::enableQueryLog(); goto Sw3Yn; EhiXG: l4llj: goto O579I; UiL2a: $q++; goto VA3c5; yLnvy: } private function exportRent($logs, $client_id) { goto gVIQc; WAE93: $sql = Str::replaceArray("\x3f", $queries[$q]["\142\x69\156\144\151\156\147\163"], str_replace("\77", "\x27\x3f\47", $queries[$q]["\161\x75\x65\162\171"])); goto mW53m; G2G3z: if (!$this->debug) { goto MpdrC; } goto R0Kh5; m2gix: $q++; goto jRqri; mW53m: $logs->write("\x42\111\116\104\111\116\x47", "\x5b" . implode("\x2c\x20", $queries[$q]["\142\x69\x6e\144\151\x6e\147\163"]) . "\x5d"); goto RFXQR; peLoT: $query = DB::table("\164\162\145\156\x74\137\x62\x6f\x6f\153\x20\141\163\40\141")->select(["\141\56\x2a", "\142\x2e\145\x6d\141\151\x6c"])->join("\165\163\145\x72\163\x20\x61\163\40\142", function ($join) { $join->on("\141\x2e\x63\x6c\151\145\x6e\x74\137\151\x64", "\x3d", "\142\56\x63\x6c\151\145\156\x74\x5f\151\x64")->on("\x61\56\165\x73\145\162\x5f\x69\x64", "\x3d", "\142\56\151\144"); })->where(function ($query) { $query->whereRaw("\x44\101\x54\105\x5f\x46\117\x52\x4d\101\x54\x28\141\x2e\143\162\145\141\164\x65\144\x5f\141\164\54\x20\47\45\x59\45\155\47\x29\x20\75\40\47" . $this->periode . "\x27")->orWhereRaw("\x44\101\124\105\x5f\x46\x4f\x52\115\x41\x54\50\x61\56\165\x70\x64\x61\x74\x65\x64\137\x61\x74\x2c\x20\x27\x25\x59\x25\155\47\x29\x20\x3d\x20\x27" . $this->periode . "\47"); })->get(); goto uK9jl; jRqri: goto oBaJj; goto WtBfb; RFXQR: $logs->write("\123\121\114", $sql); goto ZOPiO; R0Kh5: DB::enableQueryLog(); goto gwXwX; MI7Kl: $q = 0; goto vrsf7; vMtkV: NPZX9: goto cH7yC; WtBfb: CliTr: goto vMtkV; r5vE6: if (!$this->debug) { goto NPZX9; } goto BQXfS; vrsf7: oBaJj: goto C63lj; gVIQc: $SECTIONNAME = "\122\105\116\124"; goto G2G3z; C63lj: if (!($q < count($queries))) { goto CliTr; } goto WAE93; uK9jl: try { goto Hk79k; m0dSS: goto pK4vP; goto M2EZ_; KxObw: $remote_dir = "\x2f" . $client_id; goto CHqq6; POZZh: $logs->write("\104\141\164\141", "\133" . $row . "\135"); goto YlGpW; YT5f0: $logs->write("\105\x72\162\157\162", "\x46\141\x69\154\x65\x64\x20\164\157\40\x63\162\145\x61\164\x65\x20\144\x69\162\x65\143\164\157\162\171\72\x20{$remote_dir}"); goto xXfJO; auMUG: $handle = fopen($file, "\x77"); goto OKKbG; B_4by: $this->line("\105\x4e\x44\40\x3d\76\x20" . $SECTIONNAME . "\xd\12"); goto jvW9g; wGyzc: goto PT05M; goto dUdiF; YlGpW: if ($row > 0) { goto FJ6F_; } goto pJmpV; pJmpV: $this->line("\116\x6f\x20\x44\141\x74\x61"); goto m0dSS; Kb2U2: $login = ftp_login($conn_id, $this->ftp_username, $this->ftp_password); goto uLbNH; mdQok: if (ftp_mkdir($conn_id, $remote_dir)) { goto kiK60; } goto YT5f0; ZqCRR: $logs->write("\x45\x72\x72\x6f\x72", "\165\160\154\x6f\141\x64\151\156\x67\40\x74\x68\145\x20\146\x69\154\145\x20\x74\157\x20\x46\124\x50\56"); goto PxuVt; BVWTj: unlink($file); goto y0JjP; CHqq6: if (@ftp_chdir($conn_id, $remote_dir)) { goto LyFho; } goto mdQok; p14pG: $logs->write("\x53\165\x63\143\145\x73\163", "\x46\151\x6c\145\40\x75\x70\154\x6f\x61\144\x65\144\x20\163\x75\x63\x63\145\x73\x73\x66\165\154\x6c\x79\40\164\x6f\x20\106\124\120\40\x73\145\x72\x76\145\162\x2e"); goto V6aot; E1C0Q: $remote_file = $remote_dir . "\x2f" . basename($file); goto NlhK2; Hk79k: $this->line("\x42\x45\x47\111\x4e\40\x3d\76\x20" . $SECTIONNAME); goto GB16K; jeUla: $file = storage_path("\x61\x70\160\57\147\x6e\163\137" . $this->periode . "\137\x72\145\156\x74\56\143\x73\x76"); goto auMUG; dUdiF: q0jJL: goto KxObw; V6aot: iYLA9: goto dKs43; Gq6g3: foreach ($query as $value) { fputcsv($handle, [$value->client_id, $value->user_id, $value->book_id, $value->start_date, $value->end_date, $value->flag_end, $value->created_at, $value->updated_at, $value->email], "\174"); P38me: } goto z4xm6; M2EZ_: FJ6F_: goto jeUla; z4xm6: oz3xS: goto ycPpB; W78zK: Ys0eP: goto p14pG; HqQ9n: PT05M: goto BVWTj; dKs43: ftp_close($conn_id); goto HqQ9n; eIExy: kiK60: goto PQK9I; WlYE_: iONhS: goto BoetW; GB16K: $row = count($query); goto POZZh; PxuVt: goto iYLA9; goto W78zK; aN6fW: $logs->write("\x45\162\x72\x6f\x72", "\106\124\120\40\x6c\157\x67\151\x6e\40\146\141\151\x6c\145\144\56"); goto wGyzc; PQK9I: $logs->write("\123\x75\143\x63\x65\163\163", "\103\162\x65\x61\x74\145\144\x20\144\151\162\x65\x63\x74\157\162\x79\x3a\40{$remote_dir}"); goto WlYE_; OKKbG: fputcsv($handle, ["\x63\154\x69\145\156\164\137\151\x64", "\165\x73\x65\x72\137\151\x64", "\142\x6f\x6f\x6b\137\151\x64", "\163\164\x61\162\164\x5f\144\x61\x74\145", "\145\156\144\x5f\144\x61\x74\145", "\x66\154\141\147\x5f\x65\x6e\144", "\143\162\x65\x61\x74\x65\x64\x5f\x61\164", "\x75\160\x64\x61\x74\145\144\137\x61\x74", "\x65\155\141\151\x6c"], "\174"); goto Gq6g3; jHm2U: $conn_id = ftp_connect($this->ftp_host); goto Kb2U2; uLbNH: if ($login) { goto q0jJL; } goto aN6fW; NlhK2: if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) { goto Ys0eP; } goto ZqCRR; y0JjP: pK4vP: goto B_4by; BoetW: LyFho: goto E1C0Q; xXfJO: goto iONhS; goto eIExy; ycPpB: fclose($handle); goto jHm2U; jvW9g: } catch (\PDOException $e_H) { goto fysjK; ZJTD0: $logs->write($SECTIONNAME, "\x45\x52\x52\117\x52\40" . $sqlState . "\40\75\76\40" . $errMessage . "\xa"); goto QQro4; p5u5A: $errCode = $e_H->errorInfo[1]; goto bYCDD; fysjK: $sqlState = $e_H->errorInfo[0]; goto p5u5A; bYCDD: $errMessage = $e_H->errorInfo[2]; goto ZJTD0; QQro4: } goto r5vE6; gwXwX: MpdrC: goto peLoT; ZOPiO: VtoQq: goto m2gix; BQXfS: $queries = DB::getQueryLog(); goto MI7Kl; cH7yC: } private function exportVisit($logs, $client_id) { goto r5oQO; NePSp: if (!$this->debug) { goto VtoRf; } goto cLZ4T; vCvKG: $query = DB::table("\164\x76\151\x73\x69\164\157\162\x73\x20\x61\163\x20\x61")->select(["\x61\x2e\52"])->where(function ($query) { $query->whereRaw("\104\101\x54\x45\137\106\x4f\122\x4d\x41\x54\x28\x61\56\143\x72\x65\x61\x74\145\144\x5f\x61\x74\54\40\x27\x25\131\x25\x6d\x27\51\x20\75\x20\x27" . $this->periode . "\47")->orWhereRaw("\x44\101\124\x45\137\x46\x4f\122\115\101\x54\50\x61\56\165\x70\x64\x61\164\x65\144\x5f\141\x74\54\x20\x27\45\131\x25\x6d\47\x29\40\75\x20\x27" . $this->periode . "\47"); })->get(); goto vml83; eg_iw: if (!$this->debug) { goto OLPa1; } goto CgZb1; r5oQO: $SECTIONNAME = "\126\x49\123\x49\124"; goto eg_iw; W2c6Y: OLPa1: goto vCvKG; d0BVd: si1yh: goto fjst_; E5QHE: $sql = Str::replaceArray("\77", $queries[$q]["\142\151\x6e\144\151\x6e\x67\163"], str_replace("\x3f", "\47\77\47", $queries[$q]["\161\165\145\162\171"])); goto hB1ge; cLZ4T: $queries = DB::getQueryLog(); goto n0Sfl; q8X2p: SAbkE: goto VF2su; cELxL: e1Rya: goto FVIvT; fjst_: $q++; goto J1W9B; QUm8b: $logs->write("\x53\x51\x4c", $sql); goto d0BVd; FVIvT: if (!($q < count($queries))) { goto SAbkE; } goto E5QHE; hB1ge: $logs->write("\x42\x49\x4e\104\x49\x4e\x47", "\133" . implode("\54\40", $queries[$q]["\x62\x69\156\x64\151\156\147\163"]) . "\x5d"); goto QUm8b; CgZb1: DB::enableQueryLog(); goto W2c6Y; VF2su: VtoRf: goto Xvo5q; vml83: try { goto EaK1U; pUZmW: $remote_file = $remote_dir . "\x2f" . basename($file); goto g_dr9; jKqm6: GgEoq: goto fTD06; fTD06: fclose($handle); goto xJOsx; g_dr9: if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) { goto M64Vx; } goto UpWiX; OqClV: PjBiU: goto VM7VO; j20bE: $login = ftp_login($conn_id, $this->ftp_username, $this->ftp_password); goto ZIqsT; lVQDO: WdXv1: goto K4rZy; K4rZy: $remote_dir = "\x2f" . $client_id; goto CC4Eq; AcWEa: if (ftp_mkdir($conn_id, $remote_dir)) { goto PjBiU; } goto dgypC; fefEZ: ftp_close($conn_id); goto nfkFi; xJOsx: $conn_id = ftp_connect($this->ftp_host); goto j20bE; XxfF9: B51lN: goto UoGHT; osLyy: goto fRyfR; goto lVQDO; K9qN8: $logs->write("\123\x75\x63\143\x65\163\x73", "\x46\151\x6c\x65\40\165\x70\154\x6f\141\144\145\x64\40\x73\x75\143\143\x65\x73\163\x66\x75\x6c\x6c\x79\40\164\x6f\40\x46\x54\x50\40\163\145\x72\x76\145\x72\x2e"); goto AcRCl; dVKO9: goto uJLXH; goto TtlFb; CC4Eq: if (@ftp_chdir($conn_id, $remote_dir)) { goto J85w_; } goto AcWEa; R7d9S: $handle = fopen($file, "\167"); goto RNNGB; UpWiX: $logs->write("\x45\162\x72\x6f\162", "\165\x70\x6c\157\x61\x64\x69\156\147\40\x74\150\145\x20\x66\x69\x6c\x65\40\x74\157\x20\106\124\x50\56"); goto dVKO9; N1lAy: FRcH_: goto FmT5V; wX_7D: goto FRcH_; goto DqALg; YVAy1: $logs->write("\x44\141\164\141", "\133" . $row . "\135"); goto HbWjJ; NXBju: $this->line("\x4e\157\x20\104\x61\x74\x61"); goto wX_7D; fZHmP: $file = storage_path("\x61\x70\160\x2f\x67\156\x73\137" . $this->periode . "\137\x76\151\163\151\x74\x2e\x63\x73\166"); goto R7d9S; MwFS5: unlink($file); goto N1lAy; t3s_5: $row = count($query); goto YVAy1; x2xyw: goto B51lN; goto OqClV; AcRCl: uJLXH: goto fefEZ; ctntR: foreach ($query as $value) { fputcsv($handle, [$value->id, $value->client_id, $value->date, $value->visitor, $value->platform, $value->device, $value->browser, $value->browser_name, $value->user_agent, $value->created_at, $value->updated_at], "\x7c"); LiN0L: } goto jKqm6; RNNGB: fputcsv($handle, ["\x69\144", "\143\154\x69\x65\x6e\164\137\151\144", "\x64\141\x74\145", "\166\151\163\x69\x74\x6f\162", "\x70\154\141\x74\x66\x6f\x72\x6d", "\144\x65\x76\151\143\145", "\142\162\x6f\167\163\x65\162", "\142\x72\x6f\x77\163\x65\162\x5f\x6e\x61\155\x65", "\x75\163\x65\162\137\x61\x67\145\x6e\164", "\143\162\x65\141\x74\x65\x64\x5f\141\x74", "\x75\x70\144\141\164\145\144\137\141\x74"], "\174"); goto ctntR; UoGHT: J85w_: goto pUZmW; tL14A: $logs->write("\105\x72\x72\x6f\x72", "\106\124\120\x20\154\x6f\147\x69\x6e\40\x66\x61\x69\154\145\x64\x2e"); goto osLyy; TtlFb: M64Vx: goto K9qN8; nfkFi: fRyfR: goto MwFS5; VM7VO: $logs->write("\123\x75\x63\143\x65\163\x73", "\103\162\145\141\x74\x65\144\40\144\151\x72\x65\x63\x74\x6f\162\171\x3a\40{$remote_dir}"); goto XxfF9; dgypC: $logs->write("\105\x72\162\157\162", "\106\x61\151\154\145\x64\40\x74\157\x20\143\162\x65\141\164\145\x20\x64\x69\162\145\143\164\157\x72\171\72\x20{$remote_dir}"); goto x2xyw; ZIqsT: if ($login) { goto WdXv1; } goto tL14A; FmT5V: $this->line("\105\116\x44\x20\75\x3e\x20" . $SECTIONNAME . "\xd\xa"); goto H8VEM; HbWjJ: if ($row > 0) { goto EGTx3; } goto NXBju; EaK1U: $this->line("\x42\105\x47\111\116\40\x3d\76\40" . $SECTIONNAME); goto t3s_5; DqALg: EGTx3: goto fZHmP; H8VEM: } catch (\PDOException $e_H) { goto OIiRl; oncf6: $errMessage = $e_H->errorInfo[2]; goto DavD5; xWncW: $errCode = $e_H->errorInfo[1]; goto oncf6; DavD5: $logs->write($SECTIONNAME, "\105\122\x52\117\122\40" . $sqlState . "\40\x3d\76\40" . $errMessage . "\12"); goto CfcJX; OIiRl: $sqlState = $e_H->errorInfo[0]; goto xWncW; CfcJX: } goto NePSp; n0Sfl: $q = 0; goto cELxL; J1W9B: goto e1Rya; goto q8X2p; Xvo5q: } }
