<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-23 17:36:13             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Console\Commands; use App\Logs; use Carbon\Carbon; use Illuminate\Support\Str; use Illuminate\Console\Command; use Illuminate\Support\Facades\DB; class AutoUpdateTrx extends Command { protected $signature = "\x67\x69\156\145\163\151\x61\x3a\x75\160\x64\141\164\145\x2d\164\162\170\x20\173\102\114\x4f\103\113\75\x52\105\x41\x44\x7d\x20\x7b\x2d\55\141\x6c\154\143\154\x69\x65\156\x74\163\175\x20\x7b\x2d\x2d\144\145\142\165\x67\175"; protected $description = "\103\x6f\x6d\x6d\x61\156\x64\x20\146\157\162\40\x75\160\x64\x61\164\x65\40\x66\x6c\141\x67\40\x74\x72\x61\156\163\x61\143\x74\151\x6f\156\x20\167\x69\x74\150\40\160\141\162\141\x6d\145\x74\x65\162\163\x20\173\x42\x4c\x4f\x43\113\75\x77\150\x69\143\x68\40\164\162\x61\x6e\x73\141\x63\x74\151\157\156\x20\x74\157\40\x75\160\x64\141\164\x65\175\40\x7b\x2d\x2d\x61\x6c\154\143\x6c\151\145\x6e\164\163\75\x77\x68\145\x74\150\x65\x72\40\141\154\154\x20\x63\x6c\x69\x65\156\164\x73\x20\157\162\x20\152\165\x73\x74\40\164\150\151\x73\40\143\154\151\x65\x6e\164\x7d\x20\x7b\55\55\144\145\x62\165\147\x3d\160\162\x69\x6e\x74\x20\161\x75\145\162\x79\40\164\157\40\x6c\157\147\x73\x7d"; public function handle() { goto Ub_iV; Eva0H: if (!($q < count($queries))) { goto UPRtW; } goto MPXPC; zCFqr: if (!($q < count($queries))) { goto Hvmvn; } goto Mz9wx; MPXPC: $sql = Str::replaceArray("\77", $queries[$q]["\142\x69\156\144\151\156\147\x73"], str_replace("\77", "\47\77\47", $queries[$q]["\x71\165\145\x72\x79"])); goto KU0hU; xWVVr: $q++; goto GbweV; b3m0B: A8wAd: goto xwJgP; Mz9wx: $sql = Str::replaceArray("\x3f", $queries[$q]["\x62\151\156\x64\x69\x6e\x67\x73"], str_replace("\77", "\47\77\47", $queries[$q]["\161\x75\145\162\171"])); goto hIUHb; pGJlq: DB::enableQueryLog(); goto sTwSb; b2pk0: UPRtW: goto qVXu1; OGn0G: $job_info = pathinfo(__FILE__); goto vv69F; XaIvN: if (!$this->debug) { goto ACaSB; } goto q2D2s; BcNRP: Hvmvn: goto YhXey; jju2N: OL7KS: goto xWVVr; akpIw: DB::enableQueryLog(); goto woUmu; woUmu: MmlbA: goto Zp9Le; GbweV: goto JIyab; goto b2pk0; ZvR_W: $logs->write("\x53\x54\x41\122\124", ''); goto M0_yQ; NmpxE: $filter_block = $this->argument("\x42\x4c\117\x43\113") ? $this->argument("\102\114\117\x43\x4b") : "\x52\105\x41\x44"; goto kQj8S; xCl5S: READ: goto o9jJJ; bT2ca: cPSui: goto YGedN; yo68R: goto SELESAI; goto rCyqK; ZY8yU: $logs->write("\123\x51\x4c", $sql); goto tFxoq; l6r3w: if ($filter_block == '' || $filter_block == "\x41\114\x4c\102\114\117\103\x4b") { goto A8wAd; } goto JHkDh; KU0hU: $logs->write("\102\x49\x4e\x44\x49\x4e\x47", "\x5b" . implode("\54\40", $queries[$q]["\142\151\x6e\144\x69\x6e\x67\x73"]) . "\135"); goto AFmA9; n8A2o: $logs = new Logs(($this->allclients ? '' : $client_id . "\x5f") . $nama_jobs . "\137" . $filter_block); goto ZvR_W; SCl8S: $SECTIONNAME = "\x52\x45\116\x54"; goto v4UU3; RJywx: try { goto pcOsH; yp6OE: $this->line("\105\x4e\104\x20\x3d\x3e\x20" . $SECTIONNAME . "\15\12"); goto MoXBG; FxK0j: $this->line("\x46\157\165\156\x64\x20" . $row . "\40\104\141\164\x61"); goto dxknq; pcOsH: $this->line("\x42\x45\107\x49\116\x20\x3d\x3e\40" . $SECTIONNAME); goto WNyes; WNyes: $row = count($query); goto gcS2k; rA0Nt: goto kp_qD; goto rrpRJ; LHU7w: kp_qD: goto yp6OE; rrpRJ: n_e7L: goto FxK0j; QpHnr: aAydI: goto LHU7w; gcS2k: $logs->write("\104\141\164\x61", "\x5b" . $row . "\135"); goto gIpIz; gIpIz: if ($row > 0) { goto n_e7L; } goto Zvcyv; Zvcyv: $this->line("\116\157\x20\104\x61\x74\141"); goto rA0Nt; dxknq: foreach ($query as $value) { $update = DB::table("\x74\x74\x72\x78\137\162\145\141\x64")->where("\x69\144", $value->id)->where("\x63\154\151\145\x6e\x74\137\x69\x64", $value->client_id)->where("\x75\x73\145\162\x5f\151\x64", $value->user_id)->where("\142\x6f\157\x6b\x5f\151\x64", $value->book_id)->update(["\x66\154\141\147\137\x65\x6e\x64" => "\x59", "\165\160\x64\x61\x74\x65\144\137\141\164" => $now]); vrve5: } goto QpHnr; MoXBG: } catch (\PDOException $e_H) { goto fZuc3; leTY4: $errMessage = $e_H->errorInfo[2]; goto CD50y; fZuc3: $sqlState = $e_H->errorInfo[0]; goto wlECG; wlECG: $errCode = $e_H->errorInfo[1]; goto leTY4; CD50y: $logs->write($SECTIONNAME, "\105\122\x52\117\x52\x20" . $sqlState . "\40\75\76\x20" . $errMessage . "\12"); goto DXmg8; DXmg8: } goto g5E6y; ZTVSS: try { $rent_days = DB::select("\123\105\114\x45\x43\x54\x20\x60\x76\x61\154\x75\x65\x60\40\106\x52\x4f\115\40\x74\160\141\162\141\x6d\x65\x74\x65\162\40\x57\x48\x45\x52\x45\x20\x60\156\141\155\x65\x60\75\x27\162\145\156\x74\137\x62\157\157\153\47\73"); $rent_day = $rent_days ? (int) $rent_days[0]->value : 3; } catch (\PDOException $e) { $logs->write("\105\x52\x52\x4f\122\x20\x50\x41\122\x41\x4d\x45\x54\105\122\75\x27\162\x65\156\x74\x5f\x62\157\157\x6b\x27", $e->getMessage() . "\xa"); } goto r6M21; q2D2s: $queries = DB::getQueryLog(); goto P6YZy; oijvM: goto v9xXG; goto BcNRP; qVXu1: ACaSB: goto l6r3w; vCTbR: RENT: goto SCl8S; kQj8S: $this->debug = $this->option("\144\x65\142\x75\147") ?? 0; goto BXCvc; TiJFz: $queries = DB::getQueryLog(); goto ATpCi; YGedN: jTCVy: goto bq4qg; P6YZy: $q = 0; goto PIF8H; pfp9J: $logs->write("\123\124\x4f\120", "\15\xa"); goto h7FfG; bQ9gq: $rent_day = 3; goto ZTVSS; YhXey: KSTn5: goto wzImU; hIUHb: $logs->write("\x42\111\x4e\x44\x49\x4e\107", "\x5b" . implode("\x2c\40", $queries[$q]["\x62\151\x6e\144\151\156\x67\163"]) . "\x5d"); goto ZY8yU; QnI_d: C1ODf: goto xCl5S; o9jJJ: $SECTIONNAME = "\122\x45\x41\x44"; goto yr915; cciDC: $q++; goto oijvM; rCyqK: Mvbiq: goto vCTbR; ATpCi: $q = 0; goto n33Qp; JHkDh: goto SELESAI; goto b3m0B; xwJgP: SELESAI: goto pfp9J; P5eyY: if (!$this->debug) { goto MmlbA; } goto akpIw; n33Qp: v9xXG: goto zCFqr; vv69F: $nama_jobs = $job_info["\146\x69\154\145\156\141\x6d\145"]; goto wubST; BXCvc: $this->allclients = $this->option("\141\x6c\154\x63\154\151\x65\156\x74\x73") ?? 0; goto n8A2o; bq4qg: if ($filter_block == '' || $filter_block == "\x41\114\114\102\x4c\117\103\113") { goto C1ODf; } goto TnX7j; TnX7j: goto SELESAI; goto QnI_d; AFmA9: $logs->write("\x53\x51\x4c", $sql); goto jju2N; yr915: $READ_H_CountSuccess = $READ_H_CountFailed = 0; goto P5eyY; PIF8H: JIyab: goto Eva0H; sTwSb: Yytka: goto bQ9gq; M0_yQ: switch ($filter_block) { case "\x52\105\x41\x44": goto READ; goto jTCVy; case "\122\105\x4e\124": goto RENT; goto jTCVy; } goto bT2ca; Zp9Le: $query = DB::table("\164\164\162\x78\137\x72\145\x61\x64\x20\141\163\x20\x61")->select(["\x61\56\151\x64", "\x61\x2e\143\x6c\151\145\156\x74\x5f\x69\x64", "\x61\x2e\x75\x73\145\x72\137\151\x64", "\x61\56\x62\157\157\153\x5f\x69\144", "\141\x2e\163\164\x61\x72\164\x5f\x72\x65\x61\x64", "\x61\56\x65\156\144\x5f\162\145\x61\144"])->when(!$this->allclients, function ($query) use($client_id) { return $query->where("\141\56\143\154\x69\145\156\x74\x5f\151\144", $client_id); })->where("\x61\x2e\x66\x6c\141\x67\137\x65\x6e\x64", "\116")->where("\145\x6e\x64\137\x72\x65\x61\144", "\74\75", Carbon::now("\x41\x73\x69\x61\x2f\112\141\153\x61\162\164\x61")->subMinutes(30))->get(); goto RJywx; sIs_b: try { goto ENXMF; ENXMF: $this->line("\x42\x45\x47\x49\x4e\x20\75\x3e\40" . $SECTIONNAME); goto kX6Ey; kX6Ey: $row = count($query); goto QOPpP; iPU0f: $this->line("\x45\116\104\40\x3d\x3e\x20" . $SECTIONNAME . "\xd\xa"); goto DsG7d; Swru6: goto oYG0X; goto vpHMj; yrOBk: oYG0X: goto iPU0f; QOPpP: $logs->write("\x44\x61\x74\x61", "\133" . $row . "\x5d"); goto UoC6y; vpHMj: T5UdQ: goto u0dE9; hDBvw: $this->line("\x4e\157\40\x44\x61\164\141"); goto Swru6; Eg5QN: sIh6y: goto yrOBk; kW3xd: foreach ($query as $value) { $update = DB::table("\164\x72\145\156\164\137\142\157\x6f\153")->where("\143\154\x69\x65\156\x74\137\151\144", $value->client_id)->where("\x75\x73\x65\x72\137\151\x64", $value->user_id)->where("\142\157\157\153\137\x69\144", $value->book_id)->update(["\146\154\x61\x67\x5f\x65\x6e\144" => "\x59", "\x75\x70\x64\141\x74\145\x64\x5f\141\x74" => $now]); hX7Vj: } goto Eg5QN; UoC6y: if ($row > 0) { goto T5UdQ; } goto hDBvw; u0dE9: $this->line("\106\157\x75\156\x64\40" . $row . "\x20\104\141\164\x61"); goto kW3xd; DsG7d: } catch (\PDOException $e_H) { goto cTpba; je19F: $errCode = $e_H->errorInfo[1]; goto LLp9H; LLp9H: $errMessage = $e_H->errorInfo[2]; goto XKbsZ; cTpba: $sqlState = $e_H->errorInfo[0]; goto je19F; XKbsZ: $logs->write($SECTIONNAME, "\x45\122\x52\117\x52\x20" . $sqlState . "\40\x3d\76\40" . $errMessage . "\xa"); goto x0Ic4; x0Ic4: } goto XaIvN; r6M21: $query = DB::table("\x74\162\145\x6e\164\x5f\x62\157\157\x6b\40\141\163\40\141")->select(["\141\56\x63\154\151\x65\x6e\x74\x5f\x69\144", "\x61\x2e\165\163\x65\x72\x5f\151\x64", "\x61\x2e\142\157\x6f\153\x5f\151\x64", "\x61\x2e\x73\x74\x61\x72\x74\137\144\141\x74\145", "\141\x2e\x65\156\x64\x5f\x64\141\x74\x65"])->when(!$this->allclients, function ($query) use($client_id) { return $query->where("\141\56\x63\154\151\x65\x6e\164\x5f\x69\144", $client_id); })->where("\141\56\x66\154\141\147\137\x65\x6e\x64", "\116")->where("\145\x6e\144\x5f\144\141\164\145", "\74\x3d", Carbon::now("\x41\x73\x69\x61\57\x4a\x61\153\141\162\x74\x61"))->get(); goto sIs_b; wzImU: if ($filter_block == '' || $filter_block == "\x41\x4c\114\x42\114\x4f\103\x4b") { goto Mvbiq; } goto yo68R; tFxoq: Mrcu7: goto cciDC; Ub_iV: $client_id = config("\x61\x70\x70\x2e\x63\154\151\145\x6e\x74\137\x69\144", ''); goto OGn0G; K0qG0: if (!$this->debug) { goto Yytka; } goto pGJlq; v4UU3: $RENT_H_CountSuccess = $RENT_H_CountFailed = 0; goto K0qG0; wubST: $now = Carbon::now("\x41\163\151\x61\57\112\141\153\141\162\x74\141"); goto NmpxE; g5E6y: if (!$this->debug) { goto KSTn5; } goto TiJFz; h7FfG: } }
