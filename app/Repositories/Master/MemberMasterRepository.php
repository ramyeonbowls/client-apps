<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-23 17:36:14             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Repositories\Master; use App\Models\User; use App\Models\IconMenu\IconMenu; use Illuminate\Support\Collection; use Illuminate\Support\Facades\DB; use Illuminate\Support\Facades\Hash; class MemberMasterRepository { public function get($client_id) : Collection { return DB::table("\165\163\x65\162\x73\x20\x61\163\40\141")->select("\x61\56\151\144", "\142\56\x6e\151\153", "\x62\56\x70\150\x6f\x74\157", "\x61\56\156\x61\x6d\145", "\141\x2e\145\155\141\151\x6c", "\142\56\160\150\157\156\145", "\142\x2e\142\x69\x72\164\x68\144\x61\x79", "\x61\56\x65\x6d\141\x69\154\137\166\x65\x72\x69\146\151\145\144\137\141\x74", "\141\x2e\x63\x72\145\141\164\145\144\137\141\164")->join("\x74\141\164\x74\162\137\x6d\145\x6d\142\x65\162\40\x61\163\40\142", function ($join) { $join->on("\x61\x2e\151\x64", "\x3d", "\142\x2e\x69\144"); })->where("\141\x2e\x63\154\151\145\156\x74\137\x69\x64", "\x3d", $client_id)->where("\x61\56\162\157\x6c\145", "\75", "\155\145\155\x62\145\x72")->get(); } public function store(object $data, $client_id) : bool { try { goto WblVz; WblVz: $user = $this->createUser($data, $client_id); goto BS5QA; znMI2: return true; goto VVNMQ; BS5QA: $attr = DB::table("\x74\x61\164\x74\162\137\x6d\x65\155\142\x65\162")->insert(["\151\144" => $user->id, "\x63\154\x69\145\x6e\x74\x5f\151\144" => $client_id, "\x6e\151\153" => $data->nik, "\x70\x68\x6f\x6e\145" => $data->phone, "\x62\151\x72\164\150\x64\x61\x79" => $data->birthday, "\x67\x65\156\144\145\162" => $data->gender, "\x63\x72\x65\x61\x74\145\144\137\141\164" => $data->create_date]); goto znMI2; VVNMQ: } catch (\Exception $e) { \Log::error("\x43\x72\x65\x61\x74\145\x20\x6d\x65\155\x62\145\x72\x20\x66\x61\151\154\145\x64\40\75\76\40" . $e->getMessage()); return false; } } protected function createUser(object $data, $client_id) { return User::create(["\156\141\x6d\x65" => $data->name, "\x65\155\141\151\x6c" => $data->email, "\x70\x61\x73\x73\x77\x6f\162\x64" => Hash::make($data->password), "\162\157\x6c\145" => "\x6d\x65\x6d\x62\x65\x72", "\146\154\141\x67\137\141\160\160\162\x6f\x76\145" => "\x59", "\x65\x6d\x61\x69\154\137\x76\145\x72\151\146\x69\145\144\137\x61\x74" => $data->create_date, "\x63\162\145\x61\x74\145\144\137\x61\x74" => $data->create_date, "\x63\154\151\x65\156\x74\x5f\x69\x64" => $client_id]); } public function update(object $data, string $id) : bool { return DB::transaction(function () use($data, $id) { return DB::table("\x75\x73\145\x72\163")->where("\x69\x64", $id)->where("\x72\157\154\x65", "\75", "\x6d\x65\155\x62\145\162")->update(["\x64\x65\163\143\162\151\x70\x74\x69\x6f\156" => $data->desc, "\146\x69\154\145" => $data->file, "\144\x69\x73\160\x5f\x74\171\x70\145" => $data->type, "\x63\x6c\151\145\x6e\164\x5f\x69\x64" => '', "\x75\x70\x64\x61\164\145\x64\137\x61\x74" => $data->modified_date, "\165\160\144\x61\x74\145\144\137\x62\x79" => $data->modified_by]); }); } public function delete(string $id, $client_id) { return DB::transaction(function () use($id, $client_id) { goto yk9cW; YjArN: $attr_file = $attr->first(); goto EXqNo; oqRgH: return $member->delete(); goto bbiYr; p2TEP: $member = DB::table("\165\x73\x65\162\163")->where("\x69\144", $id)->where("\x63\x6c\x69\145\x6e\164\x5f\151\144", $client_id)->where("\162\157\x6c\145", "\155\x65\155\142\x65\x72"); goto oqRgH; Be4BO: @unlink(storage_path("\x61\x70\160\x2f\x70\165\142\x6c\151\x63\x2f\x69\x6d\x61\x67\x65\x73\x2f\160\x72\157\x66\151\154\145\57" . $attr_file->photo)); goto n7_8o; EXqNo: if (!($attr_file->photo != '')) { goto vUHGm; } goto Be4BO; yk9cW: $attr = DB::table("\x74\x61\x74\x74\x72\137\155\145\x6d\142\x65\x72")->where("\143\x6c\151\x65\156\x74\x5f\151\x64", $client_id)->where("\151\x64", $id); goto YjArN; euV8T: DB::table("\164\x61\164\164\162\137\x6d\x65\x6d\x62\x65\162")->where("\151\x64", $id)->where("\x63\x6c\x69\145\156\x74\137\x69\144", $client_id)->delete(); goto p2TEP; n7_8o: vUHGm: goto euV8T; bbiYr: }); } public function check(string $id, $client_id) { return DB::table("\164\x74\x72\x78\x5f\x72\145\x61\x64\x20\141\163\40\x61")->select([DB::raw("\103\x4f\125\116\124\50\104\x49\123\124\111\116\x43\x54\40\141\56\142\157\x6f\x6b\137\151\x64\51\x20\x41\123\40\164\157\x74\141\x6c")])->where("\141\56\x63\x6c\x69\x65\x6e\164\137\151\144", $client_id)->where("\x61\56\x75\163\145\x72\x5f\151\144", $id)->get(); } }
