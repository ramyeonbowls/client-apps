<?php
/*   __________________________________________________
    |  Obfuscated by Tarmun - Php Obfuscator  2.0.14  |
    |              on 2024-11-18 10:11:20             |
    |                                                 |
    |_________________________________________________|
*/
 namespace App\Repositories\Master; use App\Models\User; use App\Models\IconMenu\IconMenu; use Illuminate\Support\Collection; use Illuminate\Support\Facades\DB; use Illuminate\Support\Facades\Hash; class MemberMasterRepository { public function get($client_id) : Collection { return DB::table("\165\x73\x65\162\x73\40\141\163\40\x61")->select("\141\x2e\151\x64", "\142\x2e\x6e\151\153", "\x62\x2e\160\x68\x6f\164\x6f", "\x61\56\156\x61\x6d\x65", "\141\x2e\x65\155\141\x69\154", "\x62\56\160\150\157\x6e\145", "\x62\56\142\151\162\164\150\x64\x61\x79", "\x61\x2e\145\x6d\x61\x69\x6c\137\166\x65\162\151\x66\151\145\x64\137\x61\x74", "\x61\56\x63\x72\145\x61\164\x65\144\137\x61\x74")->join("\x74\x61\164\164\162\x5f\x6d\145\x6d\142\145\162\x20\141\163\x20\142", function ($join) { $join->on("\141\56\x69\144", "\x3d", "\x62\56\151\x64"); })->where("\141\x2e\143\154\151\x65\156\164\137\x69\x64", "\75", $client_id)->where("\141\x2e\162\157\x6c\145", "\75", "\x6d\145\x6d\142\145\162")->get(); } public function store(object $data, $client_id) : bool { try { goto tQaUT; jsf57: return true; goto EHkwO; z68qk: $attr = DB::table("\x74\141\x74\164\162\137\x6d\145\155\142\145\162")->insert(["\151\x64" => $user->id, "\143\154\x69\145\156\x74\137\x69\x64" => $client_id, "\x6e\x69\153" => $data->nik, "\x70\x68\x6f\x6e\145" => $data->phone, "\x62\x69\162\164\150\x64\141\171" => $data->birthday, "\147\x65\x6e\x64\145\162" => $data->gender, "\143\162\145\x61\164\x65\x64\137\x61\x74" => $data->create_date]); goto jsf57; tQaUT: $user = $this->createUser($data, $client_id); goto z68qk; EHkwO: } catch (\Exception $e) { \Log::error("\103\x72\145\141\164\145\40\155\x65\x6d\x62\x65\162\40\146\x61\151\x6c\x65\x64\x20\75\76\x20" . $e->getMessage()); return false; } } protected function createUser(object $data, $client_id) { return User::create(["\x6e\x61\x6d\145" => $data->name, "\x65\x6d\141\x69\x6c" => $data->email, "\160\x61\163\163\167\x6f\162\x64" => Hash::make($data->password), "\162\x6f\154\145" => "\155\145\155\x62\x65\162", "\146\x6c\141\147\x5f\x61\160\x70\x72\x6f\x76\x65" => "\131", "\145\155\141\151\x6c\x5f\x76\x65\x72\x69\146\x69\145\144\137\141\164" => $data->create_date, "\143\162\145\x61\164\x65\144\137\141\x74" => $data->create_date, "\143\x6c\x69\145\x6e\164\137\151\x64" => $client_id]); } public function update(object $data, string $id) : bool { return DB::transaction(function () use($data, $id) { return DB::table("\x75\x73\145\x72\x73")->where("\151\x64", $id)->where("\162\x6f\x6c\x65", "\75", "\155\x65\155\142\145\162")->update(["\144\x65\163\x63\162\x69\x70\164\x69\x6f\156" => $data->desc, "\x66\151\x6c\x65" => $data->file, "\144\151\163\x70\x5f\164\x79\160\x65" => $data->type, "\x63\x6c\x69\x65\x6e\164\x5f\x69\144" => '', "\x75\x70\144\x61\x74\145\144\x5f\x61\x74" => $data->modified_date, "\x75\x70\144\141\164\x65\x64\x5f\x62\171" => $data->modified_by]); }); } public function delete(string $id, $client_id) { return DB::transaction(function () use($id, $client_id) { goto Ay8YU; Ay8YU: $attr = DB::table("\x74\141\164\x74\162\x5f\155\x65\x6d\x62\145\x72")->where("\x63\154\151\x65\156\x74\x5f\x69\x64", $client_id)->where("\151\x64", $id); goto UePSM; wiL6e: DB::table("\164\141\x74\164\162\x5f\155\145\x6d\x62\x65\162")->where("\151\144", $id)->where("\x63\154\x69\x65\x6e\x74\137\x69\144", $client_id)->delete(); goto RQYlA; NFoWe: if (!($attr_file->photo != '')) { goto OM0GB; } goto iVmDT; RQYlA: $member = DB::table("\165\x73\145\x72\x73")->where("\x69\x64", $id)->where("\x63\x6c\151\145\x6e\x74\x5f\x69\x64", $client_id)->where("\162\x6f\154\145", "\155\x65\x6d\142\x65\x72"); goto EQRte; UePSM: $attr_file = $attr->first(); goto NFoWe; EQRte: return $member->delete(); goto RWG4D; zIE32: OM0GB: goto wiL6e; iVmDT: @unlink(storage_path("\x61\x70\x70\x2f\160\x75\x62\x6c\151\143\57\x69\155\x61\147\145\163\57\x70\162\157\x66\x69\154\x65\57" . $attr_file->photo)); goto zIE32; RWG4D: }); } public function check(string $id, $client_id) { return DB::table("\x74\164\162\170\137\x72\145\x61\x64\x20\141\x73\x20\x61")->select([DB::raw("\x43\117\125\116\x54\50\104\x49\x53\124\x49\x4e\103\x54\40\141\x2e\142\x6f\157\x6b\x5f\151\x64\x29\x20\101\x53\40\x74\x6f\x74\141\x6c")])->where("\x61\56\x63\154\x69\x65\x6e\164\137\151\x64", $client_id)->where("\141\x2e\x75\163\x65\162\137\x69\x64", $id)->get(); } }
